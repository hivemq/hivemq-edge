import{p as $}from"./chunk-BAOP5US2-B6it3goN.js";import{_ as n,s as B,g as S,m as D,n as F,a as _,b as z,B as y,F as P,d as W,t as T,C as E,D as A,l as x}from"./PropertyPanelController-B_GTknPx.js";import{p as I}from"./gitGraph-YCYPL57B-Ejh1_COe.js";import"./index-cMih3SEP.js";import"./index-iD7yky8Q.js";import"./types-CNm55BG_.js";import"./usePolicyGuards-DliXcvYq.js";import"./useDataHubDraftStore-BdIk6zJn.js";import"./index-UJo6opCj.js";import"./vanilla-Dd4Maacd.js";import"./middleware-DWkoLS6u.js";import"./index-Dis5-5gm.js";import"./index-BXWYaCHO.js";import"./without-BTTCd72_.js";import"./index-BTlOwmq4.js";import"./ArrayFieldTemplate-BvbIrrVp.js";import"./pick-DicWcAKr.js";import"./chunk-TRO7245M-Czmm3RtS.js";import"./chunk-JARCRF6W-CHhnzfpl.js";import"./chunk-ZPFGWTBB-27OtcFRz.js";import"./chunk-W7WUSNWJ-DJm2I2MC.js";import"./index-C23MLgnh.js";import"./chunk-RDF2AYID-BFNDpMsD.js";import"./creatable-select-CDfhMLkq.js";import"./use-chakra-select-props-D5NVA-bJ.js";import"./chunk-KC77MHL3-CpO6TSLY.js";import"./chunk-HB6KBUMZ-BnKuEGjs.js";import"./chunk-OCNORRQU-qVjYAyQ7.js";import"./index-DDmdO6wr.js";import"./select-Cl6Duh2E.js";import"./config.utils-FEQhkVx6.js";import"./toast-utils-BddXXXrS.js";import"./PaginatedTable-CpimMJK6.js";import"./datetime-B2_BsC7v.js";import"./chunk-KO6Q73AP-Bk5HKb-M.js";import"./chunk-VTV6N5LE-DWhDJEfB.js";import"./chunk-RPO2WXNL-BTibYaQa.js";import"./chunk-EL2VKIZQ-C-XtNqj-.js";import"./useListProtocolAdapters-B80RXV7q.js";import"./ArrayFieldItemTemplate-CQ7KDBCe.js";import"./color-Cs2FUV59.js";import"./useGetAllSchemas-BHgSFldN.js";import"./utils-Da84xa3e.js";import"./SchemaNode.utils-CqHD45U7.js";import"./index-C46KiF-i.js";import"./useGetAllDataPolicies-C_g1xUlx.js";import"./chunk-FHHZMTWR-BZ2wKB7t.js";import"./useGetAllBehaviorPolicies-C8fnxDpN.js";import"./step-BUvoxw0L.js";import"./bump-DxSIDwFB.js";/* empty css              */import"./_baseUniq-UwA5AnXX.js";import"./_basePickBy-BpWhf_0p.js";import"./clone-DWpQoFSB.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="0fc8fa79-37dd-4c93-9584-1dd4285dcdb3",t._sentryDebugIdIdentifier="sentry-dbid-0fc8fa79-37dd-4c93-9584-1dd4285dcdb3")}catch{}})();var v={packet:[]},h=structuredClone(v),N=A.packet,L=n(()=>{const t=y({...N,...E().packet});return t.showBits&&(t.paddingY+=10),t},"getConfig"),Y=n(()=>h.packet,"getPacket"),M=n(t=>{t.length>0&&h.packet.push(t)},"pushWord"),O=n(()=>{T(),h=structuredClone(v)},"clear"),u={pushWord:M,getPacket:Y,getConfig:L,clear:O,setAccTitle:z,getAccTitle:_,setDiagramTitle:F,getDiagramTitle:D,getAccDescription:S,setAccDescription:B},G=1e4,H=n(t=>{$(t,u);let e=-1,a=[],l=1;const{bitsPerRow:s}=u.getConfig();for(let{start:r,end:o,label:c}of t.blocks){if(o&&o<r)throw new Error(`Packet block ${r} - ${o} is invalid. End must be greater than start.`);if(r!==e+1)throw new Error(`Packet block ${r} - ${o??r} is not contiguous. It should start from ${e+1}.`);for(e=o??r,x.debug(`Packet block ${r} - ${e} with label ${c}`);a.length<=s+1&&u.getPacket().length<G;){const[k,p]=K({start:r,end:o,label:c},l,s);if(a.push(k),k.end+1===l*s&&(u.pushWord(a),a=[],l++),!p)break;({start:r,end:o,label:c}=p)}}u.pushWord(a)},"populate"),K=n((t,e,a)=>{if(t.end===void 0&&(t.end=t.start),t.start>t.end)throw new Error(`Block start ${t.start} is greater than block end ${t.end}.`);return t.end+1<=e*a?[t,void 0]:[{start:t.start,end:e*a-1,label:t.label},{start:e*a,end:t.end,label:t.label}]},"getNextFittingBlock"),R={parse:n(async t=>{const e=await I("packet",t);x.debug(e),H(e)},"parse")},U=n((t,e,a,l)=>{const s=l.db,r=s.getConfig(),{rowHeight:o,paddingY:c,bitWidth:k,bitsPerRow:p}=r,b=s.getPacket(),i=s.getDiagramTitle(),m=o+c,d=m*(b.length+1)-(i?0:o),f=k*p+2,g=P(e);g.attr("viewbox",`0 0 ${f} ${d}`),W(g,d,f,r.useMaxWidth);for(const[w,C]of b.entries())X(g,C,w,r);g.append("text").text(i).attr("x",f/2).attr("y",d-m/2).attr("dominant-baseline","middle").attr("text-anchor","middle").attr("class","packetTitle")},"draw"),X=n((t,e,a,{rowHeight:l,paddingX:s,paddingY:r,bitWidth:o,bitsPerRow:c,showBits:k})=>{const p=t.append("g"),b=a*(l+r)+r;for(const i of e){const m=i.start%c*o+1,d=(i.end-i.start+1)*o-s;if(p.append("rect").attr("x",m).attr("y",b).attr("width",d).attr("height",l).attr("class","packetBlock"),p.append("text").attr("x",m+d/2).attr("y",b+l/2).attr("class","packetLabel").attr("dominant-baseline","middle").attr("text-anchor","middle").text(i.label),!k)continue;const f=i.end===i.start,g=b-2;p.append("text").attr("x",m+(f?d/2:0)).attr("y",g).attr("class","packetByte start").attr("dominant-baseline","auto").attr("text-anchor",f?"middle":"start").text(i.start),f||p.append("text").attr("x",m+d).attr("y",g).attr("class","packetByte end").attr("dominant-baseline","auto").attr("text-anchor","end").text(i.end)}},"drawWord"),j={draw:U},q={byteFontSize:"10px",startByteColor:"black",endByteColor:"black",labelColor:"black",labelFontSize:"12px",titleColor:"black",titleFontSize:"14px",blockStrokeColor:"black",blockStrokeWidth:"1",blockFillColor:"#efefef"},J=n(({packet:t}={})=>{const e=y(q,t);return`
	.packetByte {
		font-size: ${e.byteFontSize};
	}
	.packetByte.start {
		fill: ${e.startByteColor};
	}
	.packetByte.end {
		fill: ${e.endByteColor};
	}
	.packetLabel {
		fill: ${e.labelColor};
		font-size: ${e.labelFontSize};
	}
	.packetTitle {
		fill: ${e.titleColor};
		font-size: ${e.titleFontSize};
	}
	.packetBlock {
		stroke: ${e.blockStrokeColor};
		stroke-width: ${e.blockStrokeWidth};
		fill: ${e.blockFillColor};
	}
	`},"styles"),Qt={parser:R,db:u,renderer:j,styles:J};export{Qt as diagram};
//# sourceMappingURL=diagram-NZMEDLQF-C39Lmy94.js.map
