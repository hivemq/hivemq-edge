import{P as yt,j as e,m as It,r as y,R as S,h as be,e as At,f as wt,Q as Lt,u as T,G as xe,a4 as Ot,at as Ee,aU as w,cb as bt,cc as Et,cd as Tt,ce as kt,a as St,b as ee,aO as Te,Z as B,cf as zt,T as U,bH as vt,bI as Pt,a2 as R,z as $,n as _,C as Bt,a3 as Ne,a0 as je,ah as Ut,cg as Ve,ai as Qt,S as Gt,D as _t,M as Rt,p as Yt,q as Ft,s as Ht,v as Zt,a7 as Xe,a8 as $t,B as Wt}from"./index-cMih3SEP.js";import{P as Vt}from"./PageContainer-BtWKGien.js";import{a as rt,N as I,I as pe,E as at}from"./types-DcJW2o_l.js";/* empty css              */import{P as Xt,N as Kt,T as q,p as Jt,M as qt}from"./ToolbarButtonGroup-BOk5XENn.js";import{u as eo}from"./useListProtocolAdapters-B80RXV7q.js";import{u as to}from"./useListBridges-BwHrTuI4.js";import{u as Me}from"./useGetAdapterTypes-Dufd8ZhJ.js";import{c as oo,a as so,b as no,d as io,u as ro,e as ao,f as Le,h as Ke,C as De}from"./nodes-utils-D4SYs862.js";import{g as W,i as ct,l as lt,o as co,f as dt,H as lo,s as go,I as uo,J as Je,K as po,L as ho,e as ke,N as mo,O as xo,Q as No,S as jo,T as Mo,A as gt,P as k,M as Do,U as z,r as Co,V as fo}from"./index-Dis5-5gm.js";import{u as te}from"./useWorkspaceStore-CGV4wV7X.js";import{u as yo}from"./useGetAdaptersStatus-BDXWNPVx.js";import{u as Io}from"./useGetBridgesStatus-BC_E09jB.js";import{t as Ao,u as wo,v as Lo,L as Oo,a as bo}from"./index-iD7yky8Q.js";import{W as Ie}from"./types-B4vn0nsI.js";import{c as ut,d as Eo}from"./topics-utils-l3ij3e8P.js";import{m as qe}from"./index-CN_t91dT.js";import{u as To}from"./useGetAllDataPolicies-C_g1xUlx.js";import{a as ko}from"./types-CNm55BG_.js";import{I as So,a as zo,l as vo}from"./05-icon-industrial-hivemq-edge-CnZ6VqSq.js";import{C as pt}from"./ConfirmationDialog-D4ZhAtlq.js";import{D as Ae}from"./chunk-W7WUSNWJ-DJm2I2MC.js";import{u as Po,a as Bo}from"./useListSouthboundMappings-Bc_cq5lO.js";import{C as me}from"./ConnectionStatusBadge-BqllVmcz.js";import{i as Uo,a as Oe,d as et,P as tt}from"./adapter.utils-B-ndd-tn.js";import{P as Qo,T as Go}from"./EntityTag-D_VD81fJ.js";import{T as _o,a as Ro}from"./chunk-RPO2WXNL-BTibYaQa.js";import{S as Yo}from"./chunk-GOJLRND4-gY5DQ7Jj.js";import{u as Fo}from"./chunk-KC77MHL3-CpO6TSLY.js";import{u as Ho}from"./useGetDomainTags-VyBNKn6z.js";import"./vanilla-Dd4Maacd.js";import"./index-UJo6opCj.js";import"./middleware-DWkoLS6u.js";import"./utils-Da84xa3e.js";import"./chunk-EL2VKIZQ-C-XtNqj-.js";import"./index-C46KiF-i.js";import"./index-BTlOwmq4.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new t.Error().stack;o&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[o]="cb62fdb5-88d5-403b-acf1-8cc5677b4c43",t._sentryDebugIdIdentifier="sentry-dbid-cb62fdb5-88d5-403b-acf1-8cc5677b4c43")}catch{}})();function Zo(t){return Array(t).fill(1).map((o,s)=>s+1)}var ot=3,Se=t=>{const{noOfLines:o=ot,spacing:s="0.5rem",skeletonHeight:r="0.5rem",className:i,startColor:a,endColor:n,isLoaded:g,fadeDuration:c,speed:u,variant:l,size:p,colorScheme:d,children:D,...N}=t,h=Fo(typeof o=="number"?[o]:o)||ot,m=Zo(h),x=C=>h>1&&C===m.length?"80%":"100%",f=yt("chakra-skeleton__group",i);return e.jsx(It.div,{className:f,...N,children:m.map((C,j)=>{if(g&&j>0)return null;const M=g?null:{mb:C===m.length?"0":s,width:x(C),height:r};return e.jsx(Yo,{startColor:a,endColor:n,isLoaded:g,fadeDuration:c,speed:u,variant:l,size:p,colorScheme:d,...M,children:j===0?D:void 0},m.length.toString()+C)})})};Se.displayName="SkeletonText";var v;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(v||(v={}));function $o({color:t,dimensions:o,lineWidth:s}){return S.createElement("path",{stroke:t,strokeWidth:s,d:`M${o[0]/2} 0 V${o[1]} M0 ${o[1]/2} H${o[0]}`})}function Wo({color:t,radius:o}){return S.createElement("circle",{cx:o,cy:o,r:o,fill:t})}const Vo={[v.Dots]:"#91919a",[v.Lines]:"#eee",[v.Cross]:"#e2e2e2"},Xo={[v.Dots]:1,[v.Lines]:1,[v.Cross]:6},Ko=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function ht({id:t,variant:o=v.Dots,gap:s=20,size:r,lineWidth:i=1,offset:a=2,color:n,style:g,className:c}){const u=y.useRef(null),{transform:l,patternId:p}=W(Ko,lt),d=n||Vo[o],D=r||Xo[o],N=o===v.Dots,h=o===v.Cross,m=Array.isArray(s)?s:[s,s],x=[m[0]*l[2]||1,m[1]*l[2]||1],f=D*l[2],C=h?[f,f]:x,j=N?[f/a,f/a]:[C[0]/a,C[1]/a];return S.createElement("svg",{className:ct(["react-flow__background",c]),style:{...g,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},S.createElement("pattern",{id:p+t,x:l[0]%x[0],y:l[1]%x[1],width:x[0],height:x[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},N?S.createElement(Wo,{color:d,radius:f/a}):S.createElement($o,{dimensions:C,color:d,lineWidth:i})),S.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${p+t})`}))}ht.displayName="Background";var Jo=y.memo(ht),J;(function(t){t.Line="line",t.Handle="handle"})(J||(J={}));function qo({width:t,prevWidth:o,height:s,prevHeight:r,invertX:i,invertY:a}){const n=t-o,g=s-r,c=[n>0?1:n<0?-1:0,g>0?1:g<0?-1:0];return n&&i&&(c[0]=c[0]*-1),g&&a&&(c[1]=c[1]*-1),c}const mt={width:0,height:0,x:0,y:0},es={...mt,pointerX:0,pointerY:0,aspectRatio:1};function ts({nodeId:t,position:o,variant:s=J.Handle,className:r,style:i={},children:a,color:n,minWidth:g=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:l=Number.MAX_VALUE,keepAspectRatio:p=!1,shouldResize:d,onResizeStart:D,onResize:N,onResizeEnd:h}){const m=co(),x=typeof t=="string"?t:m,f=dt(),C=y.useRef(null),j=y.useRef(es),M=y.useRef(mt),L=lo(),P=s===J.Line?"right":"bottom-right",O=o??P;y.useEffect(()=>{if(!C.current||!x)return;const V=go(C.current),X=O.includes("right")||O.includes("left"),H=O.includes("bottom")||O.includes("top"),K=O.includes("left"),le=O.includes("top"),jt=uo().on("start",Q=>{const A=f.getState().nodeInternals.get(x),{xSnapped:Ce,ySnapped:fe}=L(Q);M.current={width:(A==null?void 0:A.width)??0,height:(A==null?void 0:A.height)??0,x:(A==null?void 0:A.position.x)??0,y:(A==null?void 0:A.position.y)??0},j.current={...M.current,pointerX:Ce,pointerY:fe,aspectRatio:M.current.width/M.current.height},D==null||D(Q,{...M.current})}).on("drag",Q=>{const{nodeInternals:A,triggerNodeChanges:Ce}=f.getState(),{xSnapped:fe,ySnapped:Mt}=L(Q),ve=A.get(x);if(ve){const de=[],{pointerX:Dt,pointerY:Ct,width:Pe,height:Be,x:Ue,y:Qe,aspectRatio:G}=j.current,{x:Ge,y:_e,width:Re,height:Ye}=M.current,Fe=Math.floor(X?fe-Dt:0),He=Math.floor(H?Mt-Ct:0);let b=Je(Pe+(K?-Fe:Fe),g,u),E=Je(Be+(le?-He:He),c,l);if(p){const Z=b/E,ne=X&&H,ge=X&&!H,ue=H&&!X;b=Z<=G&&ne||ue?E*G:b,E=Z>G&&ne||ge?b/G:E,b>=u?(b=u,E=u/G):b<=g&&(b=g,E=g/G),E>=l?(E=l,b=l*G):E<=c&&(E=c,b=c*G)}const Ze=b!==Re,$e=E!==Ye;if(K||le){const Z=K?Ue-(b-Pe):Ue,ne=le?Qe-(E-Be):Qe,ge=Z!==Ge&&Ze,ue=ne!==_e&&$e;if(ge||ue){const ye={id:ve.id,type:"position",position:{x:ge?Z:Ge,y:ue?ne:_e}};de.push(ye),M.current.x=ye.position.x,M.current.y=ye.position.y}}if(Ze||$e){const Z={id:x,type:"dimensions",updateStyle:!0,resizing:!0,dimensions:{width:b,height:E}};de.push(Z),M.current.width=b,M.current.height=E}if(de.length===0)return;const ft=qo({width:M.current.width,prevWidth:Re,height:M.current.height,prevHeight:Ye,invertX:K,invertY:le}),We={...M.current,direction:ft};if((d==null?void 0:d(Q,We))===!1)return;N==null||N(Q,We),Ce(de)}}).on("end",Q=>{const A={id:x,type:"dimensions",resizing:!1};h==null||h(Q,{...M.current}),f.getState().triggerNodeChanges([A])});return V.call(jt),()=>{V.on(".drag",null)}},[x,O,g,c,u,l,p,L,D,N,h]);const Y=O.split("-"),F=s===J.Line?"borderColor":"backgroundColor",se=n?{...i,[F]:n}:i;return S.createElement("div",{className:ct(["react-flow__resize-control","nodrag",...Y,s,r]),ref:C,style:se},a)}var st=y.memo(ts);const os=["top-left","top-right","bottom-left","bottom-right"],ss=["top","right","bottom","left"];function ns({nodeId:t,isVisible:o=!0,handleClassName:s,handleStyle:r,lineClassName:i,lineStyle:a,color:n,minWidth:g=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:l=Number.MAX_VALUE,keepAspectRatio:p=!1,shouldResize:d,onResizeStart:D,onResize:N,onResizeEnd:h}){return o?S.createElement(S.Fragment,null,ss.map(m=>S.createElement(st,{key:m,className:i,style:a,nodeId:t,position:m,variant:J.Line,color:n,minWidth:g,minHeight:c,maxWidth:u,maxHeight:l,onResizeStart:D,keepAspectRatio:p,shouldResize:d,onResize:N,onResizeEnd:h})),os.map(m=>S.createElement(st,{key:m,className:s,style:r,nodeId:t,position:m,color:n,minWidth:g,minHeight:c,maxWidth:u,maxHeight:l,onResizeStart:D,keepAspectRatio:p,shouldResize:d,onResize:N,onResizeEnd:h}))):null}const xt=y.createContext(null),is={showTopics:!0,showStatus:!0,showGateway:!1},rs={keys:[],showGroups:!1,layout:rt.HORIZONTAL},as=({children:t,defaults:o})=>{const[s,r]=y.useState({...is,...o}),[i,a]=y.useState(rs),n=be();return e.jsx(xt.Provider,{value:{options:s,setOptions:r,groups:i,setGroups:a,optionDrawer:n},children:t})},cs=()=>{const t=At();return wt({queryKey:[Lt.LISTENERS],queryFn:()=>t.gatewayEndpoint.getListeners()})},ls=(t,o)=>{switch(o.layout){case rt.HORIZONTAL:default:return t}},re=()=>{const t=y.useContext(xt);if(t===null)throw Error("useEdgeFlowContext must be used within a EdgeFlowContext");return t},ds=()=>{const{t}=T(),o=xe(),{options:s,groups:r}=re(),{data:i,isLoading:a}=Me(),{data:n,isLoading:g}=to(),{data:c,isLoading:u}=eo(),{data:l,isLoading:p}=cs(),[d,D,N]=po([]),[h,m,x]=ho([]),{items:f}=l||{},C=u||p||p||g||a;return y.useEffect(()=>{const j=[],M=[],L=oo(t("branding.appName"));f==null||f.forEach((P,O)=>{const{nodeListener:Y,edgeConnector:F}=so(P,O);s.showGateway&&(j.push(Y),M.push(F))}),n==null||n.forEach((P,O)=>{const{nodeBridge:Y,edgeConnector:F,nodeHost:se,hostConnector:V}=no(P,O,n.length,o);j.push(Y),M.push(F),j.push(se),M.push(V)}),c==null||c.forEach((P,O)=>{var H;const Y=(H=i==null?void 0:i.items)==null?void 0:H.find(K=>K.id===P.type),{nodeAdapter:F,edgeConnector:se,nodeDevice:V,deviceConnector:X}=io(Y,P,O,c.length,o);j.push(F),M.push(se),j.push(V),M.push(X)}),D([L,...ls(j,r)]),m([...M])},[n,c,f,r,D,m,t,s,o,i==null?void 0:i.items,C]),{nodes:d,edges:h,onNodesChange:N,onEdgesChange:x,isLoading:C}},gs=()=>{const{data:t}=yo(),{data:o}=Io(),{data:s}=Me(),{setNodes:r,getNode:i,setEdges:a}=ke(),n=xe();return y.useEffect(()=>{const{items:g}=s||{};if(t!=null&&t.items||o!=null&&o.items){const c=[...(t==null?void 0:t.items)||[],...(o==null?void 0:o.items)||[]];r(u=>ro(u,c)),g&&a(u=>ao(g,u,c,i,n))}},[t,s,o,i,a,r,n]),null};function us(t){return Ot({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 384h272v32H32zM400 384h80v32h-80zM384 447.5c0 17.949-14.327 32.5-32 32.5-17.673 0-32-14.551-32-32.5v-95c0-17.949 14.327-32.5 32-32.5 17.673 0 32 14.551 32 32.5v95z"},child:[]},{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M32 240h80v32H32zM208 240h272v32H208zM192 303.5c0 17.949-14.327 32.5-32 32.5-17.673 0-32-14.551-32-32.5v-95c0-17.949 14.327-32.5 32-32.5 17.673 0 32 14.551 32 32.5v95z"},child:[]}]},{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M32 96h272v32H32zM400 96h80v32h-80zM384 159.5c0 17.949-14.327 32.5-32 32.5-17.673 0-32-14.551-32-32.5v-95c0-17.949 14.327-32.5 32-32.5 17.673 0 32 14.551 32 32.5v95z"},child:[]}]}]})(t)}/* istanbul ignore file -- @preserve */const ps=.5,hs=.2,ms=1.5,ze=t=>t.transform[2]<=ps,xs=t=>({setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom}),Ns=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable}),js=({onInteractiveChange:t})=>{const{t:o}=T(),{optionDrawer:s}=re(),r=dt(),{setMinZoom:i,setMaxZoom:a}=W(xs),{zoomIn:n,zoomOut:g,fitView:c}=ke(),{isInteractive:u}=W(Ns,lt);y.useEffect(()=>{i(hs),a(ms)},[a,i]);const l=()=>{r.setState({nodesDraggable:!u,nodesConnectable:!u,elementsSelectable:!u}),t==null||t(!u)};return e.jsx(Xt,{position:"bottom-left",children:e.jsxs(Ee,{variant:"outline",isAttached:!0,size:"sm",children:[e.jsx(w,{icon:e.jsx(bt,{}),onClick:()=>n(),"aria-label":o("workspace.controls.zoomIn")}),e.jsx(w,{icon:e.jsx(Et,{}),onClick:()=>g(),"aria-label":o("workspace.controls.zoomIOut")}),e.jsx(w,{icon:e.jsx(Ao,{}),onClick:()=>c(),"aria-label":o("workspace.controls.fitView")}),e.jsx(w,{icon:u?e.jsx(Tt,{}):e.jsx(kt,{}),onClick:l,"aria-label":o("workspace.controls.toggleInteractivity")}),e.jsx(w,{icon:e.jsx(us,{}),onClick:()=>s.onOpen(),"aria-label":o("workspace.configuration.header")})]})})},Ms=t=>o=>t.addSelectedNodes(o),Ds=()=>{const{state:t,pathname:o}=St(),s=ee(),r=W(Ms),{nodes:i}=te(),{fitView:a}=ke();return y.useEffect(()=>{const{adapterId:n,type:g,command:c}=(t==null?void 0:t.selectedAdapter)||{};if(!n||!g)return;const u=l=>{r(l),a({nodes:l.map(p=>({id:p})),duration:750}),s(o,{state:null,replace:!0})};switch(c){case Ie.TOPIC_FILTERS:{const l=i.find(p=>p.type===I.EDGE_NODE);l&&u([l.id]);return}case Ie.TAGS:{const l=i.find(p=>n===p.data.id);if((l==null?void 0:l.type)===I.ADAPTER_NODE){const p=i.find(d=>d.type===I.DEVICE_NODE&&n===d.data.sourceAdapterId);p&&u([p.id])}return}case Ie.MAPPINGS:{const l=i.find(p=>n===p.data.id);l&&u([l.id]);return}default:{const l=i.find(p=>n===p.data.id);if(l){const p=[];if(p.push(l.id),l.type===I.ADAPTER_NODE){const d=i.find(D=>D.type===I.DEVICE_NODE&&n===D.data.sourceAdapterId);d&&p.push(d.id)}u(p)}return}}},[r,a,s,i,o,t==null?void 0:t.selectedAdapter]),null},nt=2,Cs=({policyRoutes:t,style:o,onClickPolicy:s,onClickAll:r})=>{const{t:i}=T(),{colorMode:a}=Te(),n=t.slice(0,nt),g=t.length-nt;return t.length===0?null:e.jsxs(Ee,{isAttached:!0,"data-testid":"reactFlow-edge-policy-group",children:[n.map(c=>e.jsx(w,{"data-testid":"policy-panel-trigger","aria-label":i("workspace.datahub.aria-label"),variant:a==="light"?"outline":"solid",icon:e.jsx(B,{as:zt,boxSize:6}),backgroundColor:a==="light"?"white":"gray.700",color:o==null?void 0:o.stroke,onClick:()=>s==null?void 0:s(c),borderRadius:25},c)),g>0&&e.jsx(w,{"data-testid":"policy-panel-list","aria-label":i("workspace.datahub.list"),variant:a==="light"?"outline":"solid",icon:e.jsxs(U,{children:["+",g]}),backgroundColor:a==="light"?"white":"gray.700",color:o==null?void 0:o.stroke,onClick:r,borderRadius:25})]})},fs=({source:t,style:o,onClick:s})=>{const{t:r}=T(),{colorMode:i}=Te();return e.jsx(Ee,{children:e.jsx(w,{"data-testid":"observability-panel-trigger","aria-label":r("workspace.observability.aria-label",{device:t}),variant:i==="light"?"outline":"solid",icon:e.jsx(B,{as:wo,boxSize:6}),backgroundColor:i==="light"?"white":"gray.700",color:o==null?void 0:o.stroke,onClick:s,borderRadius:25})})},ys=t=>{var u;const o=vt(Pt.id.DATA_HUB),{isLoading:s,data:r,isError:i}=To(),{nodes:a}=te(),{data:n}=Me();if(!o||s||i)return;const g=a.find(l=>l.id===t);if(!g)return[];if(g.type===I.BRIDGE_NODE){const l=g.data,{remote:p}=ut(l),d=p.map(D=>D.topic);return(u=r==null?void 0:r.items)==null?void 0:u.filter(D=>d.some(N=>qe(D.matching.topicFilter,N)))}const c=l=>{var D,N;const p=(D=n==null?void 0:n.items)==null?void 0:D.find(h=>h.id===l.data.type);if(!p)return;const d=Eo(p,l.data.config);return(N=r==null?void 0:r.items)==null?void 0:N.filter(h=>d.some(m=>qe(h.matching.topicFilter,m)))};if(g.type===I.ADAPTER_NODE)return c(g);if(g.type===I.CLUSTER_NODE){const p=g.data.childrenNodeIds.reduce((d,D)=>{const N=a.find(h=>h.id===D);if(N){const h=c(N);h&&d.push(...h)}return d},[]);return Array.from(new Set(p))}return[]},Is=t=>{const{id:o,source:s,sourceX:r,sourceY:i,sourcePosition:a,targetX:n,targetY:g,targetPosition:c,markerEnd:u,style:l}=t,[p,d,D]=mo({sourceX:r,sourceY:i,sourcePosition:a,targetX:n,targetY:g,targetPosition:c}),N=ys(s),h=ee(),m=y.useMemo(()=>{if(N)return N.map(j=>`/datahub/${ko.DATA_POLICY}/${j.id}`)},[N]),x=()=>{h(`/workspace/link/${o}`)},f=j=>{h(j)},C=()=>{h("/datahub")};return e.jsxs(e.Fragment,{children:[e.jsx(xo,{path:p,markerEnd:u,style:l}),e.jsx(No,{children:e.jsxs(R,{sx:{position:"absolute",transform:`translate(-50%, -50%) translate(${d}px,${D}px)`,pointerEvents:"all"},className:"nodrag nopan",children:[e.jsx(fs,{source:s,style:l,onClick:x}),m&&e.jsx(Cs,{"data-testid":"policy-panel-trigger",style:l,policyRoutes:m,onClickPolicy:f,onClickAll:C})]})})]})},ae=(t,o,s)=>{const r=ee(),i=jo(["Meta+Enter","Shift+Enter"],{target:document.querySelector(`[data-id="${t}"]`)});return y.useEffect(()=>{o&&i&&r(`${s}/${t}`)},[t,r,s,o,i]),{onContextMenu:n=>{o&&(r(`${s}/${t}`),n.preventDefault())}}},he=20,it=24,As=t=>{const o=Mo(t.filter(s=>s!==void 0));return{x:o.x-he,y:o.y-he-it,width:o.width+2*he,height:o.height+2*he+it}},ce=({id:t,title:o,onOpenPanel:s,children:r,hasNoOverview:i=!1,dragging:a})=>{const{t:n}=T(),{onInsertGroupNode:g,nodes:c,edges:u}=te(),l=xe(),p=c.filter(h=>h.selected),d=y.useMemo(()=>{const h=p.filter(x=>x.type===I.ADAPTER_NODE&&!x.parentId&&!x.parentNode),m=h.reduce((x,f)=>{const[C]=Le[f.type];if(!C)return x;const M=gt(f,c,u).find(L=>L.type===C);return M&&x.push(M),x},[]);return h.length>=2?[...h,...m]:void 0},[u,c,p]),D=()=>{if(!d)return;const h=`${pe.GROUP_NODE}@${d.map(M=>M.data.id).join("+")}`,m=n("workspace.grouping.untitled"),x=As(d),f={id:h,type:I.CLUSTER_NODE,data:{childrenNodeIds:d.map(M=>M.id),title:m,isOpen:!0,colorScheme:"red"},style:{width:x.width,height:x.height},position:{x:x.x,y:x.y}},C={runtime:d.every(M=>{var L;return((L=M.data.status)==null?void 0:L.runtime)===$.runtime.STARTED})?$.runtime.STARTED:$.runtime.STOPPED,connection:d.every(M=>{var L;return((L=M.data.status)==null?void 0:L.connection)===$.connection.CONNECTED})?$.connection.CONNECTED:$.connection.DISCONNECTED},j={id:`${pe.CONNECTOR}-${pe.EDGE_NODE}-${h}`,target:pe.EDGE_NODE,targetHandle:"Top",source:h,hidden:!0,focusable:!1,type:at.REPORT_EDGE,markerEnd:{type:Do.ArrowClosed,width:20,height:20,color:Ke(l,C)},animated:C.connection===$.connection.CONNECTED,style:{strokeWidth:1.5,stroke:Ke(l,C)}};g(f,j,x)},[N]=p;return e.jsxs(Kt,{isVisible:(N==null?void 0:N.id)===t&&!a,position:k.Top,"aria-label":n("workspace.toolbar.container.label"),children:[e.jsx(U,{"data-testid":"toolbar-title",children:o||t}),r&&e.jsxs(e.Fragment,{children:[e.jsx(Ae,{orientation:"vertical"}),r]}),e.jsx(Ae,{orientation:"vertical"}),e.jsx(q,{children:e.jsx(w,{isDisabled:!d,"data-testid":"node-group-toolbar-group",icon:e.jsx(So,{}),"aria-label":n("workspace.toolbar.command.group"),onClick:D})}),!i&&e.jsxs(e.Fragment,{children:[e.jsx(Ae,{orientation:"vertical"}),e.jsx(q,{children:e.jsx(w,{"data-testid":"node-group-toolbar-panel",icon:e.jsx(Lo,{}),"aria-label":n("workspace.toolbar.command.overview"),onClick:s})})]})]})},ws=({id:t,data:o,selected:s,...r})=>{const{t:i}=T(),{colors:a}=xe(),{onToggleGroup:n,onNodesChange:g,onEdgesChange:c,nodes:u,edges:l}=te(),{isOpen:p,onOpen:d,onClose:D}=be(),{onContextMenu:N}=ae(t,s,"/workspace/group"),{colorMode:h}=Te(),m=h==="light",x=()=>{d()},f=()=>{o.isOpen=!o.isOpen,n({id:t,data:o},o.isOpen)},C=()=>{n({id:t,data:o},!0),g(u.map(j=>o.childrenNodeIds.includes(j.id)?{item:{...j,parentNode:void 0,position:{x:j.position.x+r.xPos,y:j.position.y+r.yPos}},type:"reset"}:{item:j,type:"reset"})),g([{id:t,type:"remove"}]),c(l.filter(j=>j.source===t).map(j=>({id:j.id,type:"remove"})))};return e.jsxs(e.Fragment,{children:[e.jsx(ce,{id:t,title:o.title,dragging:r.dragging,onOpenPanel:N,children:e.jsxs(q,{isAttached:!1,children:[e.jsx(w,{"data-testid":"node-group-toolbar-expand",icon:e.jsx(B,{as:o.isOpen?Oo:bo,boxSize:5}),"aria-label":o.isOpen?i("workspace.grouping.command.collapse"):i("workspace.grouping.command.expand"),onClick:f}),e.jsx(w,{"data-testid":"node-group-toolbar-ungroup",icon:e.jsx(B,{as:zo,boxSize:5}),"aria-label":i("workspace.grouping.command.ungroup"),onClick:x})]})}),s&&e.jsx(ns,{isVisible:!0,minWidth:180,minHeight:100,handleStyle:{width:"8px",height:"8px",backgroundColor:"transparent",borderColor:"gray"},lineStyle:{borderWidth:5,borderColor:"transparent"}}),e.jsx(_,{id:`node-group-${t}`,w:"100%",h:"100%",backgroundColor:o.isOpen?void 0:o.colorScheme?a[o.colorScheme][m?50:900]:a.red[50],borderColor:o.colorScheme?a[o.colorScheme][500]:a.red[50],borderWidth:1,borderStyle:"solid",onDoubleClick:N,onContextMenu:N,"data-groupopen":o.isOpen,children:e.jsx(U,{m:2,colorScheme:"black",children:o.title})}),e.jsx(z,{type:"source",position:k.Bottom,id:"a",isConnectable:!1}),e.jsx(pt,{isOpen:p,onClose:D,onSubmit:C,message:i("workspace.grouping.modal.description"),header:i("workspace.grouping.modal.title")})]})},oe=({children:t,isSelected:o=!1,...s})=>{const r={boxShadow:"var(--chakra-shadows-outline)"};return e.jsx(Bt,{variant:"elevated",...o?{...r}:{},p:6,rounded:"md",borderWidth:1,...s,children:t})},we=2,ie=({destinations:t,isTag:o=!1})=>{const s=o?Qo:Go;return e.jsxs(R,{spacing:"4","data-testid":"topics-container",children:[e.jsx(Ne,{alignItems:"flex-start",children:t.slice(0,we).map((r,i)=>e.jsx(s,{tagTitle:r},`local-${i}`))}),t.length>we&&e.jsx(_o,{size:"sm","data-testid":"topics-show-more",children:e.jsxs(Ro,{children:["+",t.length-we]})})]})},Ls=({id:t,data:o,selected:s,dragging:r})=>{var x;const{t:i}=T(),{data:a}=Me(),n=(x=a==null?void 0:a.items)==null?void 0:x.find(f=>f.id===o.type),{options:g}=re(),{data:c}=Po(o.id),{data:u}=Bo(o.id),l=y.useMemo(()=>{var f;return((f=c==null?void 0:c.items)==null?void 0:f.map(C=>C.topic))||[]},[c==null?void 0:c.items]),p=y.useMemo(()=>{var C;return(((C=u==null?void 0:u.items)==null?void 0:C.map(j=>j.topicFilter))||[]).filter(j=>j)},[u==null?void 0:u.items]),{onContextMenu:d}=ae(t,s,`/workspace/node/adapter/${o.type}`),D=ee(),N=W(ze),h=Uo(n),m=`/workspace/node/adapter/${o.type}/${t}`;return e.jsxs(e.Fragment,{children:[e.jsx(ce,{id:t,title:o.id,dragging:r,onOpenPanel:d,children:e.jsxs(q,{children:[e.jsx(w,{icon:e.jsx(B,{as:Oe.READ}),"aria-label":i("workspace.toolbar.command.mappings.northbound"),onClick:()=>D(`${m}/northbound`)}),h&&e.jsx(w,{icon:e.jsx(B,{as:Oe.WRITE}),"aria-label":i("workspace.toolbar.command.mappings.southbound"),onClick:()=>D(`${m}/southbound`)})]})}),e.jsxs(oe,{isSelected:s,onDoubleClick:d,onContextMenu:d,w:De,p:2,children:[!N&&e.jsxs(Ne,{children:[h&&e.jsx(ie,{destinations:p}),e.jsxs(R,{children:[e.jsx(je,{"aria-label":o.type,boxSize:"20px",objectFit:"scale-down",src:n==null?void 0:n.logoUrl}),e.jsx(U,{flex:1,"data-testid":"adapter-node-name",children:o.id})]}),g.showStatus&&e.jsx(_,{flex:1,children:e.jsx(me,{status:o.status})}),g.showTopics&&e.jsx(ie,{destinations:l})]}),N&&e.jsxs(R,{px:6,my:"4",children:[e.jsx(_,{children:e.jsx(me,{status:o.status,skeleton:!0})}),e.jsx(_,{w:"100%",children:e.jsx(Se,{noOfLines:l.length?2:1,spacing:"4",skeletonHeight:"2",startColor:"gray.500",endColor:"gray.500","aria-label":o.id})})]})]}),e.jsx(z,{type:"source",position:k.Bottom,id:"Bottom",isConnectable:!1}),e.jsx(z,{type:"source",position:k.Top,id:"Top",isConnectable:!1})]})},Os="/app/assets/05-icon-hivemq-bridge-extension-Ceg2dK79.svg",bs=({id:t,selected:o,data:s,dragging:r})=>{const{t:i}=T(),a=ut(s),{options:n}=re(),{onContextMenu:g}=ae(t,o,"/workspace/node/bridge"),c=W(ze);return e.jsxs(e.Fragment,{children:[e.jsx(ce,{id:t,title:s.id,dragging:r,onOpenPanel:g}),e.jsxs(oe,{isSelected:o,onDoubleClick:g,onContextMenu:g,p:3,w:De,children:[!c&&e.jsxs(Ne,{children:[n.showTopics&&e.jsx(ie,{destinations:a.remote.map(u=>u.topic)}),e.jsxs(R,{children:[e.jsx(je,{boxSize:"20px",objectFit:"scale-down",src:Os,alt:i("workspace.node.bridge")}),e.jsx(U,{flex:1,"data-testid":"bridge-node-name",children:s.id})]}),n.showStatus&&e.jsx(_,{flex:1,children:e.jsx(me,{status:s.status})}),n.showTopics&&e.jsx(ie,{destinations:a.local.map(u=>u.topic)})]}),c&&e.jsxs(R,{px:6,my:"4",children:[e.jsx(_,{children:e.jsx(me,{status:s.status,skeleton:!0})}),e.jsx(_,{w:"100%",children:e.jsx(Se,{noOfLines:[...a.local,...a.remote].length?2:1,spacing:"4",skeletonHeight:"2",startColor:"gray.500",endColor:"gray.500","aria-label":s.id})})]})]}),e.jsx(z,{type:"source",position:k.Top,id:"Top",isConnectable:!1}),e.jsx(z,{type:"source",position:k.Bottom,id:"Bottom",isConnectable:!1})]})},Es=t=>{const{t:o}=T(),{onContextMenu:s}=ae(t.id,t.selected,"/workspace/edge"),r=ee();return e.jsxs(e.Fragment,{children:[e.jsx(ce,{id:t.id,title:o("branding.appName"),dragging:t.dragging,onOpenPanel:s,children:e.jsx(q,{children:e.jsx(w,{icon:e.jsx(B,{as:Ut}),"aria-label":o("workspace.toolbar.command.edge.topicFilter"),onClick:()=>r("topic-filters/")})})}),e.jsxs(oe,{isSelected:t.selected,onDoubleClick:s,onContextMenu:s,variant:"unstyled",borderWidth:0,px:2,py:0,children:[e.jsx(je,{"data-testid":"edge-node",src:vo,alt:o("workspace.node.edge"),boxSize:"96px"}),e.jsx(z,{type:"target",position:k.Bottom,id:"Bottom",isConnectable:!1,style:{bottom:"-3px",minWidth:0,minHeight:0,width:0,height:0}}),e.jsx(z,{type:"target",position:k.Top,id:"Top",isConnectable:!1,style:{top:"-3px",minWidth:0,minHeight:0,width:0,height:0}}),e.jsx(z,{type:"source",position:k.Left,id:"SRight",isConnectable:!1,style:{top:"60%",left:"-3px",minWidth:0,minHeight:0,width:0,height:0}}),e.jsx(z,{type:"target",position:k.Right,id:"clientHandle",isConnectable:!1,style:{top:"60%",right:"-3px",minWidth:0,minHeight:0,width:0,height:0}})]})]})},Ts="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNIDk1LjQ1OCA1NC40NTQgQyA5Ny45MTkgNTEuOTk1IDk3LjkxOSA0OC4wMDUgOTUuNDU4IDQ1LjU0NiBMIDc3LjIzIDI3LjMxOCBMIDg2LjM2NyAxOC4zIEMgOTEuMDc4IDE5LjQ2OCA5NS4yODcgMTUuMDk3IDkzLjk0MiAxMC40MzMgQyA5Mi41OTcgNS43NjggODYuNzA4IDQuMzA5IDgzLjM0MSA3LjgwNiBDIDgxLjc3NyA5LjQzIDgxLjIgMTEuNzY1IDgxLjgyNiAxMy45MyBMIDcyLjc3NSAyMi44NjIgTCA1NC41MDggNC41OTYgQyA1Mi4wNDkgMi4xMzUgNDguMDU5IDIuMTM1IDQ1LjYgNC41OTYgTCAyNy4zNzIgMjIuODI0IEwgMTguMzU1IDEzLjY4NiBDIDE5LjUyMiA4Ljk3NCAxNS4xNSA0Ljc2NSAxMC40ODUgNi4xMTEgQyA1LjgyMSA3LjQ1NyA0LjM2MyAxMy4zNDcgNy44NiAxNi43MTQgQyA5LjQ4NSAxOC4yNzcgMTEuODIgMTguODU1IDEzLjk4NyAxOC4yMjggTCAyMi45MTcgMjcuMjc5IEwgNC42NSA0NS41NDYgQyAyLjE4OSA0OC4wMDUgMi4xODkgNTEuOTk1IDQuNjUgNTQuNDU0IEwgMjIuOTE2IDcyLjcyMSBMIDEzLjk4NyA4MS43NzIgQyA5LjMzMSA4MC40MzIgNC45NzEgODQuNjMzIDYuMTM4IDg5LjMzNSBDIDcuMzA1IDk0LjAzNyAxMy4xMjQgOTUuNzEyIDE2LjYxMiA5Mi4zNTEgQyAxOC4yMjggOTAuNzkzIDE4Ljg5MiA4OC40OTMgMTguMzU2IDg2LjMxNCBMIDI3LjM3MiA3Ny4xNzYgTCA0NS42IDk1LjQwNCBDIDQ4LjA2IDk3Ljg2NSA1Mi4wNDkgOTcuODY1IDU0LjUwOSA5NS40MDQgTCA3Mi43NzUgNzcuMTM4IEwgODEuODI2IDg2LjA3IEMgODAuNDg2IDkwLjcyNiA4NC42ODkgOTUuMDg2IDg5LjM5MSA5My45MTkgQyA5NC4wOTMgOTIuNzUyIDk1Ljc2OCA4Ni45MzIgOTIuNDA2IDgzLjQ0MyBDIDkwLjg0OCA4MS44MjcgODguNTQ3IDgxLjE2MiA4Ni4zNjcgODEuNyBMIDc3LjIzIDcyLjY4MiBMIDk1LjQ1OCA1NC40NTQgWiBNIDUwLjA1NCA5MC45NSBMIDkuMTA0IDUwIEwgNTAuMDU0IDkuMDUgTCA5MS4wMDQgNTAgTCA1MC4wNTQgOTAuOTUgWiIgc3R5bGU9InRyYW5zZm9ybS1ib3g6IGZpbGwtYm94OyB0cmFuc2Zvcm0tb3JpZ2luOiA1MCUgNTAlOyIvPgogICAgPHRleHQgZm9udC1mYW1pbHk9IlJvYm90byBNb25vLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjMwIiBmb250LXdlaWdodD0iNzAwIiB4PSIyMC4yOTYiIHk9IjYyLjgzNCI+VENQPC90ZXh0Pgo8L3N2Zz4K",ks="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgd2lkdGg9IjEwMCIgaGVpZ2h0PSIxMDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aCBkPSJNIDk1LjQ1OCA1NC40NTQgQyA5Ny45MTkgNTEuOTk1IDk3LjkxOSA0OC4wMDUgOTUuNDU4IDQ1LjU0NiBMIDc3LjIzIDI3LjMxOCBMIDg2LjM2NyAxOC4zIEMgOTEuMDc4IDE5LjQ2OCA5NS4yODcgMTUuMDk3IDkzLjk0MiAxMC40MzMgQyA5Mi41OTcgNS43NjggODYuNzA4IDQuMzA5IDgzLjM0MSA3LjgwNiBDIDgxLjc3NyA5LjQzIDgxLjIgMTEuNzY1IDgxLjgyNiAxMy45MyBMIDcyLjc3NSAyMi44NjIgTCA1NC41MDggNC41OTYgQyA1Mi4wNDkgMi4xMzUgNDguMDU5IDIuMTM1IDQ1LjYgNC41OTYgTCAyNy4zNzIgMjIuODI0IEwgMTguMzU1IDEzLjY4NiBDIDE5LjUyMiA4Ljk3NCAxNS4xNSA0Ljc2NSAxMC40ODUgNi4xMTEgQyA1LjgyMSA3LjQ1NyA0LjM2MyAxMy4zNDcgNy44NiAxNi43MTQgQyA5LjQ4NSAxOC4yNzcgMTEuODIgMTguODU1IDEzLjk4NyAxOC4yMjggTCAyMi45MTcgMjcuMjc5IEwgNC42NSA0NS41NDYgQyAyLjE4OSA0OC4wMDUgMi4xODkgNTEuOTk1IDQuNjUgNTQuNDU0IEwgMjIuOTE2IDcyLjcyMSBMIDEzLjk4NyA4MS43NzIgQyA5LjMzMSA4MC40MzIgNC45NzEgODQuNjMzIDYuMTM4IDg5LjMzNSBDIDcuMzA1IDk0LjAzNyAxMy4xMjQgOTUuNzEyIDE2LjYxMiA5Mi4zNTEgQyAxOC4yMjggOTAuNzkzIDE4Ljg5MiA4OC40OTMgMTguMzU2IDg2LjMxNCBMIDI3LjM3MiA3Ny4xNzYgTCA0NS42IDk1LjQwNCBDIDQ4LjA2IDk3Ljg2NSA1Mi4wNDkgOTcuODY1IDU0LjUwOSA5NS40MDQgTCA3Mi43NzUgNzcuMTM4IEwgODEuODI2IDg2LjA3IEMgODAuNDg2IDkwLjcyNiA4NC42ODkgOTUuMDg2IDg5LjM5MSA5My45MTkgQyA5NC4wOTMgOTIuNzUyIDk1Ljc2OCA4Ni45MzIgOTIuNDA2IDgzLjQ0MyBDIDkwLjg0OCA4MS44MjcgODguNTQ3IDgxLjE2MiA4Ni4zNjcgODEuNyBMIDc3LjIzIDcyLjY4MiBMIDk1LjQ1OCA1NC40NTQgWiBNIDUwLjA1NCA5MC45NSBMIDkuMTA0IDUwIEwgNTAuMDU0IDkuMDUgTCA5MS4wMDQgNTAgTCA1MC4wNTQgOTAuOTUgWiIgc3R5bGU9InRyYW5zZm9ybS1ib3g6IGZpbGwtYm94OyB0cmFuc2Zvcm0tb3JpZ2luOiA1MCUgNTAlOyIvPgogICAgPHRleHQgZm9udC1mYW1pbHk9IlJvYm90byBNb25vLCBzYW5zLXNlcmlmIiBmb250LXNpemU9IjMwIiBmb250LXdlaWdodD0iNzAwIiB4PSIyMC4yOTYiIHk9IjYyLjgzNCI+VURQPC90ZXh0Pgo8L3N2Zz4K",Ss="data:image/svg+xml,%3csvg%20viewBox='0%200%20100%20100'%20width='100'%20height='100'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M%2095.458%2054.454%20C%2097.919%2051.995%2097.919%2048.005%2095.458%2045.546%20L%2077.23%2027.318%20L%2086.367%2018.3%20C%2091.078%2019.468%2095.287%2015.097%2093.942%2010.433%20C%2092.597%205.768%2086.708%204.309%2083.341%207.806%20C%2081.777%209.43%2081.2%2011.765%2081.826%2013.93%20L%2072.775%2022.862%20L%2054.508%204.596%20C%2052.049%202.135%2048.059%202.135%2045.6%204.596%20L%2027.372%2022.824%20L%2018.355%2013.686%20C%2019.522%208.974%2015.15%204.765%2010.485%206.111%20C%205.821%207.457%204.363%2013.347%207.86%2016.714%20C%209.485%2018.277%2011.82%2018.855%2013.987%2018.228%20L%2022.917%2027.279%20L%204.65%2045.546%20C%202.189%2048.005%202.189%2051.995%204.65%2054.454%20L%2022.916%2072.721%20L%2013.987%2081.772%20C%209.331%2080.432%204.971%2084.633%206.138%2089.335%20C%207.305%2094.037%2013.124%2095.712%2016.612%2092.351%20C%2018.228%2090.793%2018.892%2088.493%2018.356%2086.314%20L%2027.372%2077.176%20L%2045.6%2095.404%20C%2048.06%2097.865%2052.049%2097.865%2054.509%2095.404%20L%2072.775%2077.138%20L%2081.826%2086.07%20C%2080.486%2090.726%2084.689%2095.086%2089.391%2093.919%20C%2094.093%2092.752%2095.768%2086.932%2092.406%2083.443%20C%2090.848%2081.827%2088.547%2081.162%2086.367%2081.7%20L%2077.23%2072.682%20L%2095.458%2054.454%20Z%20M%2050.054%2090.95%20L%209.104%2050%20L%2050.054%209.05%20L%2091.004%2050%20L%2050.054%2090.95%20Z'%20style='transform-box:%20fill-box;%20transform-origin:%2050%25%2050%25;'/%3e%3c/svg%3e",zs=({selected:t,data:o})=>{const{t:s}=T(),r=()=>o.transport===Ve.transport.TCP?Ts:o.transport===Ve.transport.UDP?ks:Ss;return e.jsxs(e.Fragment,{children:[e.jsx(oe,{isSelected:t,p:2,borderRadius:60,backgroundColor:t?"#dddfe2":"white",alignContent:"center",sx:{_dark:{backgroundColor:t?"#dddfe2":"lightslategrey"}},children:e.jsx(je,{src:r(),alt:s("workspace.node.gateway"),boxSize:"48px"})}),e.jsx(z,{type:"target",position:k.Right,id:"Listeners",isConnectable:!1})]})},vs=({selected:t,data:o})=>{const{label:s}=o;return e.jsxs(e.Fragment,{children:[e.jsx(oe,{isSelected:t,wordBreak:"break-word",textAlign:"center",p:3,w:De,borderBottomRadius:30,children:e.jsx(U,{pb:5,children:s})}),e.jsx(z,{type:"target",position:k.Top,isConnectable:!1})]})},Ps=({id:t,selected:o,data:s,dragging:r})=>{const{t:i}=T(),{onContextMenu:a}=ae(t,o,"/workspace/node"),{category:n,capabilities:g}=s,c=W(ze),{data:u}=Ho(s.sourceAdapterId),l=y.useMemo(()=>{var p;return((p=u==null?void 0:u.items)==null?void 0:p.map(d=>d.name))||[]},[u==null?void 0:u.items]);return e.jsxs(e.Fragment,{children:[e.jsx(ce,{id:t,title:s.protocol,onOpenPanel:a,dragging:r,hasNoOverview:!0,children:e.jsx(q,{children:e.jsx(w,{icon:e.jsx(Qt,{}),"aria-label":i("workspace.toolbar.command.device.metadata"),onClick:a})})}),e.jsx(oe,{isSelected:o,wordBreak:"break-word",textAlign:"center",p:3,w:De,borderTopRadius:30,children:e.jsxs(Ne,{children:[!c&&e.jsxs(e.Fragment,{children:[e.jsx(R,{w:"100%",justifyContent:"flex-end",gap:1,"data-testid":"device-capabilities",children:g==null?void 0:g.map(p=>e.jsx(B,{boxSize:4,as:Oe[p],"data-type":p},p))}),e.jsxs(R,{w:"100%","data-testid":"device-description",children:[e.jsx(B,{as:et[(n==null?void 0:n.name)||tt.SIMULATION],"data-type":n==null?void 0:n.name}),e.jsx(U,{children:s.protocol})]}),e.jsx(ie,{destinations:l,isTag:!0})]}),c&&e.jsx(B,{as:et[(n==null?void 0:n.name)||tt.SIMULATION],"data-type":n==null?void 0:n.name,boxSize:"14"})]})}),e.jsx(z,{type:"target",position:k.Bottom,isConnectable:!1})]})},Nt=()=>{const{t}=T(),{nodes:o,edges:s}=ds(),r=y.useMemo(()=>({[I.CLUSTER_NODE]:ws,[I.EDGE_NODE]:Es,[I.ADAPTER_NODE]:Ls,[I.BRIDGE_NODE]:bs,[I.LISTENER_NODE]:zs,[I.HOST_NODE]:vs,[I.DEVICE_NODE]:Ps}),[]),{nodes:i,edges:a,onNodesChange:n,onEdgesChange:g,onAddNodes:c,onAddEdges:u}=te();y.useEffect(()=>{o.length&&c(o.map(d=>({item:d,type:"add"}))),s.length&&u(s.map(d=>({item:d,type:"add"})))},[s,o,u,c]);const l=y.useMemo(()=>({[at.REPORT_EDGE]:Is}),[]),p=y.useCallback((d,D,N)=>{const h=N.filter(m=>Object.keys(Le).includes(m.type));for(const m of h){const[x,f,C]=Le[m.type];if(!x)continue;const M=(C==="target"?gt(m,i,a):Co(m,i,a)).find(P=>P.type===x);if(!M)continue;const L={id:M.id,type:"position",position:{x:m.position.x,y:m.position.y+f}};n([L])}},[a,i,n]);return e.jsxs(fo,{id:"edge-workspace-canvas",nodes:i,edges:a,nodeTypes:r,edgeTypes:l,onNodesChange:n,onEdgesChange:g,onNodeDrag:p,fitView:!0,snapToGrid:!0,nodesConnectable:!1,deleteKeyCode:null,proOptions:Jt,role:"region","aria-label":t("workspace.canvas.aria-label"),children:[e.jsxs(_,{role:"toolbar","aria-label":t("workspace.controls.aria-label"),"aria-controls":"edge-workspace-canvas",children:[e.jsx(Ds,{}),e.jsx(gs,{}),e.jsx(Jo,{}),e.jsx(js,{}),e.jsx(qt,{zoomable:!0,pannable:!0,nodeClassName:d=>d.type||"",nodeComponent:d=>d.className===I.EDGE_NODE?e.jsx("circle",{cx:d.x,cy:d.y,r:"50",fill:"#ffc000"}):d.className===I.DEVICE_NODE||d.className===I.HOST_NODE?null:e.jsx("rect",{x:d.x,y:d.y,width:d.width,height:d.height,fill:"#e2e2e2"})})]}),e.jsx(Gt,{})]})};Nt.propTypes={};const Bs=()=>{const{t}=T(),{optionDrawer:o}=re(),{reset:s}=te(),{isOpen:r,onOpen:i,onClose:a}=be(),n=ee(),g=()=>{s(),n("/")};return e.jsxs(_t,{isOpen:o.isOpen||!1,placement:"right",size:"md",onClose:o.onClose,children:[e.jsx(Rt,{}),e.jsxs(Yt,{children:[e.jsx(Ft,{}),e.jsx(Ht,{children:t("workspace.configuration.header")}),e.jsx(Zt,{children:e.jsxs(Xe,{as:"fieldset",children:[e.jsx($t,{as:"legend",children:t("workspace.configuration.reset.legend")}),e.jsx(U,{children:t("workspace.configuration.reset.prompt")}),e.jsx(Xe,{m:4,children:e.jsx(Wt,{variant:"danger",onClick:i,children:t("workspace.configuration.reset.action")})}),e.jsx(U,{children:t("workspace.configuration.reset.warning")})]})})]}),e.jsx(pt,{isOpen:r,onClose:a,onSubmit:g,message:t("workspace.configuration.reset.modal.description"),header:t("workspace.configuration.reset.legend"),action:t("workspace.configuration.reset.action")})]})},yn=()=>{const{t}=T();return e.jsx(Vt,{title:t("welcome.title"),subtitle:t("welcome.description"),children:e.jsxs(as,{children:[e.jsx(Nt,{}),e.jsx(Bs,{})]})})};export{yn as default};
//# sourceMappingURL=EdgeFlowPage-BTab5fSP.js.map
