import{u as f,j as r,ap as A,aq as I,n as w,ar as S,T as x,as as D,a3 as R,at as E,B as m,i as T,a as P,b as B,h as N,r as h,D as M,p as _,q as v,s as U,v as $,C as z,x as H}from"./index-cMih3SEP.js";import{u as q}from"./useDataHubDraftStore-BdIk6zJn.js";import{P as j}from"./types-CNm55BG_.js";import{A as F,a as L,b as G,c as O,d as V}from"./chunk-CRBMUVJA-BlVng4Ax.js";import{u as W,T as J,A as K}from"./ToolbarPublish-BkVj8TgZ.js";import{e as Q}from"./index-Dis5-5gm.js";import{C as X}from"./chunk-2EW3JUUD-iAZ0BXIz.js";import{C as Y}from"./chunk-FHHZMTWR-BZ2wKB7t.js";import"./index-UJo6opCj.js";import"./vanilla-Dd4Maacd.js";import"./middleware-DWkoLS6u.js";import"./chunk-OCNORRQU-qVjYAyQ7.js";import"./index-C23MLgnh.js";import"./utils-Da84xa3e.js";import"./usePolicyGuards-DliXcvYq.js";import"./index-BXWYaCHO.js";import"./without-BTTCd72_.js";import"./index-BTlOwmq4.js";import"./toast.utils-DGAijIrh.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new e.Error().stack;o&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[o]="97a4ac52-4b41-4c6f-aa3a-999dc53a4785",e._sentryDebugIdIdentifier="sentry-dbid-97a4ac52-4b41-4c6f-aa3a-999dc53a4785")}catch{}})();const Z=({status:e})=>{const{t:o}=f("datahub"),s=e===j.SUCCESS?"success":e===j.FAILURE?"warning":"error";return r.jsxs(A,{status:s,"data-testid":"toolbox-policy-check-status",children:[r.jsx(I,{}),r.jsxs(w,{whiteSpace:"normal",children:[r.jsx(S,{children:r.jsx(x,{as:"span",children:o("workspace.dryRun.report.success.title",{context:s})})}),r.jsx(D,{children:r.jsx(x,{as:"span",children:o("workspace.dryRun.report.success.description",{context:s})})})]})]})},rr=({errors:e,onFitView:o,onOpenConfig:s})=>{const{t:a}=f("datahub");return r.jsx(F,{allowMultiple:!0,children:e.map((c,d)=>{const{id:l,title:u,detail:p}=c,i=c.id;return r.jsxs(L,{borderColor:"blackAlpha.500",children:[r.jsx("h2",{children:r.jsxs(G,{children:[r.jsx(w,{as:"span",flex:"1",textAlign:"left",children:a("workspace.nodes.type",{context:u})}),r.jsx(O,{})]})}),r.jsx(V,{pb:4,children:r.jsxs(R,{alignItems:"flex-start",children:[r.jsx(x,{whiteSpace:"normal",children:p}),r.jsxs(E,{alignItems:"flex-start",size:"sm",children:[r.jsx(m,{onClick:()=>o==null?void 0:o(i),"data-testid":"report-error-fitView",children:a("workspace.dryRun.report.cta.highlight")}),r.jsx(m,{onClick:()=>s==null?void 0:s(i),"data-testid":"report-error-config",children:a("workspace.dryRun.report.cta.config")})]})]})})]},`${l}-item${d}`)})})},wr=()=>{const{t:e}=f("datahub"),{policyType:o}=T(),{state:s}=P(),a=B(),{isOpen:c,onOpen:d,onClose:l}=N(),{fitView:u}=Q(),{nodes:p}=q(),{status:i,getErrors:C}=W(),y=h.useCallback(t=>p.find(n=>n.id===t),[p]);h.useEffect(()=>{o&&d()},[d,o]);const b=h.useCallback(()=>{l(),a((s==null?void 0:s.origin)||"/datahub")},[l,a,s==null?void 0:s.origin]),g=t=>{u({nodes:[t],padding:3,duration:K.FIT_VIEW_DURATION_MS})},k=t=>{a(`../node/${t.type}/${t.id}`,{state:{origin:s==null?void 0:s.origin}})};return r.jsx(M,{size:"sm",isOpen:c,placement:"right",onClose:b,children:r.jsxs(_,{"data-testid":"policy-validity-report","aria-label":e("workspace.dryRun.report.header"),children:[r.jsx(v,{}),r.jsx(U,{children:e("workspace.dryRun.report.header")}),r.jsx($,{children:r.jsxs(z,{size:"sm",children:[r.jsx(X,{children:r.jsx(Z,{status:i})}),r.jsx(Y,{children:r.jsx(rr,{errors:C()||[],onFitView:t=>{const n=y(t);n&&g(n)},onOpenConfig:t=>{const n=y(t);n&&k(n)}})})]})}),r.jsxs(H,{justifyContent:"space-between",children:[i===j.SUCCESS&&r.jsx(J,{}),r.jsx(m,{onClick:b,children:e("workspace.dryRun.report.cta.close")})]})]})})};export{wr as default};
//# sourceMappingURL=DryRunPanelController-Dd-3Z9Ou.js.map
