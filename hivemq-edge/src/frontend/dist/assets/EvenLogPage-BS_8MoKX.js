import{u as O,ao as g,j as t,D as S,p as D,q as C,s as L,v as T,a3 as E,C as p,T as m,ad as M,h as P,r as v}from"./index-cMih3SEP.js";import{P as I}from"./PageContainer-BtWKGien.js";import{D as J}from"./datetime-B2_BsC7v.js";import{S as N,a as b,E as X}from"./EventLogTable-5stkiocp.js";import{D as B}from"./DateTimeRenderer-DMb4YVpb.js";import{C as w}from"./chunk-2EW3JUUD-iAZ0BXIz.js";import{C as x}from"./chunk-FHHZMTWR-BZ2wKB7t.js";import{G as F}from"./chunk-JARCRF6W-CHhnzfpl.js";import{G as n}from"./chunk-ZPFGWTBB-27OtcFRz.js";import{C as k}from"./chunk-LZZHVJFG-BAJsNEk_.js";import"./PaginatedTable-CpimMJK6.js";import"./index-iD7yky8Q.js";import"./creatable-select-CDfhMLkq.js";import"./use-chakra-select-props-D5NVA-bJ.js";import"./chunk-KC77MHL3-CpO6TSLY.js";import"./chunk-W7WUSNWJ-DJm2I2MC.js";import"./chunk-HB6KBUMZ-BnKuEGjs.js";import"./chunk-OCNORRQU-qVjYAyQ7.js";import"./index-DDmdO6wr.js";import"./pagination-utils-DRrmx6oh.js";import"./types-B4vn0nsI.js";import"./chunk-GOJLRND4-gY5DQ7Jj.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new e.Error().stack;a&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[a]="cf2bd23b-d060-4ffb-aeda-93bedf1ea45b",e._sentryDebugIdIdentifier="sentry-dbid-cf2bd23b-d060-4ffb-aeda-93bedf1ea45b")}catch{}})();const z=e=>{if(!e)return null;try{return JSON.stringify(JSON.parse(e),null,2)}catch{return null}},G=e=>{if(!e)return null;const a=new DOMParser().parseFromString(e,"application/xml"),o=new DOMParser().parseFromString(['<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1">','  <xsl:strip-space elements="*"/>','  <xsl:template match="para[content-style][not(text())]">','    <xsl:value-of select="normalize-space(.)"/>',"  </xsl:template>",'  <xsl:template match="node()|@*">','    <xsl:copy><xsl:apply-templates select="node()|@*"/></xsl:copy>',"  </xsl:template>",'  <xsl:output indent="yes"/>',"</xsl:stylesheet>"].join(`
`),"application/xml");/* istanbul ignore next -- @preserve */try{const s=new XSLTProcessor;s.importStylesheet(o);const r=s.transformToDocument(a);return new XMLSerializer().serializeToString(r)}catch{return null}},_=({event:e,isOpen:a,onClose:o})=>{var c,u,h,f,j,y;const{t:s}=O(),r=((c=e.payload)==null?void 0:c.contentType)===g.contentType.JSON,l=((u=e.payload)==null?void 0:u.contentType)===g.contentType.XML,i=r&&z((h=e.payload)==null?void 0:h.content),d=l&&G((f=e.payload)==null?void 0:f.content);return t.jsx(t.Fragment,{children:t.jsx(S,{variant:"hivemq",closeOnOverlayClick:!0,size:"lg",isOpen:a,placement:"right",onClose:o,children:t.jsxs(D,{"aria-label":s("bridge.drawer.label"),children:[t.jsx(C,{}),t.jsx(L,{id:"bridge-form-header",children:s("eventLog.panel.title")}),t.jsx(T,{children:t.jsxs(E,{gap:2,children:[t.jsxs(p,{w:"100%",children:[t.jsx(w,{children:t.jsx(N,{event:e})}),t.jsx(x,{children:t.jsxs(F,{templateColumns:"repeat(2, 1fr)",gap:6,children:[t.jsx(n,{"data-testid":"event-title-created",children:t.jsx(m,{children:s("eventLog.table.header.created")})}),t.jsx(n,{"data-testid":"event-value-created",children:t.jsx(B,{date:J.fromISO((e==null?void 0:e.created)||"")})}),t.jsx(n,{"data-testid":"event-title-source",children:t.jsx(m,{children:s("eventLog.table.header.source")})}),t.jsx(n,{"data-testid":"event-value-source",children:t.jsx(b,{source:e==null?void 0:e.source,type:e==null?void 0:e.associatedObject})}),t.jsx(n,{"data-testid":"event-title-associatedObject",children:t.jsx(m,{children:s("eventLog.table.header.associatedObject")})}),t.jsx(n,{"data-testid":"event-value-associatedObject",children:t.jsx(b,{source:e==null?void 0:e.associatedObject})})]})})]}),t.jsx(p,{w:"100%",children:t.jsx(x,{"data-testid":"event-value-message",children:e.message})}),e.payload&&t.jsxs(p,{w:"100%",children:[t.jsxs(w,{"data-testid":"event-title-payload",children:[s("eventLog.table.header.payload"),t.jsx(M,{variant:"outline",mx:2,children:(j=e.payload)==null?void 0:j.contentType})]}),t.jsx(x,{pt:0,children:t.jsxs(k,{w:"100%",p:2,whiteSpace:"pre-wrap",overflow:"auto",sx:{textWrap:"nowrap"},maxH:400,children:[i&&i,d&&d,!r&&!l&&((y=e.payload)==null?void 0:y.content)]})})]})]})})]})})})},ce=()=>{const{isOpen:e,onOpen:a,onClose:o}=P(),{t:s}=O(),[r,l]=v.useState(void 0),i=()=>{l(void 0),o()},d=c=>{l(c),a()};return t.jsxs(I,{title:s("eventLog.title"),subtitle:s("eventLog.description"),children:[t.jsx(X,{onOpen:d}),r&&t.jsx(_,{isOpen:e,onClose:i,event:r})]})};export{ce as default};
//# sourceMappingURL=EvenLogPage-BS_8MoKX.js.map
