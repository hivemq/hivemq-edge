import{A as $,u as b,r as f,j as e,B as j,aT as z,n as F,F as _,a6 as B,C as v,a7 as T,a8 as D,al as G,a9 as R,at as I,aU as x,aV as O,aW as V,aX as W,Z as q,D as K,M as U,p as H,q as N,s as X,T as A,v as Z,a3 as k,L as J,w as Q}from"./index-cMih3SEP.js";import{M as Y,C as ee}from"./MetricsContainer-Bl1xDqAo.js";import{N as re}from"./types-DcJW2o_l.js";import{u as L}from"./useWorkspaceStore-CGV4wV7X.js";import{g as te}from"./nodes-utils-D4SYs862.js";import{P as oe,b as ae,c as se,d as ie}from"./chunk-24I2HV4N-Dq0ih_Wx.js";import{S as E}from"./chunk-NEK3OOAM-DIaqeGSv.js";import{C as S}from"./chunk-2EW3JUUD-iAZ0BXIz.js";import{C as P}from"./chunk-FHHZMTWR-BZ2wKB7t.js";import{C as M}from"./chunk-BDSTZZXD-Biup13z0.js";import{N as ne}from"./NodeNameCard-yfQKWlf9.js";import{P as de}from"./PaginatedTable-CpimMJK6.js";import{A as ce}from"./AdapterStatusContainer-DonlPMDr.js";import{a as le}from"./05-icon-industrial-hivemq-edge-CnZ6VqSq.js";import{E as pe}from"./EventLogTable-5stkiocp.js";import{T as me,a as ue,b as w,c as ge,d as C}from"./chunk-IAXSQ4X2-dYM9Hy0E.js";import"./index-UJo6opCj.js";import"./vanilla-Dd4Maacd.js";import"./middleware-DWkoLS6u.js";import"./select-Cl6Duh2E.js";import"./use-chakra-select-props-D5NVA-bJ.js";import"./chunk-KC77MHL3-CpO6TSLY.js";import"./chunk-W7WUSNWJ-DJm2I2MC.js";import"./chunk-HB6KBUMZ-BnKuEGjs.js";import"./chunk-OCNORRQU-qVjYAyQ7.js";import"./index-DDmdO6wr.js";import"./index-iD7yky8Q.js";import"./nivo-voronoi.es-CPs8r71i.js";import"./without-BTTCd72_.js";import"./pick-DicWcAKr.js";import"./ordinal-CRZJttOd.js";import"./init-D7C4L9XJ.js";import"./index-Dis5-5gm.js";import"./Tableau10-BK-pcM0W.js";import"./math-BXzRHGEW.js";import"./step-BUvoxw0L.js";import"./linear-DZrC6_ME.js";import"./time-kNxt45NV.js";import"./band-BnS7E7gT.js";import"./datetime-B2_BsC7v.js";import"./DateTimeRenderer-DMb4YVpb.js";import"./chunk-CRBMUVJA-BlVng4Ax.js";import"./index-C23MLgnh.js";import"./topics-utils-l3ij3e8P.js";import"./adapter.utils-B-ndd-tn.js";import"./index-C46KiF-i.js";import"./index-BTlOwmq4.js";import"./chunk-JARCRF6W-CHhnzfpl.js";import"./chunk-KTD65HY5-BcgUOmvV.js";import"./creatable-select-CDfhMLkq.js";import"./useGetAdaptersStatus-BDXWNPVx.js";import"./ConnectionStatusBadge-BqllVmcz.js";import"./chunk-GOJLRND4-gY5DQ7Jj.js";import"./pagination-utils-DRrmx6oh.js";import"./types-B4vn0nsI.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},r=new o.Error().stack;r&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[r]="417f3237-6e55-46a8-8c14-ac7d0d6a08f6",o._sentryDebugIdIdentifier="sentry-dbid-417f3237-6e55-46a8-8c14-ac7d0d6a08f6")}catch{}})();const he=["gray","red","orange","yellow","green","teal","blue","cyan","purple","pink"],xe=$(({onChange:o,isDisabled:r,colorScheme:a,colorSchemes:s,placement:m,...d},n)=>{const{t:g}=b("components"),l=s||he,[i,h]=f.useState(a||l[0]);return e.jsxs(oe,{placement:m||"bottom",isLazy:!0,children:[e.jsx(ae,{children:e.jsx(j,{ref:n,isDisabled:r,"data-testid":"colorPicker-trigger","data-color-scheme":i,"aria-label":g("ColorPicker.trigger",{scheme:i}),bg:`${i}.500`,_hover:{bg:`${i}.500`},_active:{bg:`${i}.700`},...d})}),e.jsx(z,{children:e.jsx(F,{sx:{"& .chakra-popover__popper":{zIndex:"popover"}},children:e.jsxs(se,{w:"auto",boxShadow:"md","data-testid":"colorPicker-popover","aria-label":"ColorPicker.popover",children:[e.jsx(ie,{backgroundColor:`${i}.500`}),e.jsx(E,{columns:1,children:e.jsx(_,{"data-testid":"colorPicker-sample",alignItems:"center",justifyContent:"center",borderWidth:0,borderTopRadius:"sm",h:10,w:"100%",p:0,fontSize:"lg",bg:`${i}.500`,color:"black",children:i})}),e.jsx(E,{columns:5,p:1,spacing:1,children:l.map((c,u)=>e.jsx(j,{"data-testid":`colorPicker-selector-${u}`,"data-color-scheme":c,"aria-label":g("ColorPicker.option",{scheme:c}),onClick:()=>{h(c),o(c)},h:6,w:6,minW:6,bg:`${c}.500`,_hover:{bg:`${c}.500`,transform:"scale(1.1)"},_active:{bg:`${c}.500`}},`color-picker-${c}-${u}`))})]})})})]})}),fe=({group:o,onSubmit:r})=>{const{t:a}=b(),{register:s,control:m,reset:d,formState:n,handleSubmit:g}=B({mode:"all",criteriaMode:"all",defaultValues:o.data}),l=i=>{r(i),d(i)};return e.jsxs(v,{size:"sm",children:[e.jsx(S,{"data-testid":"group-metadata-header",children:a("workspace.grouping.editor.title")}),e.jsx(P,{children:e.jsxs("form",{id:"group-form",onSubmit:g(l),style:{display:"flex",flexDirection:"row",gap:"18px"},children:[e.jsxs(T,{children:[e.jsx(D,{htmlFor:"group-title",children:a("workspace.grouping.editor.input-title")}),e.jsx(G,{id:"group-title",...s("title")})]}),e.jsxs(T,{as:"fieldset",children:[e.jsx(D,{as:"legend",children:a("workspace.grouping.editor.input-color")}),e.jsx(R,{name:"colorScheme",render:({field:i})=>{const{value:h,onChange:c,...u}=i;return e.jsx(xe,{colorScheme:h,onChange:y=>c(y),...u})},control:m})]})]})}),e.jsx(M,{justifyContent:"flex-end",children:e.jsx(j,{isDisabled:!n.isDirty,type:"submit",form:"group-form","data-testid":"form-submit",children:a("workspace.grouping.editor.save")})})]})},je=({group:o})=>{const{t:r}=b(),{nodes:a}=L(),s=f.useMemo(()=>[{accessorKey:"type",header:r("workspace.grouping.editor.content.header.type"),cell:d=>r("workspace.device.type",{context:d.getValue()})},{accessorKey:"data.status",header:r("workspace.grouping.editor.content.header.status"),cell:d=>e.jsx(ce,{id:d.row.original.data.id})},{accessorKey:"data.id",header:r("workspace.grouping.editor.content.header.id")},{id:"actions",header:r("workspace.grouping.editor.content.header.actions"),sortingFn:void 0,cell:()=>e.jsx(I,{isAttached:!0,size:"xs",isDisabled:!0,children:e.jsx(x,{"aria-label":r("workspace.grouping.editor.content.actions.ungroup"),icon:e.jsx(q,{as:le}),onClick:()=>{}})}),footer:()=>e.jsxs(I,{isAttached:!0,size:"xs",isDisabled:!0,children:[e.jsx(x,{"aria-label":r("workspace.grouping.editor.content.actions.startAll"),icon:e.jsx(O,{}),onClick:()=>{}}),e.jsx(x,{"aria-label":r("workspace.grouping.editor.content.actions.stopAll"),icon:e.jsx(V,{}),onClick:()=>{}}),e.jsx(x,{"aria-label":r("workspace.grouping.editor.content.actions.restartAll"),icon:e.jsx(W,{}),onClick:()=>{}})]})}],[r]),m=f.useMemo(()=>o.data.childrenNodeIds.map(d=>a.find(n=>n.id===d)).filter(d=>!!d),[o.data.childrenNodeIds,a]);return e.jsxs(v,{size:"sm",children:[e.jsx(S,{"data-testid":"group-content-header",children:r("Content Management")}),e.jsx(P,{children:e.jsx(de,{"aria-label":r("eventLog.title"),data:m,columns:s,enablePaginationSizes:!1,enablePaginationGoTo:!1})}),e.jsx(M,{justifyContent:"flex-end"})]})},yr=({nodeId:o,isOpen:r,showConfig:a=!1,selectedNode:s,nodes:m,onClose:d})=>{const{t:n}=b(),{onGroupSetData:g}=L(),l=s.data.childrenNodeIds.map(t=>m.find(p=>p.id===t)),i=l.map(t=>t?te(t):[]).flat(),h=f.useMemo(()=>{const t=new URLSearchParams;for(const p of l)p&&t.append("source",p.data.id);return`/event-logs?${t.toString()}`},[l]),c=a?n("workspace.property.header",{context:s.type}):n("workspace.observability.header",{context:s.type}),u=()=>e.jsx(Y,{nodeId:o,type:s.type,filters:l.reduce((t,p)=>(p&&p.type===re.ADAPTER_NODE&&t.push({id:p.data.id,type:`com.hivemq.edge.protocol-adapters.${p.data.type}`}),t),[]),initMetrics:i,defaultChartType:a?ee.SAMPLE:void 0}),y=()=>e.jsxs(me,{children:[e.jsxs(ue,{children:[e.jsx(w,{children:n("workspace.grouping.editor.tabs.config")}),e.jsx(w,{children:n("workspace.grouping.editor.tabs.events")}),e.jsx(w,{children:n("workspace.grouping.editor.tabs.metrics")})]}),e.jsxs(ge,{children:[e.jsxs(C,{px:0,as:k,alignItems:"stretch",children:[e.jsx(fe,{group:s,onSubmit:t=>{g(o,t)}}),e.jsx(je,{group:s})]}),e.jsx(C,{px:0,as:k,alignItems:"stretch",children:e.jsxs(v,{size:"sm",children:[e.jsx(S,{children:e.jsx(A,{children:n("workspace.grouping.editor.eventLog.header")})}),e.jsx(P,{children:e.jsx(pe,{globalSourceFilter:l.map(t=>t==null?void 0:t.data.id),variant:"summary",maxEvents:10,isSingleSource:!1})}),e.jsx(M,{justifyContent:"flex-end",pt:0,children:e.jsx(j,{"data-testid":"navigate-eventLog-filtered",variant:"link",as:J,to:h,rightIcon:e.jsx(Q,{}),size:"sm",children:n("workspace.grouping.editor.eventLog.showMore")})})]})}),e.jsx(C,{px:0,as:k,alignItems:"stretch",children:u()})]})]});return e.jsxs(K,{isOpen:r,placement:"right",size:"lg",onClose:d,variant:"hivemq",children:[e.jsx(U,{}),e.jsxs(H,{"aria-label":c,children:[e.jsx(N,{}),e.jsxs(X,{children:[e.jsx(A,{"data-testid":"group-panel-title",children:c}),e.jsx(ne,{description:n("workspace.device.type",{context:s.type}),type:s.type,name:s.data.title})]}),e.jsxs(Z,{display:"flex",flexDirection:"column",gap:6,children:[a&&y(),!a&&u()]})]})]})};export{yr as default};
//# sourceMappingURL=GroupPropertyDrawer-m5IIvS2S.js.map
