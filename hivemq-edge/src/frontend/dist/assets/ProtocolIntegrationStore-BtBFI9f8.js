import{j as e,A as D,r as b,N as z,O as C,n as h,o as k,u as w,F as y,a0 as B,T as f,ad as W,bj as E,bt as L,C as P,B as A,a7 as $,a8 as H,bu as R,bv as _,al as N,bw as q,ay as G,bx as S,by as I,b as O,bz as U,au as Z,H as J,S as K}from"./index-cMih3SEP.js";import{A as M}from"./adaptor-empty-B6wgaUwz.js";import{u as Q}from"./useGetAdapterTypes-Dufd8ZhJ.js";import{W as T}from"./WarningMessage-DBPfR2Kc.js";import{P as V}from"./types-B4vn0nsI.js";import{S as g}from"./chunk-GOJLRND4-gY5DQ7Jj.js";import{S as X}from"./chunk-NEK3OOAM-DIaqeGSv.js";import{C as Y}from"./chunk-FHHZMTWR-BZ2wKB7t.js";import{C as ee}from"./chunk-BDSTZZXD-Biup13z0.js";import"./chunk-JARCRF6W-CHhnzfpl.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new r.Error().stack;s&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[s]="07a99b42-b800-4503-8709-f9af1836ec62",r._sentryDebugIdIdentifier="sentry-dbid-07a99b42-b800-4503-8709-f9af1836ec62")}catch{}})();var re=r=>r.replace(/[|\\{}()[\]^$+*?.-]/g,s=>`\\${s}`);function te(r){const s=r.filter(t=>t.length!==0).map(t=>re(t.trim()));return s.length?new RegExp(`(${s.join("|")})`,"ig"):null}function se({text:r,query:s}){const t=te(Array.isArray(s)?s:[s]);return t?r.split(t).filter(Boolean).map(o=>({text:o,match:t.test(o)})):[{text:r,match:!1}]}function oe(r){const{text:s,query:t}=r;return b.useMemo(()=>se({text:s,query:t}),[s,t])}var ae=D(function(s,t){const a=z("Mark",s),o=C(s);return e.jsx(h,{ref:t,...o,as:"mark",__css:{bg:"transparent",whiteSpace:"nowrap",...a}})});function le(r){const{children:s,query:t,styles:a}=r;if(typeof s!="string")throw new Error("The children prop of Highlight must be a string");const o=oe({query:t,text:s});return e.jsx(e.Fragment,{children:o.map((c,n)=>c.match?e.jsx(ae,{sx:a,children:c.text},n):e.jsx(b.Fragment,{children:c.text},n))})}var ie=k({d:"M23.384,21.619,16.855,15.09a9.284,9.284,0,1,0-1.768,1.768l6.529,6.529a1.266,1.266,0,0,0,1.768,0A1.251,1.251,0,0,0,23.384,21.619ZM2.75,9.5a6.75,6.75,0,1,1,6.75,6.75A6.758,6.758,0,0,1,2.75,9.5Z",displayName:"SearchIcon"}),ne=k({d:"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z",displayName:"ArrowForwardIcon"});const de=r=>s=>{var n,m,x,u,l,p,i,d,j;const t=!((n=r.filter)!=null&&n.value),a=!!(((m=r.filter)==null?void 0:m.key)==="category"&&((x=s.category)==null?void 0:x.name)===((u=r.filter)==null?void 0:u.value)||((l=r.filter)==null?void 0:l.key)==="tags"&&((i=s.tags)!=null&&i.includes((p=r.filter)==null?void 0:p.value))),o=!r.search,c=!!(r.search&&((d=s.name)!=null&&d.toLowerCase().includes(r.search.toLowerCase())||(j=s.description)!=null&&j.toLowerCase().includes(r.search.toLowerCase())));return(t||a)&&(o||c)},F=r=>e.jsx(le,{query:r.query,styles:{rounded:"full",bg:"orange.100"},children:r.children}),ce=({adapter:r,searchQuery:s,isLoading:t})=>{const{t:a}=w();return e.jsxs(y,{m:0,children:[e.jsx(g,{isLoaded:!t,children:e.jsx(B,{boxSize:"100px",objectFit:"scale-down",src:r.logoUrl,"aria-label":r.id})}),e.jsxs(h,{ml:"3",children:[e.jsxs(g,{isLoaded:!t,as:"p",children:[e.jsx(f,{fontWeight:"bold","data-testid":"protocol-name",id:`adapter-${r.id}`,as:"span",children:e.jsx(F,{query:s||"",children:r.name||""})}),e.jsx(W,{ml:"1",colorScheme:"brand",variant:"solid","data-testid":"protocol-version",children:r.version})]}),e.jsxs(g,{isLoaded:!t,mt:1,children:[e.jsxs(f,{fontSize:"sm","data-testid":"protocol-type",children:[a("protocolAdapter.overview.type")," ",r.protocol]}),e.jsxs(f,{fontSize:"sm","data-testid":"protocol-author",children:[a("protocolAdapter.overview.author")," ",r.author]}),e.jsx(f,{fontSize:"sm","data-testid":"protocol-description",children:e.jsx(F,{query:s||"",children:r.description||""})})]}),e.jsx(h,{mt:2,children:e.jsx(g,{isLoaded:!t,children:e.jsxs(E,{href:r.url,isExternal:!0,children:[a("protocolAdapter.overview.documentation")," ",e.jsx(L,{mx:1,mb:1})]})})})]})]})},pe=({items:r,facet:s,onCreate:t,isLoading:a})=>{const{t:o}=w(),c=b.useMemo(()=>s?r.filter(de(s)):r,[r,s]);return c.length?e.jsx(X,{templateColumns:{base:"repeat(1, 1fr)",xl:"repeat(2, 1fr)"},spacing:4,gap:6,role:"list","aria-label":o("protocolAdapter.list"),children:c==null?void 0:c.map(n=>e.jsxs(P,{minW:"300px",role:"listitem","aria-labelledby":`adapter-${n.id}`,children:[e.jsx(Y,{p:2,children:e.jsx(ce,{adapter:n,searchQuery:s==null?void 0:s.search,isLoading:a},n.id)}),e.jsx(ee,{p:2,children:e.jsxs(g,{isLoaded:!a,children:[!!n.installed&&e.jsx(A,{"data-testid":"protocol-create-adapter",size:"sm",rightIcon:e.jsx(ne,{}),onClick:()=>t==null?void 0:t(n.id),children:o("protocolAdapter.action.createInstance")}),!n.installed&&e.jsxs(E,{href:n.url,isExternal:!0,"data-testid":"protocol-install-adapter",children:[o("protocolAdapter.overview.installation")," ",e.jsx(L,{})]})]})})]},n.id))}):e.jsx(h,{width:"100%",children:e.jsx(T,{image:M,prompt:o("protocolAdapter.noFilterWarning.description"),alt:o("protocolAdapter.title"),mt:10})})},he=({items:r,isLoading:s,facet:t,onChange:a})=>{const{t:o}=w(),{categories:c,tags:n}=b.useMemo(()=>{const l=(r==null?void 0:r.reduce((i,d)=>!(d!=null&&d.category)||i.map(v=>v.name).includes(d.category.name)?i:[...i,d.category],[]))||[],p=(r==null?void 0:r.reduce((i,d)=>Array.from(new Set([...i,...(d==null?void 0:d.tags)||[]])),[]))||[];return{categories:l,tags:p}},[r]),m=l=>{a==null||a({search:l.target.value})},x=()=>{a==null||a({search:null})},u=l=>{a==null||a({filter:l})};return e.jsxs(y,{flexDirection:"column",gap:4,maxW:"250px",minW:"fit-content",role:"region","aria-label":o("protocolAdapter.facet.description"),children:[e.jsxs($,{role:"search",children:[e.jsx(H,{children:o("protocolAdapter.facet.search.label")}),e.jsxs(R,{children:[e.jsx(_,{pointerEvents:"none",children:e.jsx(ie,{})}),e.jsx(N,{id:"facet-search-input",placeholder:o("protocolAdapter.facet.search.placeholder"),onChange:m,value:(t==null?void 0:t.search)||"",isDisabled:s}),e.jsx(q,{children:e.jsx(G,{id:"facet-search-clear",onClick:x,"aria-label":o("protocolAdapter.facet.search.clear")})})]})]}),e.jsxs(y,{flexDirection:"column",children:[e.jsx(h,{pb:4,pt:4,children:e.jsx(S,{spacing:3,"aria-labelledby":"facet-filter-clear",children:e.jsx(I,{children:e.jsx(g,{isLoaded:!s,children:e.jsx(A,{id:"facet-filter-clear","data-testid":"facet-filter-clear",justifyContent:"flex-start",variant:t!=null&&t.filter?"ghost":"outline","aria-pressed":!(t!=null&&t.filter),size:"sm",w:"100%",onClick:()=>u(null),children:o("protocolAdapter.facet.filter.allFilters")})})})})}),e.jsx(h,{"aria-hidden":!0,id:"facet-filter-category",children:o("protocolAdapter.facet.filter.category")}),e.jsx(h,{pb:4,pt:4,children:e.jsx(S,{spacing:3,"aria-labelledby":"facet-filter-category",children:c.map(l=>{var p,i;return e.jsx(I,{children:e.jsx(g,{isLoaded:!s,children:e.jsx(A,{"data-testid":`facet-filter-category-${l.name}`,justifyContent:"flex-start",variant:((p=t==null?void 0:t.filter)==null?void 0:p.value)===l.name?"outline":"ghost","aria-pressed":((i=t==null?void 0:t.filter)==null?void 0:i.value)===l.name,size:"sm",w:"100%",onClick:()=>u({value:l.name,key:"category"}),children:l.displayName})})},l.name)})})}),e.jsx(h,{"aria-hidden":!0,id:"facet-filter-tags",children:o("protocolAdapter.facet.filter.tags")}),e.jsx(h,{pb:4,pt:4,children:e.jsx(S,{spacing:3,"aria-labelledby":"facet-filter-tags",children:n.map(l=>{var p,i;return e.jsx(I,{children:e.jsx(g,{isLoaded:!s,children:e.jsx(A,{"data-testid":`facet-filter-tag-${l}`,justifyContent:"flex-start",variant:((p=t==null?void 0:t.filter)==null?void 0:p.value)===l?"outline":"ghost",size:"sm",w:"100%",onClick:()=>u({value:l,key:"tags"}),"aria-pressed":((i=t==null?void 0:t.filter)==null?void 0:i.value)===l,children:l})})},l)})})})]})]})},ve=()=>{var p;const{t:r}=w(),{data:s,isLoading:t,isError:a,error:o}=Q(),c=O(),[n,m]=b.useState(void 0),x=s?s.items:[U],u=i=>{const d={protocolAdapterTabIndex:V.ADAPTERS,protocolAdapterType:i};c(`/protocol-adapters/catalog/new/${i}`,{state:d})},l=i=>{m(d=>{const{search:j,filter:v}=d||{};return{search:i.search===void 0?j:i.search,filter:i.filter===void 0?v:i.filter}})};return a?e.jsx(h,{mt:"20%",mx:"20%",alignItems:"center",children:e.jsx(Z,{type:o==null?void 0:o.message,message:((p=o==null?void 0:o.body)==null?void 0:p.title)||r("protocolAdapter.error.loading")})}):x.length===0?e.jsx(T,{image:M,title:r("protocolAdapter.noTypeWarning.title"),prompt:r("protocolAdapter.noDataWarning.description"),alt:r("protocolAdapter.title"),mt:10}):e.jsxs(y,{flexDirection:"column",gap:4,children:[e.jsxs(h,{"data-testid":"heading-protocols-list",children:[e.jsx(J,{size:"md",children:r("protocolAdapter.tabs.protocols")}),e.jsx(f,{children:t?r("protocolAdapter.loading.protocolAdapters"):r("protocolAdapter.protocols.description",{count:x.length})})]}),e.jsxs(y,{flexDirection:"row",alignItems:"flex-start",gap:6,children:[e.jsx(he,{items:x,facet:n,onChange:l,isLoading:t}),e.jsx(pe,{items:x,facet:n,onCreate:u,isLoading:t})]}),e.jsx(K,{})]})};export{ve as default};
//# sourceMappingURL=ProtocolIntegrationStore-BtBFI9f8.js.map
