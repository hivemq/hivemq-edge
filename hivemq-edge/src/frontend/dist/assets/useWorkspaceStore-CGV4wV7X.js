import{c as p}from"./index-UJo6opCj.js";import{N as u}from"./types-DcJW2o_l.js";import{p as f,c as l}from"./middleware-DWkoLS6u.js";import"./index-cMih3SEP.js";import{b as i,c as t,d as g}from"./index-Dis5-5gm.js";(function(){try{var s=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},a=new s.Error().stack;a&&(s._sentryDebugIds=s._sentryDebugIds||{},s._sentryDebugIds[a]="5badf249-4a2c-4ea3-9381-20250309aa0a",s._sentryDebugIdIdentifier="sentry-dbid-5badf249-4a2c-4ea3-9381-20250309aa0a")}catch{}})();const c={nodes:[],edges:[]},b=p()(f((s,a)=>({...c,reset:()=>{s(c)},onNodesChange:d=>{s({nodes:t(d,a().nodes)})},onEdgesChange:d=>{s({edges:i(d,a().edges)})},onInsertGroupNode:(d,o,e)=>{const n=d.data.childrenNodeIds;s({nodes:[d,...a().nodes.map(r=>n.includes(r.id)?{...r,position:{x:r.position.x-e.x,y:r.position.y-e.y},parentNode:d.id,expandParent:!0,selected:!1}:r)]}),s({edges:g(o,a().edges)})},onAddNodes:d=>{const o=a().nodes.map(n=>n.id),e=d.filter(n=>!o.includes(n.item.id));e.length&&s({nodes:t(e,a().nodes)})},onAddEdges:d=>{const o=a().edges.map(n=>n.id),e=d.filter(n=>!o.includes(n.item.id));e.length&&s({edges:i(e,a().edges)})},onDeleteNode:(d,o)=>{s({nodes:a().nodes.filter(e=>{const n=e.type===d&&e.data.id===o,r=e.type===u.DEVICE_NODE&&e.data.sourceAdapterId==o;return!n&&!r})})},onToggleGroup:(d,o)=>{s({edges:a().edges.map(e=>{var n;return e.source===d.id?{...e,hidden:o}:(n=d.data)!=null&&n.childrenNodeIds.includes(e.source)?{...e,hidden:!o}:e})})},onGroupSetData:(d,o)=>{s({nodes:a().nodes.map(e=>d===e.id?{...e,data:{...e.data,...o}}:e)})}}),{name:"edge.workspace",storage:l(()=>localStorage)}));export{b as u};
//# sourceMappingURL=useWorkspaceStore-CGV4wV7X.js.map
