{"version":3,"file":"UnifiedNamespaceEditor-BgqjhFGL.js","sources":["../../src/api/__generated__/schemas/$ISA95ApiBean.ts","../../src/modules/UnifiedNamespace/components/NamespaceForm.tsx","../../src/modules/UnifiedNamespace/components/UnifiedNamespaceEditor.tsx"],"sourcesContent":["/* generated using openapi-typescript-codegen -- do no edit */\n/* istanbul ignore file */\n/* tslint:disable */\n/* eslint-disable */\nexport const $ISA95ApiBean = {\n    properties: {\n        area: {\n            type: 'string',\n            description: `The area`,\n            isNullable: true,\n            pattern: '^[a-zA-Z0-9 -_]*$',\n        },\n        enabled: {\n            type: 'boolean',\n            description: `Should UNS be available`,\n        },\n        enterprise: {\n            type: 'string',\n            description: `The enterprise`,\n            isNullable: true,\n            pattern: '^[a-zA-Z0-9 -_]*',\n        },\n        prefixAllTopics: {\n            type: 'boolean',\n            description: `Should all topics be prefixed with UNS placeholders`,\n        },\n        productionLine: {\n            type: 'string',\n            description: `The productionLine`,\n            isNullable: true,\n            pattern: '^[a-zA-Z0-9 -_]*$',\n        },\n        site: {\n            type: 'string',\n            description: `The site`,\n            isNullable: true,\n            pattern: '^[a-zA-Z0-9 -_]*$',\n        },\n        workCell: {\n            type: 'string',\n            description: `The workCell`,\n            isNullable: true,\n            pattern: '^[a-zA-Z0-9 -_]*$',\n        },\n    },\n} as const;\n","import type { FC } from 'react'\nimport type { SubmitHandler } from 'react-hook-form'\nimport { useForm } from 'react-hook-form'\nimport {\n  Checkbox,\n  Flex,\n  Text,\n  FormControl,\n  FormErrorMessage,\n  FormHelperText,\n  FormLabel,\n  Grid,\n  Input,\n} from '@chakra-ui/react'\nimport { useTranslation } from 'react-i18next'\n\nimport type { ISA95ApiBean } from '@/api/__generated__'\nimport { $ISA95ApiBean } from '@/api/__generated__'\nimport { useValidationRules } from '@/api/hooks/useValidationRules/useValidationRules.ts'\n\nimport NamespaceDisplay from './NamespaceDisplay.tsx'\nimport { NAMESPACE_SEPARATOR } from '../utils/namespace.utils.ts'\n\ninterface NamespaceFormProps {\n  defaultValues: ISA95ApiBean\n  onSubmit: SubmitHandler<ISA95ApiBean>\n}\n\nconst FormControlSeparator = () => (\n  <Text pt=\"2.33rem\" textAlign=\"center\">\n    {NAMESPACE_SEPARATOR}\n  </Text>\n)\n\nconst NamespaceForm: FC<NamespaceFormProps> = ({ defaultValues, onSubmit }) => {\n  const { t } = useTranslation()\n  const {\n    register,\n    handleSubmit,\n    watch,\n    formState: { errors },\n  } = useForm<ISA95ApiBean>({\n    defaultValues: { ...defaultValues, enabled: true },\n  })\n  const getRulesForProperty = useValidationRules()\n\n  const preview = watch()\n\n  return (\n    <form id=\"namespace-form\" onSubmit={handleSubmit(onSubmit)}>\n      <Flex flexDirection=\"column\" gap={6}>\n        <FormControl>\n          <FormLabel htmlFor=\"unifiedNamespace-preview\">{t('unifiedNamespace.preview.label')}</FormLabel>\n          <NamespaceDisplay namespace={preview} fontSize=\"sm\" />\n        </FormControl>\n\n        <Flex flexDirection=\"column\" gap={4}>\n          <Grid templateColumns=\"repeat(2, 1fr 20px)\" gap={6}>\n            <FormControl isInvalid={!!errors.enterprise}>\n              <FormLabel htmlFor=\"unifiedNamespace-enterprise\">{t('unifiedNamespace.enterprise.label')}</FormLabel>\n              <Input\n                id=\"unifiedNamespace-enterprise\"\n                {...register('enterprise', {\n                  ...getRulesForProperty($ISA95ApiBean.properties.enterprise),\n                })}\n              />\n              {!errors.enterprise && <FormHelperText>{t('unifiedNamespace.enterprise.helper')}</FormHelperText>}\n              <FormErrorMessage>{errors.enterprise && errors.enterprise.message}</FormErrorMessage>\n            </FormControl>\n\n            <FormControlSeparator />\n\n            <FormControl>\n              <FormLabel htmlFor=\"unifiedNamespace-site\">{t('unifiedNamespace.site.label')}</FormLabel>\n              <Input\n                id=\"unifiedNamespace-site\"\n                {...register('site', {\n                  ...getRulesForProperty($ISA95ApiBean.properties.site),\n                })}\n              />\n              <FormHelperText>{t('unifiedNamespace.site.helper')}</FormHelperText>\n            </FormControl>\n\n            <FormControlSeparator />\n\n            <FormControl>\n              <FormLabel htmlFor=\"unifiedNamespace-area\">{t('unifiedNamespace.area.label')}</FormLabel>\n              <Input\n                id=\"unifiedNamespace-area\"\n                {...register('area', {\n                  ...getRulesForProperty($ISA95ApiBean.properties.area),\n                })}\n              />\n              <FormHelperText>{t('unifiedNamespace.area.helper')}</FormHelperText>\n            </FormControl>\n\n            <FormControlSeparator />\n\n            <FormControl>\n              <FormLabel htmlFor=\"unifiedNamespace-productionLine\">\n                {t('unifiedNamespace.productionLine.label')}\n              </FormLabel>\n              <Input\n                id=\"unifiedNamespace-productionLine\"\n                {...register('productionLine', {\n                  ...getRulesForProperty($ISA95ApiBean.properties.productionLine),\n                })}\n              />\n              <FormHelperText>{t('unifiedNamespace.productionLine.helper')}</FormHelperText>\n            </FormControl>\n\n            <FormControlSeparator />\n\n            <FormControl>\n              <FormLabel htmlFor=\"unifiedNamespace-workCell\">{t('unifiedNamespace.workCell.label')}</FormLabel>\n              <Input\n                id=\"unifiedNamespace-workCell\"\n                {...register('workCell', {\n                  ...getRulesForProperty($ISA95ApiBean.properties.workCell),\n                })}\n              />\n              <FormHelperText>{t('unifiedNamespace.workCell.helper')}</FormHelperText>\n            </FormControl>\n          </Grid>\n        </Flex>\n\n        <FormControl as=\"fieldset\" isInvalid={!!errors.prefixAllTopics}>\n          <FormLabel as=\"legend\">{t('unifiedNamespace.options.legend')}</FormLabel>\n          <Checkbox\n            data-testid=\"unifiedNamespace-prefixAllTopics\"\n            id=\"unifiedNamespace-prefixAllTopics\"\n            {...register('prefixAllTopics', {\n              ...getRulesForProperty($ISA95ApiBean.properties.prefixAllTopics),\n            })}\n          >\n            {t('unifiedNamespace.prefixAllTopics.label')}\n          </Checkbox>\n          <FormHelperText> {t('unifiedNamespace.prefixAllTopics.helper')}</FormHelperText>\n          <FormErrorMessage>{errors.prefixAllTopics && errors.prefixAllTopics.message}</FormErrorMessage>\n        </FormControl>\n      </Flex>\n    </form>\n  )\n}\n\nexport default NamespaceForm\n","import type { FC } from 'react'\nimport { useEffect } from 'react'\nimport {\n  Button,\n  Drawer,\n  DrawerBody,\n  DrawerCloseButton,\n  DrawerContent,\n  DrawerFooter,\n  DrawerHeader,\n  DrawerOverlay,\n  useDisclosure,\n} from '@chakra-ui/react'\nimport type { SubmitHandler } from 'react-hook-form'\nimport { useNavigate } from 'react-router-dom'\nimport { useTranslation } from 'react-i18next'\n\nimport type { ApiError, ISA95ApiBean } from '@/api/__generated__'\nimport { useGetUnifiedNamespace } from '@/api/hooks/useUnifiedNamespace/useGetUnifiedNamespace.ts'\nimport { useSetUnifiedNamespace } from '@/api/hooks/useUnifiedNamespace/useSetUnifiedNamespace.ts'\n\nimport NamespaceForm from '@/modules/UnifiedNamespace/components/NamespaceForm.tsx'\n\nimport { useEdgeToast } from '@/hooks/useEdgeToast/useEdgeToast.tsx'\n\ninterface UnifiedNamespaceEditorProps {\n  id?: string\n}\n\nconst UnifiedNamespaceEditor: FC<UnifiedNamespaceEditorProps> = () => {\n  const { t } = useTranslation()\n  const { isOpen, onOpen, onClose } = useDisclosure()\n  const navigate = useNavigate()\n  const { successToast, errorToast } = useEdgeToast()\n\n  const { data } = useGetUnifiedNamespace()\n  const { isPending: isUploading, mutateAsync } = useSetUnifiedNamespace()\n\n  useEffect(() => {\n    onOpen()\n  }, [onOpen])\n\n  const handleEditorOnClose = () => {\n    onClose()\n    navigate('/namespace')\n  }\n\n  const handleOnSubmit: SubmitHandler<ISA95ApiBean> = (data) => {\n    mutateAsync({ requestBody: data })\n      .then(() => {\n        successToast({\n          title: t('unifiedNamespace.toast.update.title'),\n          description: t('unifiedNamespace.toast.update.description'),\n        })\n      })\n      .catch((err: ApiError) =>\n        errorToast(\n          {\n            title: t('unifiedNamespace.toast.update.title'),\n            description: t('unifiedNamespace.toast.update.error'),\n          },\n          err\n        )\n      )\n\n    onClose()\n    navigate('/namespace')\n  }\n  if (!data) return null\n\n  return (\n    <Drawer closeOnOverlayClick={false} size=\"lg\" isOpen={isOpen} placement=\"right\" onClose={handleEditorOnClose}>\n      <DrawerOverlay />\n      <DrawerContent aria-label={t('bridge.drawer.label')}>\n        <DrawerCloseButton />\n        <DrawerHeader id=\"bridge-form-header\" borderBottomWidth=\"1px\">\n          {t('unifiedNamespace.title')}\n        </DrawerHeader>\n\n        <DrawerBody>\n          <NamespaceForm defaultValues={data} onSubmit={handleOnSubmit} />\n        </DrawerBody>\n        <DrawerFooter>\n          <Button variant=\"primary\" isLoading={isUploading} type=\"submit\" form=\"namespace-form\">\n            {t('unifiedNamespace.submit.label')}\n          </Button>\n        </DrawerFooter>\n      </DrawerContent>\n    </Drawer>\n  )\n}\n\nexport default UnifiedNamespaceEditor\n"],"names":["$ISA95ApiBean","FormControlSeparator","jsx","Text","NAMESPACE_SEPARATOR","NamespaceForm","defaultValues","onSubmit","t","useTranslation","register","handleSubmit","watch","errors","useForm","getRulesForProperty","useValidationRules","preview","jsxs","Flex","FormControl","FormLabel","NamespaceDisplay","Grid","Input","FormHelperText","FormErrorMessage","Checkbox","UnifiedNamespaceEditor","isOpen","onOpen","onClose","useDisclosure","navigate","useNavigate","successToast","errorToast","useEdgeToast","data","useGetUnifiedNamespace","isUploading","mutateAsync","useSetUnifiedNamespace","useEffect","handleEditorOnClose","handleOnSubmit","err","Drawer","DrawerOverlay","DrawerContent","DrawerCloseButton","DrawerHeader","DrawerBody","DrawerFooter","Button"],"mappings":"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"}