import{A as nt,V as Dr,O as Vr,j as c,Y as $r,m as Nn,P as tt,Z as Fn,o as Yr,e as xi,f as pi,Q as yi,u as Mn,a6 as Hr,r as b,a3 as It,a7 as $t,a8 as Yt,a9 as Ht,B as zr,c as qr,g as Ur,a4 as bi,ae as vi,K as Xr,af as it,cC as Nr,cD as Gr,cE as _r,cF as Kr,cG as Jr,C as Bt,a2 as Ot,cH as Qr,T as Kn,G as rt,n as Cn,cI as Zr,cJ as ea,ay as ki,aU as na,cK as ta,cL as ia,co as ra,h as aa}from"./index-cMih3SEP.js";import{c as oa}from"./index-UJo6opCj.js";import{p as la,c as sa}from"./middleware-DWkoLS6u.js";import{S as zt}from"./select-Cl6Duh2E.js";import{B as ua}from"./index-iD7yky8Q.js";import{u as da,t as ca,e as St,M as fa,U as wn,a as at,z as _e,b as Vn,c as Te,d as ha,f as ma,r as ga,g as xa,H as Ct,I as ot,O as Si,w as Ci,C as pa,h as ya,F as Pt,k as Gn,q as ba,v as va,i as ka,j as lt,X as Rn,l as Mi,R as wi,m as Ti,P as qt,n as ji,W as Sa,o as Ca,p as Ma,s as Ei,S as _n,x as Wi,y as Jn,A as Li,B as Ii,J as wa,Q as Ta,K as ja,D as Bi,E as Ut,G as ft,L as Ea}from"./nivo-voronoi.es-CPs8r71i.js";import{b as Oi,c as Wa,d as Xt,e as La,f as Pi,g as Nt}from"./without-BTTCd72_.js";import{d as Fi,a as Ai,e as Gt,f as Ia,g as Ba,h as Oa,l as Pa}from"./linear-DZrC6_ME.js";import{i as Ft}from"./init-D7C4L9XJ.js";import{n as Fa,o as Aa,u as Ra,s as Da,p as Va,q as $a,r as Ya,v as Ha,w as za,x as qa,y as Ua,z as Xa,t as Na}from"./time-kNxt45NV.js";import{b as Ga,p as _a}from"./band-BnS7E7gT.js";import{w as Ka,k as Ri,x as Ja,a as Ze,l as Qa,y as Za,N as Di}from"./step-BUvoxw0L.js";import{D as Hn}from"./datetime-B2_BsC7v.js";import{D as eo}from"./DateTimeRenderer-DMb4YVpb.js";import{C as no}from"./chunk-FHHZMTWR-BZ2wKB7t.js";import{A as to,a as io,b as ro,c as ao,d as oo}from"./chunk-CRBMUVJA-BlVng4Ax.js";import{S as lo}from"./chunk-NEK3OOAM-DIaqeGSv.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},n=new e.Error().stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="54be4c2d-02dd-4d03-993f-a6e800abf272",e._sentryDebugIdIdentifier="sentry-dbid-54be4c2d-02dd-4d03-993f-a6e800abf272")}catch{}})();var[so,st]=$r({name:"StatStylesContext",errorMessage:`useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Stat />" `}),Vi=nt(function(n,t){const r=Dr("Stat",n),i={position:"relative",flex:"1 1 0%",...r.container},{className:a,children:o,...l}=Vr(n);return c.jsx(so,{value:r,children:c.jsx(Nn.div,{ref:t,...l,className:tt("chakra-stat",a),__css:i,children:c.jsx("dl",{children:o})})})});Vi.displayName="Stat";var $i=e=>c.jsx(Fn,{color:"red.400",...e,children:c.jsx("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"})});$i.displayName="StatDownArrow";function Yi(e){return c.jsx(Fn,{color:"green.400",...e,children:c.jsx("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"})})}Yi.displayName="StatUpArrow";function Hi(e){const{type:n,"aria-label":t,...r}=e,i=st(),a=n==="increase"?Yi:$i,l=t||(n==="increase"?"increased by":"decreased by");return c.jsxs(c.Fragment,{children:[c.jsx(Nn.span,{srOnly:!0,children:l}),c.jsx(a,{"aria-hidden":!0,...r,__css:i.icon})]})}Hi.displayName="StatArrow";var zi=nt(function(n,t){const r=st();return c.jsx(Nn.dd,{ref:t,...n,className:tt("chakra-stat__help-text",n.className),__css:r.helpText})});zi.displayName="StatHelpText";var qi=nt(function(n,t){const r=st();return c.jsx(Nn.dt,{ref:t,...n,className:tt("chakra-stat__label",n.className),__css:r.label})});qi.displayName="StatLabel";var Ui=nt(function(n,t){const r=st();return c.jsx(Nn.dd,{ref:t,...n,className:tt("chakra-stat__number",n.className),__css:{...r.number,fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}})});Ui.displayName="StatNumber";var uo=Yr({d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8 0-1.85.63-3.55 1.69-4.9L16.9 18.31C15.55 19.37 13.85 20 12 20zm6.31-3.1L7.1 5.69C8.45 4.63 10.15 4 12 4c4.42 0 8 3.58 8 8 0 1.85-.63 3.55-1.69 4.9z",displayName:"NotAllowedIcon"});function _t(e){return Math.log(e)}function Kt(e){return Math.exp(e)}function co(e){return-Math.log(-e)}function fo(e){return-Math.exp(-e)}function ho(e){return isFinite(e)?+("1e"+e):e<0?0:e}function mo(e){return e===10?ho:e===Math.E?Math.exp:n=>Math.pow(e,n)}function go(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),n=>Math.log(n)/e)}function Jt(e){return(n,t)=>-e(-n,t)}function xo(e){const n=e(_t,Kt),t=n.domain;let r=10,i,a;function o(){return i=go(r),a=mo(r),t()[0]<0?(i=Jt(i),a=Jt(a),e(co,fo)):e(_t,Kt),n}return n.base=function(l){return arguments.length?(r=+l,o()):r},n.domain=function(l){return arguments.length?(t(l),o()):t()},n.ticks=l=>{const s=t();let d=s[0],f=s[s.length-1];const u=f<d;u&&([d,f]=[f,d]);let h=i(d),m=i(f),x,g;const p=l==null?10:+l;let y=[];if(!(r%1)&&m-h<p){if(h=Math.floor(h),m=Math.ceil(m),d>0){for(;h<=m;++h)for(x=1;x<r;++x)if(g=h<0?x/a(-h):x*a(h),!(g<d)){if(g>f)break;y.push(g)}}else for(;h<=m;++h)for(x=r-1;x>=1;--x)if(g=h>0?x/a(-h):x*a(h),!(g<d)){if(g>f)break;y.push(g)}y.length*2<p&&(y=Gt(d,f,p))}else y=Gt(h,m,Math.min(m-h,p)).map(a);return u?y.reverse():y},n.tickFormat=(l,s)=>{if(l==null&&(l=10),s==null&&(s=r===10?"s":","),typeof s!="function"&&(!(r%1)&&(s=Ia(s)).precision==null&&(s.trim=!0),s=Ba(s)),l===1/0)return s;const d=Math.max(1,r*l/n.ticks().length);return f=>{let u=f/a(Math.round(i(f)));return u*r<r-.5&&(u*=r),u<=d?s(f):""}},n.nice=()=>t(Fa(t(),{floor:l=>a(Math.floor(i(l))),ceil:l=>a(Math.ceil(i(l)))})),n}function Xi(){const e=xo(Fi()).domain([1,10]);return e.copy=()=>Ai(e,Xi()).base(e.base()),Ft.apply(e,arguments),e}function Qt(e){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/e))}}function Zt(e){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*e}}function po(e){var n=1,t=e(Qt(n),Zt(n));return t.constant=function(r){return arguments.length?e(Qt(n=+r),Zt(n)):n},Oa(t)}function Ni(){var e=po(Fi());return e.copy=function(){return Ai(e,Ni()).constant(e.constant())},Ft.apply(e,arguments)}function yo(){return Ft.apply(Aa(Xa,Ua,qa,za,Ha,Ya,$a,Va,Da,Ra).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function bo(e,n,t){var r=null,i=Ze(!0),a=null,o=Ja,l=null,s=Ka(d);e=typeof e=="function"?e:e===void 0?Qa:Ze(+e),n=typeof n=="function"?n:n===void 0?Ze(0):Ze(+n),t=typeof t=="function"?t:t===void 0?Za:Ze(+t);function d(u){var h,m,x,g=(u=Ri(u)).length,p,y=!1,v,S=new Array(g),k=new Array(g);for(a==null&&(l=o(v=s())),h=0;h<=g;++h){if(!(h<g&&i(p=u[h],h,u))===y)if(y=!y)m=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),x=h-1;x>=m;--x)l.point(S[x],k[x]);l.lineEnd(),l.areaEnd()}y&&(S[h]=+e(p,h,u),k[h]=+n(p,h,u),l.point(r?+r(p,h,u):S[h],t?+t(p,h,u):k[h]))}if(v)return l=null,v+""||null}function f(){return Di().defined(i).curve(o).context(a)}return d.x=function(u){return arguments.length?(e=typeof u=="function"?u:Ze(+u),r=null,d):e},d.x0=function(u){return arguments.length?(e=typeof u=="function"?u:Ze(+u),d):e},d.x1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:Ze(+u),d):r},d.y=function(u){return arguments.length?(n=typeof u=="function"?u:Ze(+u),t=null,d):n},d.y0=function(u){return arguments.length?(n=typeof u=="function"?u:Ze(+u),d):n},d.y1=function(u){return arguments.length?(t=u==null?null:typeof u=="function"?u:Ze(+u),d):t},d.lineX0=d.lineY0=function(){return f().x(e).y(n)},d.lineY1=function(){return f().x(e).y(t)},d.lineX1=function(){return f().x(r).y(n)},d.defined=function(u){return arguments.length?(i=typeof u=="function"?u:Ze(!!u),d):i},d.curve=function(u){return arguments.length?(o=u,a!=null&&(l=o(a)),d):o},d.context=function(u){return arguments.length?(u==null?a=l=null:l=o(a=u),d):a},d}function ei(e,n){if((o=e.length)>1)for(var t=1,r,i,a=e[n[0]],o,l=a.length;t<o;++t)for(i=a,a=e[n[t]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function ni(e){for(var n=e.length,t=new Array(n);--n>=0;)t[n]=n;return t}function vo(e,n){return e[n]}function ko(e){const n=[];return n.key=e,n}function So(){var e=Ze([]),n=ni,t=ei,r=vo;function i(a){var o=Array.from(e.apply(this,arguments),ko),l,s=o.length,d=-1,f;for(const u of a)for(l=0,++d;l<s;++l)(o[l][d]=[0,+r(u,o[l].key,d,a)]).data=u;for(l=0,f=Ri(n(o));l<s;++l)o[f[l]].index=l;return t(o,f),o}return i.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Ze(Array.from(a)),i):e},i.value=function(a){return arguments.length?(r=typeof a=="function"?a:Ze(+a),i):r},i.order=function(a){return arguments.length?(n=a==null?ni:typeof a=="function"?a:Ze(Array.from(a)),i):n},i.offset=function(a){return arguments.length?(t=a??ei,i):t},i}function Co(e,n){if((s=e.length)>0)for(var t,r=0,i,a,o,l,s,d=e[n[0]].length;r<d;++r)for(o=l=0,t=0;t<s;++t)(a=(i=e[n[t]][r])[1]-i[0])>0?(i[0]=o,i[1]=o+=a):a<0?(i[1]=l,i[0]=l+=a):(i[0]=0,i[1]=a)}var An=(e=>(e.SAMPLE="SAMPLE",e.LINE_CHART="LINE_CHART",e.BAR_CHART="BAR_CHART",e))(An||{});const Mo=oa()(la((e,n)=>({metrics:[],reset:()=>{e({metrics:[]})},addMetrics:(t,r,i)=>{e({metrics:[...n().metrics,{source:t,metrics:r,chart:i}]})},removeMetrics:(t,r)=>{e({metrics:n().metrics.filter(i=>i.source!==t||i.metrics!==r)})},getMetricsFor:t=>n().metrics.filter(r=>r.source===t)}),{name:"edge.observability",storage:sa(()=>localStorage)})),En=e=>{const n=e.replace("com.hivemq.edge.",""),t=n.split(".");if(t[0]==="bridge"){const[s,d,...f]=t,u=f.join(".");return{device:s,id:d,suffix:u}}if(t[0]==="protocol-adapters"){const[s,d,f,...u]=n.split("."),h=u.join(".");return{device:s,type:d,id:f,suffix:h}}if(["networking","messages"].includes(t[0])){const[s,...d]=n.split("."),f=d.join(".");return{device:s,suffix:f}}const[r,i,a,...o]=n.split("."),l=o.join(".");return{device:r,type:i,id:a,suffix:l}},wo=()=>{const e=xi();return pi({queryKey:[yi.METRICS],queryFn:()=>e.metrics.getMetrics()})},To=[{value:An.BAR_CHART,label:"Bar Chart"},{value:An.LINE_CHART,label:"Line chart"},{value:An.SAMPLE,label:"Stat"}],jo=({onSubmit:e,filters:n,selectedMetrics:t,selectedChart:r})=>{const{t:i}=Mn(),{data:a}=wo(),{handleSubmit:o,control:l,reset:s,formState:{isValid:d,isSubmitted:f}}=Hr({}),u=b.useMemo(()=>{if(!a||!a.items)return[];const{items:h}=a,m=n.map(x=>{const g=h.filter(p=>{const y=En(p.name);return x.id===y.id}).map(p=>{const{device:y,suffix:v}=En(p.name);return{label:i(`metrics.${y}.${v}`),value:p.name,isDisabled:t==null?void 0:t.includes(p.name)}}).sort((p,y)=>p.label.localeCompare(y.label));return{label:x.id,options:g}}).sort((x,g)=>x.label.localeCompare(g.label));return m.length===1?m[0].options:m},[a,n,t,i]);return b.useEffect(()=>{f&&s()},[f,s]),c.jsx("form",{id:"namespace-form",onSubmit:o(e),style:{display:"flex",flexDirection:"column",gap:"18px"},children:c.jsxs(It,{gap:2,alignItems:"flex-end",children:[c.jsxs($t,{children:[c.jsx(Yt,{htmlFor:"metrics-select",children:i("metrics.editor.select-metric")}),c.jsx(Ht,{name:"selectedTopic",control:l,rules:{required:!0},render:({field:h})=>{const{value:m,onChange:x,...g}=h;return c.jsx(zt,{...g,menuPortalTarget:document.body,chakraStyles:{option:p=>({...p,paddingLeft:"24px"})},styles:{menuPortal:p=>({...p,zIndex:1401})},id:"metrics-select-container",inputId:"metrics-select",value:m||null,onChange:p=>x(p),options:u,isClearable:!0,isMulti:!1,isSearchable:!0,components:{DropdownIndicator:null}})}})]}),!r&&c.jsxs($t,{children:[c.jsx(Yt,{htmlFor:"chart-select",children:i("metrics.editor.select-chart")}),c.jsx(Ht,{name:"selectedChart",control:l,rules:{required:!0},render:({field:h})=>{const{value:m,onChange:x,...g}=h;return c.jsx(zt,{...g,menuPortalTarget:document.body,styles:{menuPortal:p=>({...p,zIndex:1401})},id:"chart-select-container",inputId:"chart-select",value:m||null,onChange:p=>x(p),options:To,isClearable:!0,isMulti:!1,isSearchable:!1,components:{DropdownIndicator:null}})}})]}),c.jsx(zr,{isDisabled:!d,rightIcon:c.jsx(qr,{}),type:"submit",form:"namespace-form",children:i("metrics.editor.add")})]})})},Gi=e=>{const n=xi();return pi({queryKey:[yi.METRICS_SAMPLE,e],queryFn:()=>n.metrics.getSample(e),enabled:!!e,retry:0,refetchInterval:Ur.httpClient.pollingRefetchInterval})};function Eo(e){return bi({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M14.431 3.323l-8.47 10-.79-.036-3.35-4.77.818-.574 2.978 4.24 8.051-9.506.764.646z"},child:[]}]})(e)}function Wo(e){return bi({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M8.6 1c1.6.1 3.1.9 4.2 2 1.3 1.4 2 3.1 2 5.1 0 1.6-.6 3.1-1.6 4.4-1 1.2-2.4 2.1-4 2.4-1.6.3-3.2.1-4.6-.7-1.4-.8-2.5-2-3.1-3.5C.9 9.2.8 7.5 1.3 6c.5-1.6 1.4-2.9 2.8-3.8C5.4 1.3 7 .9 8.6 1zm.5 12.9c1.3-.3 2.5-1 3.4-2.1.8-1.1 1.3-2.4 1.2-3.8 0-1.6-.6-3.2-1.7-4.3-1-1-2.2-1.6-3.6-1.7-1.3-.1-2.7.2-3.8 1-1.1.8-1.9 1.9-2.3 3.3-.4 1.3-.4 2.7.2 4 .6 1.3 1.5 2.3 2.7 3 1.2.7 2.6.9 3.9.6zM7.9 7.5L10.3 5l.7.7-2.4 2.5 2.4 2.5-.7.7-2.4-2.5-2.4 2.5-.7-.7 2.4-2.5-2.4-2.5.7-.7 2.4 2.5z"},child:[]}]})(e)}const Lo=1500,_i=({content:e,placement:n,...t})=>{const{t:r}=Mn("components"),[i,a]=b.useState("READY");b.useEffect(()=>{if(i==="READY")return;const l=setInterval(()=>{a("READY")},Lo);return()=>clearInterval(l)},[a,i]);function o(){navigator.clipboard.writeText(e).then(()=>{a("COPIED")},()=>{a("ERROR")}),a("COPIED")}return c.jsx(vi,{label:r("ClipboardCopyIconButton.action",{context:i}),hasArrow:!0,placement:n||"right",isOpen:i!=="READY",children:c.jsx(Xr,{isLoading:i!="READY","data-state":i,spinner:i==="ERROR"?c.jsx(Fn,{as:Wo,fontSize:"1rem",color:"red.500"}):c.jsx(Fn,{as:Eo,fontSize:"1rem",color:"green.500"}),"data-testid":"metrics-copy",size:"xs",variant:"ghost",icon:c.jsx(Fn,{as:ua,fontSize:"1rem"}),onClick:o,"aria-label":r("ClipboardCopyIconButton.ariaLabel"),...t})})};var ht,ti;function Io(){if(ti)return ht;ti=1;var e=Oi(),n=Wa();function t(r,i){return r&&r.length?n(r,e(i,2)):[]}return ht=t,ht}var Bo=Io();const Mt=it(Bo);var mt,ii;function Oo(){if(ii)return mt;ii=1;var e=Nr(),n=Gr(),t="[object Date]";function r(i){return n(i)&&e(i)==t}return mt=r,mt}var gt,ri;function Po(){if(ri)return gt;ri=1;var e=Oo(),n=_r(),t=Kr(),r=t&&t.isDate,i=r?n(r):e;return gt=i,gt}var Fo=Po();const Ao=it(Fo);var xt=new Date,pt=new Date;function Ue(e,n,t,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=function(a){return e(a=new Date(+a)),a},i.ceil=function(a){return e(a=new Date(a-1)),n(a,1),e(a),a},i.round=function(a){var o=i(a),l=i.ceil(a);return a-o<l-a?o:l},i.offset=function(a,o){return n(a=new Date(+a),o==null?1:Math.floor(o)),a},i.range=function(a,o,l){var s=[],d;if(a=i.ceil(a),l=l==null?1:Math.floor(l),!(a<o)||!(l>0))return s;do s.push(d=new Date(+a)),n(a,l),e(a);while(d<a&&a<o);return s},i.filter=function(a){return Ue(function(o){if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},function(o,l){if(o>=o)if(l<0)for(;++l<=0;)for(;n(o,-1),!a(o););else for(;--l>=0;)for(;n(o,1),!a(o););})},t&&(i.count=function(a,o){return xt.setTime(+a),pt.setTime(+o),e(xt),e(pt),Math.floor(t(xt,pt))},i.every=function(a){return a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?function(o){return r(o)%a===0}:function(o){return i.count(0,o)%a===0}):i}),i}var zn=Ue(function(){},function(e,n){e.setTime(+e+n)},function(e,n){return n-e});zn.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ue(function(n){n.setTime(Math.floor(n/e)*e)},function(n,t){n.setTime(+n+t*e)},function(n,t){return(t-n)/e}):zn};zn.range;var Qn=1e3,Dn=6e4,Zn=36e5,Ki=6048e5,wt=Ue(function(e){e.setTime(e-e.getMilliseconds())},function(e,n){e.setTime(+e+n*Qn)},function(e,n){return(n-e)/Qn},function(e){return e.getUTCSeconds()});wt.range;var Ji=Ue(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qn)},function(e,n){e.setTime(+e+n*Dn)},function(e,n){return(n-e)/Dn},function(e){return e.getMinutes()});Ji.range;var Qi=Ue(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qn-e.getMinutes()*Dn)},function(e,n){e.setTime(+e+n*Zn)},function(e,n){return(n-e)/Zn},function(e){return e.getHours()});Qi.range;function Wn(e){return Ue(function(n){n.setDate(n.getDate()-(n.getDay()+7-e)%7),n.setHours(0,0,0,0)},function(n,t){n.setDate(n.getDate()+t*7)},function(n,t){return(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*Dn)/Ki})}var Tt=Wn(0),Zi=Wn(1),er=Wn(2),nr=Wn(3),tr=Wn(4),ir=Wn(5),rr=Wn(6);Tt.range;Zi.range;er.range;nr.range;tr.range;ir.range;rr.range;var ar=Ue(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,n){e.setMonth(e.getMonth()+n)},function(e,n){return n.getMonth()-e.getMonth()+(n.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()});ar.range;var At=Ue(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n)},function(e,n){return n.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});At.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ue(function(n){n.setFullYear(Math.floor(n.getFullYear()/e)*e),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,t){n.setFullYear(n.getFullYear()+t*e)})};At.range;var or=Ue(function(e){e.setUTCSeconds(0,0)},function(e,n){e.setTime(+e+n*Dn)},function(e,n){return(n-e)/Dn},function(e){return e.getUTCMinutes()});or.range;var lr=Ue(function(e){e.setUTCMinutes(0,0,0)},function(e,n){e.setTime(+e+n*Zn)},function(e,n){return(n-e)/Zn},function(e){return e.getUTCHours()});lr.range;function Ln(e){return Ue(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-e)%7),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCDate(n.getUTCDate()+t*7)},function(n,t){return(t-n)/Ki})}var jt=Ln(0),sr=Ln(1),ur=Ln(2),dr=Ln(3),cr=Ln(4),fr=Ln(5),hr=Ln(6);jt.range;sr.range;ur.range;dr.range;cr.range;fr.range;hr.range;var mr=Ue(function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCMonth(e.getUTCMonth()+n)},function(e,n){return n.getUTCMonth()-e.getUTCMonth()+(n.getUTCFullYear()-e.getUTCFullYear())*12},function(e){return e.getUTCMonth()});mr.range;var Rt=Ue(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n)},function(e,n){return n.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});Rt.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Ue(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/e)*e),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t*e)})};Rt.range;function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},jn.apply(this,arguments)}var Pn=[function(e){return e.setMilliseconds(0)},function(e){return e.setSeconds(0)},function(e){return e.setMinutes(0)},function(e){return e.setHours(0)},function(e){return e.setDate(1)},function(e){return e.setMonth(0)}],Ro={millisecond:[],second:Pn.slice(0,1),minute:Pn.slice(0,2),hour:Pn.slice(0,3),day:Pn.slice(0,4),month:Pn.slice(0,5),year:Pn.slice(0,6)},Do=function(e){return function(n){return Ro[e].forEach(function(t){t(n)}),n}},gr=function(e){var n=e.format,t=n===void 0?"native":n,r=e.precision,i=r===void 0?"millisecond":r,a=e.useUTC,o=a===void 0||a,l=Do(i);return function(s){if(s===void 0)return s;if(t==="native"||s instanceof Date)return l(s);var d=o?da(t):ca(t);return l(d(s))}},Vo=function(e,n,t,r){var i,a,o,l,s=e.min,d=s===void 0?0:s,f=e.max,u=f===void 0?"auto":f,h=e.stacked,m=h!==void 0&&h,x=e.reverse,g=x!==void 0&&x,p=e.clamp,y=p!==void 0&&p,v=e.nice,S=v!==void 0&&v;d==="auto"?i=m===!0?(a=n.minStacked)!=null?a:0:n.min:i=d,u==="auto"?o=m===!0?(l=n.maxStacked)!=null?l:0:n.max:o=u;var k=Pa().rangeRound(r==="x"?[0,t]:[t,0]).domain(g?[o,i]:[i,o]).clamp(y);return S===!0?k.nice():typeof S=="number"&&k.nice(S),$o(k,m)},$o=function(e,n){n===void 0&&(n=!1);var t=e;return t.type="linear",t.stacked=n,t},Yo=function(e,n,t){var r=_a().range([0,t]).domain(n.all);return r.type="point",r},Ho=function(e,n,t,r){var i=e.round,a=i===void 0||i,o=Ga().range(r==="x"?[0,t]:[t,0]).domain(n.all).round(a);return zo(o)},zo=function(e){var n=e;return n.type="band",n},qo=function(e,n,t){var r,i,a=e.format,o=a===void 0?"native":a,l=e.precision,s=l===void 0?"millisecond":l,d=e.min,f=d===void 0?"auto":d,u=e.max,h=u===void 0?"auto":u,m=e.useUTC,x=m===void 0||m,g=e.nice,p=g!==void 0&&g,y=gr({format:o,precision:s,useUTC:x});r=f==="auto"?y(n.min):o!=="native"?y(f):f,i=h==="auto"?y(n.max):o!=="native"?y(h):h;var v=x?yo():Na();v.range([0,t]),r&&i&&v.domain([r,i]),p===!0?v.nice():typeof p!="object"&&typeof p!="number"||v.nice(p);var S=v;return S.type="time",S.useUTC=x,S},Uo=function(e,n,t,r){var i,a=e.base,o=a===void 0?10:a,l=e.min,s=l===void 0?"auto":l,d=e.max,f=d===void 0?"auto":d;if(n.all.some(function(g){return g===0}))throw new Error("a log scale domain must not include or cross zero");var u,h,m=!1;if(n.all.filter(function(g){return g!=null}).forEach(function(g){m||(i===void 0?i=Math.sign(g):Math.sign(g)!==i&&(m=!0))}),m)throw new Error("a log scale domain must be strictly-positive or strictly-negative");u=s==="auto"?n.min:s,h=f==="auto"?n.max:f;var x=Xi().domain([u,h]).rangeRound(r==="x"?[0,t]:[t,0]).base(o).nice();return x.type="log",x},Xo=function(e,n,t,r){var i,a,o=e.constant,l=o===void 0?1:o,s=e.min,d=s===void 0?"auto":s,f=e.max,u=f===void 0?"auto":f,h=e.reverse,m=h!==void 0&&h;i=d==="auto"?n.min:d,a=u==="auto"?n.max:u;var x=Ni().constant(l).rangeRound(r==="x"?[0,t]:[t,0]).nice();m===!0?x.domain([a,i]):x.domain([i,a]);var g=x;return g.type="symlog",g},No=function(e){return e==="x"?"y":"x"},Go=function(e,n){return e===n},_o=function(e,n){return e.getTime()===n.getTime()};function qn(e,n,t,r){switch(e.type){case"linear":return Vo(e,n,t,r);case"point":return Yo(e,n,t);case"band":return Ho(e,n,t,r);case"time":return qo(e,n,t);case"log":return Uo(e,n,t,r);case"symlog":return Xo(e,n,t,r);default:throw new Error("invalid scale spec")}}var ai=function(e,n,t){var r;if("stacked"in t&&t.stacked){var i=e.data[n==="x"?"xStacked":"yStacked"];return i==null?null:t(i)}return(r=t(e.data[n]))!=null?r:null},Ko=function(e,n,t,r,i){var a=e.map(function(f){return function(u){return jn({},u,{data:u.data.map(function(h){return{data:jn({},h)}})})}(f)}),o=Jo(a,n,t);"stacked"in n&&n.stacked===!0&&Qo(o,a),"stacked"in t&&t.stacked===!0&&Zo(o,a);var l=qn(n,o.x,r,"x"),s=qn(t,o.y,i,"y"),d=a.map(function(f){return jn({},f,{data:f.data.map(function(u){return jn({},u,{position:{x:ai(u,"x",l),y:ai(u,"y",s)}})})})});return jn({},o,{series:d,xScale:l,yScale:s})},Jo=function(e,n,t){return{x:oi(e,"x",n),y:oi(e,"y",t)}},oi=function(e,n,t,r){var i={},a=i.getValue,o=a===void 0?function(x){return x.data[n]}:a,l=i.setValue,s=l===void 0?function(x,g){x.data[n]=g}:l;if(t.type==="linear")e.forEach(function(x){x.data.forEach(function(g){var p=o(g);p&&s(g,parseFloat(String(p)))})});else if(t.type==="time"&&t.format!=="native"){var d=gr(t);e.forEach(function(x){x.data.forEach(function(g){var p=o(g);p&&s(g,d(p))})})}var f=[];switch(e.forEach(function(x){x.data.forEach(function(g){f.push(o(g))})}),t.type){case"linear":var u=fa(Xt(f).filter(function(x){return x!==null}),function(x){return x});return{all:u,min:Math.min.apply(Math,u),max:Math.max.apply(Math,u)};case"time":var h=Mt(f,function(x){return x.getTime()}).slice(0).sort(function(x,g){return g.getTime()-x.getTime()}).reverse();return{all:h,min:h[0],max:St(h)};default:var m=Xt(f);return{all:m,min:m[0],max:St(m)}}},xr=function(e,n,t){var r=No(e),i=[];n[r].all.forEach(function(a){var o=Ao(a)?_o:Go,l=[];t.forEach(function(s){var d=s.data.find(function(m){return o(m.data[r],a)}),f=null,u=null;if(d!==void 0){if((f=d.data[e])!==null){var h=St(l);h===void 0?u=f:h!==null&&(u=h+f)}d.data[e==="x"?"xStacked":"yStacked"]=u}l.push(u),u!==null&&i.push(u)})}),n[e].minStacked=Math.min.apply(Math,i),n[e].maxStacked=Math.max.apply(Math,i)},Qo=function(e,n){return xr("x",e,n)},Zo=function(e,n){return xr("y",e,n)},pr=function(e){var n=e.bandwidth();if(n===0)return e;var t=n/2;return e.round()&&(t=Math.round(t)),function(r){var i;return((i=e(r))!=null?i:0)+t}},yr={millisecond:[zn,zn],second:[wt,wt],minute:[Ji,or],hour:[Qi,lr],day:[Ue(function(e){return e.setHours(0,0,0,0)},function(e,n){return e.setDate(e.getDate()+n)},function(e,n){return(n.getTime()-e.getTime())/864e5},function(e){return Math.floor(e.getTime()/864e5)}),Ue(function(e){return e.setUTCHours(0,0,0,0)},function(e,n){return e.setUTCDate(e.getUTCDate()+n)},function(e,n){return(n.getTime()-e.getTime())/864e5},function(e){return Math.floor(e.getTime()/864e5)})],week:[Tt,jt],sunday:[Tt,jt],monday:[Zi,sr],tuesday:[er,ur],wednesday:[nr,dr],thursday:[tr,cr],friday:[ir,fr],saturday:[rr,hr],month:[ar,mr],year:[At,Rt]},el=Object.keys(yr),nl=new RegExp("^every\\s*(\\d+)?\\s*("+el.join("|")+")s?$","i"),br=function(e,n){if(Array.isArray(n))return n;if(typeof n=="string"&&"useUTC"in e){var t=n.match(nl);if(t){var r=t[1],i=t[2],a=yr[i][e.useUTC?1:0];if(i==="day"){var o,l,s=e.domain(),d=s[0],f=s[1],u=new Date(f);return u.setDate(u.getDate()+1),(o=(l=a.every(Number(r??1)))==null?void 0:l.range(d,u))!=null?o:[]}if(r===void 0)return e.ticks(a);var h=a.every(Number(r));if(h)return e.ticks(h)}throw new Error("Invalid tickValues: "+n)}if("ticks"in e){if(n===void 0)return e.ticks();if(typeof(m=n)=="number"&&isFinite(m)&&Math.floor(m)===m)return e.ticks(n)}var m;return e.domain()};function cn(){return cn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cn.apply(this,arguments)}var vr=function(e){var n,t=e.axis,r=e.scale,i=e.ticksPosition,a=e.tickValues,o=e.tickSize,l=e.tickPadding,s=e.tickRotation,d=e.truncateTickAt,f=e.engine,u=f===void 0?"svg":f,h=br(r,a),m=ga[u],x="bandwidth"in r?pr(r):r,g={lineX:0,lineY:0},p={textX:0,textY:0},y=typeof document=="object"&&document.dir==="rtl",v=m.align.center,S=m.baseline.center;return t==="x"?(n=function(k){var T;return{x:(T=x(k))!=null?T:0,y:0}},g.lineY=o*(i==="after"?1:-1),p.textY=(o+l)*(i==="after"?1:-1),S=i==="after"?m.baseline.top:m.baseline.bottom,s===0?v=m.align.center:i==="after"&&s<0||i==="before"&&s>0?(v=m.align[y?"left":"right"],S=m.baseline.center):(i==="after"&&s>0||i==="before"&&s<0)&&(v=m.align[y?"right":"left"],S=m.baseline.center)):(n=function(k){var T;return{x:0,y:(T=x(k))!=null?T:0}},g.lineX=o*(i==="after"?1:-1),p.textX=(o+l)*(i==="after"?1:-1),v=i==="after"?m.align.left:m.align.right),{ticks:h.map(function(k){var T=typeof k=="string"?function(W){var O=String(W).length;return d&&d>0&&O>d?""+String(W).slice(0,d).concat("..."):""+W}(k):k;return cn({key:k instanceof Date?""+k.valueOf():""+k,value:T},n(k),g,p)}),textAlign:v,textBaseline:S}},kr=function(e,n){if(e===void 0||typeof e=="function")return e;if(n.type==="time"){var t=ha(e);return function(r){return t(r instanceof Date?r:new Date(r))}}return ma(e)},Et=function(e){var n,t=e.width,r=e.height,i=e.scale,a=e.axis,o=e.values,l=(n=o,(Array.isArray(n)?o:void 0)||br(i,o)),s="bandwidth"in i?pr(i):i,d=a==="x"?l.map(function(f){var u,h;return{key:f instanceof Date?""+f.valueOf():""+f,x1:(u=s(f))!=null?u:0,x2:(h=s(f))!=null?h:0,y1:0,y2:r}}):l.map(function(f){var u,h;return{key:f instanceof Date?""+f.valueOf():""+f,x1:0,x2:t,y1:(u=s(f))!=null?u:0,y2:(h=s(f))!=null?h:0}});return d},tl=b.memo(function(e){var n,t=e.value,r=e.format,i=e.lineX,a=e.lineY,o=e.onClick,l=e.textBaseline,s=e.textAnchor,d=e.animatedProps,f=_e(),u=f.axis.ticks.line,h=f.axis.ticks.text,m=(n=r==null?void 0:r(t))!=null?n:t,x=b.useMemo(function(){var g={opacity:d.opacity};return o?{style:cn({},g,{cursor:"pointer"}),onClick:function(p){return o(p,m)}}:{style:g}},[d.opacity,o,m]);return c.jsxs(Te.g,cn({transform:d.transform},x,{children:[c.jsx("line",{x1:0,x2:i,y1:0,y2:a,style:u}),h.outlineWidth>0&&c.jsx(Te.text,{dominantBaseline:l,textAnchor:s,transform:d.textTransform,style:h,strokeWidth:2*h.outlineWidth,stroke:h.outlineColor,strokeLinejoin:"round",children:""+m}),c.jsx(Te.text,{dominantBaseline:l,textAnchor:s,transform:d.textTransform,style:xa(h),children:""+m})]}))}),il=function(e){var n=e.axis,t=e.scale,r=e.x,i=r===void 0?0:r,a=e.y,o=a===void 0?0:a,l=e.length,s=e.ticksPosition,d=e.tickValues,f=e.tickSize,u=f===void 0?5:f,h=e.tickPadding,m=h===void 0?5:h,x=e.tickRotation,g=x===void 0?0:x,p=e.format,y=e.renderTick,v=y===void 0?tl:y,S=e.truncateTickAt,k=e.legend,T=e.legendPosition,W=T===void 0?"end":T,O=e.legendOffset,E=O===void 0?0:O,M=e.onClick,C=e.ariaHidden,L=_e(),F=L.axis.legend.text,P=b.useMemo(function(){return kr(p,t)},[p,t]),X=vr({axis:n,scale:t,ticksPosition:s,tickValues:d,tickSize:u,tickPadding:m,tickRotation:g,truncateTickAt:S}),Y=X.ticks,H=X.textAlign,U=X.textBaseline,$=null;if(k!==void 0){var D,z=0,ie=0,me=0;n==="y"?(me=-90,z=E,W==="start"?(D="start",ie=l):W==="middle"?(D="middle",ie=l/2):W==="end"&&(D="end")):(ie=E,W==="start"?D="start":W==="middle"?(D="middle",z=l/2):W==="end"&&(D="end",z=l)),$=c.jsxs(c.Fragment,{children:[F.outlineWidth>0&&c.jsx("text",{transform:"translate("+z+", "+ie+") rotate("+me+")",textAnchor:D,style:cn({dominantBaseline:"central"},F),strokeWidth:2*F.outlineWidth,stroke:F.outlineColor,strokeLinejoin:"round",children:k}),c.jsx("text",{transform:"translate("+z+", "+ie+") rotate("+me+")",textAnchor:D,style:cn({dominantBaseline:"central"},F),children:k})]})}var Pe=wn(),be=Pe.animate,Fe=Pe.config,ge=Vn({transform:"translate("+i+","+o+")",lineX2:n==="x"?l:0,lineY2:n==="x"?0:l,config:Fe,immediate:!be}),ne=b.useCallback(function(V){return{opacity:1,transform:"translate("+V.x+","+V.y+")",textTransform:"translate("+V.textX+","+V.textY+") rotate("+g+")"}},[g]),te=b.useCallback(function(V){return{opacity:0,transform:"translate("+V.x+","+V.y+")",textTransform:"translate("+V.textX+","+V.textY+") rotate("+g+")"}},[g]),he=at(Y,{keys:function(V){return V.key},initial:ne,from:te,enter:ne,update:ne,leave:{opacity:0},config:Fe,immediate:!be});return c.jsxs(Te.g,{transform:ge.transform,"aria-hidden":C,children:[he(function(V,xe,Re,je){return b.createElement(v,cn({tickIndex:je,format:P,rotate:g,textBaseline:U,textAnchor:H,truncateTickAt:S,animatedProps:V},xe,M?{onClick:M}:{}))}),c.jsx(Te.line,{style:L.axis.domain.line,x1:0,x2:ge.lineX2,y1:0,y2:ge.lineY2}),$]})},rl=b.memo(il),Sr=["top","right","bottom","left"],Cr=b.memo(function(e){var n=e.xScale,t=e.yScale,r=e.width,i=e.height,a={top:e.top,right:e.right,bottom:e.bottom,left:e.left};return c.jsx(c.Fragment,{children:Sr.map(function(o){var l=a[o];if(!l)return null;var s=o==="top"||o==="bottom";return c.jsx(rl,cn({},l,{axis:s?"x":"y",x:o==="right"?r:0,y:o==="bottom"?i:0,scale:s?n:t,length:s?r:i,ticksPosition:o==="top"||o==="left"?"before":"after",truncateTickAt:l.truncateTickAt}),o)})})}),al=b.memo(function(e){var n=e.animatedProps,t=_e();return c.jsx(Te.line,cn({},n,t.grid.line))}),li=b.memo(function(e){var n=e.lines,t=wn(),r=t.animate,i=t.config,a=at(n,{keys:function(o){return o.key},initial:function(o){return{opacity:1,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2}},from:function(o){return{opacity:0,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2}},enter:function(o){return{opacity:1,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2}},update:function(o){return{opacity:1,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2}},leave:{opacity:0},config:i,immediate:!r});return c.jsx("g",{children:a(function(o,l){return b.createElement(al,cn({},l,{key:l.key,animatedProps:o}))})})}),Mr=b.memo(function(e){var n=e.width,t=e.height,r=e.xScale,i=e.yScale,a=e.xValues,o=e.yValues,l=b.useMemo(function(){return!!r&&Et({width:n,height:t,scale:r,axis:"x",values:a})},[r,a,n,t]),s=b.useMemo(function(){return!!i&&Et({width:n,height:t,scale:i,axis:"y",values:o})},[t,n,i,o]);return c.jsxs(c.Fragment,{children:[l&&c.jsx(li,{lines:l}),s&&c.jsx(li,{lines:s})]})}),ol=function(e,n){var t,r=n.axis,i=n.scale,a=n.x,o=a===void 0?0:a,l=n.y,s=l===void 0?0:l,d=n.length,f=n.ticksPosition,u=n.tickValues,h=n.tickSize,m=h===void 0?5:h,x=n.tickPadding,g=x===void 0?5:x,p=n.tickRotation,y=p===void 0?0:p,v=n.format,S=n.legend,k=n.legendPosition,T=k===void 0?"end":k,W=n.legendOffset,O=W===void 0?0:W,E=n.theme,M=vr({axis:r,scale:i,ticksPosition:f,tickValues:u,tickSize:m,tickPadding:g,tickRotation:y,engine:"canvas"}),C=M.ticks,L=M.textAlign,F=M.textBaseline;e.save(),e.translate(o,s),e.textAlign=L,e.textBaseline=F;var P=E.axis.ticks.text;e.font=(P.fontWeight?P.fontWeight+" ":"")+P.fontSize+"px "+P.fontFamily,((t=E.axis.domain.line.strokeWidth)!=null?t:0)>0&&(e.lineWidth=Number(E.axis.domain.line.strokeWidth),e.lineCap="square",E.axis.domain.line.stroke&&(e.strokeStyle=E.axis.domain.line.stroke),e.beginPath(),e.moveTo(0,0),e.lineTo(r==="x"?d:0,r==="x"?0:d),e.stroke());var X=typeof v=="function"?v:function(D){return""+D};if(C.forEach(function(D){var z;((z=E.axis.ticks.line.strokeWidth)!=null?z:0)>0&&(e.lineWidth=Number(E.axis.ticks.line.strokeWidth),e.lineCap="square",E.axis.ticks.line.stroke&&(e.strokeStyle=E.axis.ticks.line.stroke),e.beginPath(),e.moveTo(D.x,D.y),e.lineTo(D.x+D.lineX,D.y+D.lineY),e.stroke());var ie=X(D.value);e.save(),e.translate(D.x+D.textX,D.y+D.textY),e.rotate(Ct(y)),P.outlineWidth>0&&(e.strokeStyle=P.outlineColor,e.lineWidth=2*P.outlineWidth,e.lineJoin="round",e.strokeText(""+ie,0,0)),E.axis.ticks.text.fill&&(e.fillStyle=P.fill),e.fillText(""+ie,0,0),e.restore()}),S!==void 0){var Y=0,H=0,U=0,$="center";r==="y"?(U=-90,Y=O,T==="start"?($="start",H=d):T==="middle"?($="center",H=d/2):T==="end"&&($="end")):(H=O,T==="start"?$="start":T==="middle"?($="center",Y=d/2):T==="end"&&($="end",Y=d)),e.translate(Y,H),e.rotate(Ct(U)),e.font=(E.axis.legend.text.fontWeight?E.axis.legend.text.fontWeight+" ":"")+E.axis.legend.text.fontSize+"px "+E.axis.legend.text.fontFamily,E.axis.legend.text.fill&&(e.fillStyle=E.axis.legend.text.fill),e.textAlign=$,e.textBaseline="middle",e.fillText(S,0,0)}e.restore()},wr=function(e,n){var t=n.xScale,r=n.yScale,i=n.width,a=n.height,o=n.top,l=n.right,s=n.bottom,d=n.left,f=n.theme,u={top:o,right:l,bottom:s,left:d};Sr.forEach(function(h){var m=u[h];if(!m)return null;var x=h==="top"||h==="bottom",g=h==="top"||h==="left"?"before":"after",p=x?t:r,y=kr(m.format,p);ol(e,cn({},m,{axis:x?"x":"y",x:h==="right"?i:0,y:h==="bottom"?a:0,scale:p,format:y,length:x?i:a,ticksPosition:g,theme:f}))})},et=function(e,n){var t=n.width,r=n.height,i=n.scale,a=n.axis,o=n.values;Et({width:t,height:r,scale:i,axis:a,values:o}).forEach(function(l){e.beginPath(),e.moveTo(l.x1,l.y1),e.lineTo(l.x2,l.y2),e.stroke()})},yt,si;function ll(){if(si)return yt;si=1;var e=Jr(),n=0;function t(r){var i=++n;return e(r)+i}return yt=t,yt}var sl=ll();const ul=it(sl);function nn(){return nn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},nn.apply(this,arguments)}var Dt=b.memo(function(e){var n=e.point;return c.jsx(Ci,{id:c.jsxs("span",{children:["x: ",c.jsx("strong",{children:n.data.xFormatted}),", y:"," ",c.jsx("strong",{children:n.data.yFormatted})]}),enableChip:!0,color:n.serieColor})}),Tr=b.memo(function(e){var n=e.slice,t=e.axis,r=_e(),i=t==="x"?"y":"x";return c.jsx(pa,{rows:n.points.map(function(a){return[c.jsx(ya,{color:a.serieColor,style:r.tooltip.chip},"chip"),a.serieId,c.jsx("span",{style:r.tooltip.tableCellValue,children:a.data[i+"Formatted"]},"value")]})})}),jr={curve:"linear",xScale:{type:"point"},yScale:{type:"linear",min:0,max:"auto"},layers:["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"],axisBottom:{},axisLeft:{},enableGridX:!0,enableGridY:!0,enablePoints:!0,pointSize:6,pointColor:{from:"color"},pointBorderWidth:0,pointBorderColor:{theme:"background"},enablePointLabel:!1,pointLabel:"yFormatted",colors:{scheme:"nivo"},enableArea:!1,areaBaselineValue:0,areaOpacity:.2,areaBlendMode:"normal",lineWidth:2,legends:[],isInteractive:!0,tooltip:Dt,enableSlices:!1,debugSlices:!1,sliceTooltip:Tr,debugMesh:!1,enableCrosshair:!0,crosshairType:"bottom-left"},kn=nn({},jr,{enablePointLabel:!1,useMesh:!1,enableTouchCrosshair:!1,animate:!0,motionConfig:"gentle",defs:[],fill:[],role:"img",initialHiddenIds:[]});nn({},jr,{pixelRatio:typeof window<"u"&&window.devicePixelRatio||1});var dl=function(e){var n=e.curve;return b.useMemo(function(){return Di().defined(function(t){return t.x!==null&&t.y!==null}).x(function(t){return t.x}).y(function(t){return t.y}).curve(Ii(n))},[n])},cl=function(e){var n=e.curve,t=e.yScale,r=e.areaBaselineValue;return b.useMemo(function(){return bo().defined(function(i){return i.x!==null&&i.y!==null}).x(function(i){return i.x}).y1(function(i){return i.y}).curve(Ii(n)).y0(t(r))},[n,t,r])},fl=function(e){var n=e.componentId,t=e.enableSlices,r=e.points,i=e.width,a=e.height;return b.useMemo(function(){if(t===!1)return[];if(t==="x"){var o=new Map;return r.forEach(function(s){s.data.x!==null&&s.data.y!==null&&(o.has(s.x)?o.get(s.x).push(s):o.set(s.x,[s]))}),Array.from(o.entries()).sort(function(s,d){return s[0]-d[0]}).map(function(s,d,f){var u,h,m=s[0],x=s[1],g=f[d-1],p=f[d+1];return u=g?m-(m-g[0])/2:m,h=p?m-u+(p[0]-m)/2:i-u,{id:"slice:"+n+":"+m,x0:u,x:m,y0:0,y:0,width:h,height:a,points:x.reverse()}})}if(t==="y"){var l=new Map;return r.forEach(function(s){s.data.x!==null&&s.data.y!==null&&(l.has(s.y)?l.get(s.y).push(s):l.set(s.y,[s]))}),Array.from(l.entries()).sort(function(s,d){return s[0]-d[0]}).map(function(s,d,f){var u,h,m=s[0],x=s[1],g=f[d-1],p=f[d+1];return u=g?m-(m-g[0])/2:m,h=p?m-u+(p[0]-m)/2:a-u,{id:m,x0:0,x:0,y0:u,y:m,width:i,height:h,points:x.reverse()}})}},[n,t,a,r,i])},hl="line",Er=function(e){var n=e.data,t=e.xScale,r=t===void 0?kn.xScale:t,i=e.xFormat,a=e.yScale,o=a===void 0?kn.yScale:a,l=e.yFormat,s=e.width,d=e.height,f=e.colors,u=f===void 0?kn.colors:f,h=e.curve,m=h===void 0?kn.curve:h,x=e.areaBaselineValue,g=x===void 0?kn.areaBaselineValue:x,p=e.pointColor,y=p===void 0?kn.pointColor:p,v=e.pointBorderColor,S=v===void 0?kn.pointBorderColor:v,k=e.enableSlices,T=k===void 0?kn.enableSlicesTooltip:k,W=e.initialHiddenIds,O=W===void 0?kn.initialHiddenIds:W,E=b.useState(ul(hl))[0],M=Jn(i),C=Jn(l),L=Li(u,"id"),F=_e(),P=Rn(y,F),X=Rn(S,F),Y=b.useState(O??[]),H=Y[0],U=Y[1],$=b.useMemo(function(){return Ko(n.filter(function(te){return H.indexOf(te.id)===-1}),r,o,s,d)},[n,H,r,o,s,d]),D=$.xScale,z=$.yScale,ie=$.series,me=b.useMemo(function(){var te=n.map(function(V){return{id:V.id,label:V.id,color:L(V)}}),he=te.map(function(V){return nn({},ie.find(function(xe){return xe.id===V.id}),{color:V.color})}).filter(function(V){return!!V.id});return{legendData:te.map(function(V){return nn({},V,{hidden:!he.find(function(xe){return xe.id===V.id})})}).reverse(),series:he}},[n,ie,L]),Pe=me.legendData,be=me.series,Fe=b.useCallback(function(te){U(function(he){return he.indexOf(te)>-1?he.filter(function(V){return V!==te}):[].concat(he,[te])})},[]),ge=function(te){var he=te.series,V=te.getPointColor,xe=te.getPointBorderColor,Re=te.formatX,je=te.formatY;return b.useMemo(function(){return he.reduce(function(Ke,De){return[].concat(Ke,De.data.filter(function(ve){return ve.position.x!==null&&ve.position.y!==null}).map(function(ve,Ve){var Ee={id:De.id+"."+Ve,index:Ke.length+Ve,serieId:De.id,serieColor:De.color,x:ve.position.x,y:ve.position.y};return Ee.color=V(De),Ee.borderColor=xe(Ee),Ee.data=nn({},ve.data,{xFormatted:Re(ve.data.x),yFormatted:je(ve.data.y)}),Ee}))},[])},[he,V,xe,Re,je])}({series:be,getPointColor:P,getPointBorderColor:X,formatX:M,formatY:C}),ne=fl({componentId:E,enableSlices:T,points:ge,width:s,height:d});return{legendData:Pe,toggleSerie:Fe,lineGenerator:dl({curve:m}),areaGenerator:cl({curve:m,yScale:z,areaBaselineValue:g}),getColor:L,series:be,xScale:D,yScale:z,slices:ne,points:ge}},ml=function(e){var n=e.areaBlendMode,t=e.areaOpacity,r=e.color,i=e.fill,a=e.path,o=wn(),l=o.animate,s=o.config,d=Pt(a),f=Vn({color:r,config:s,immediate:!l});return c.jsx(Te.path,{d,fill:i||f.color,fillOpacity:t,strokeWidth:0,style:{mixBlendMode:n}})},gl=b.memo(function(e){var n=e.areaGenerator,t=e.areaOpacity,r=e.areaBlendMode,i=e.lines.slice(0).reverse();return c.jsx("g",{children:i.map(function(a){return c.jsx(ml,nn({path:n(a.data.map(function(o){return o.position}))},nn({areaOpacity:t,areaBlendMode:r},a)),a.id)})})}),xl=b.memo(function(e){var n=e.lineGenerator,t=e.points,r=e.color,i=e.thickness,a=b.useMemo(function(){return n(t)},[n,t]),o=Pt(a);return c.jsx(Te.path,{d:o,fill:"none",strokeWidth:i,stroke:r})}),pl=b.memo(function(e){var n=e.lines,t=e.lineGenerator,r=e.lineWidth;return n.slice(0).reverse().map(function(i){var a=i.id,o=i.data,l=i.color;return c.jsx(xl,{id:a,points:o.map(function(s){return s.position}),lineGenerator:t,color:l,thickness:r},a)})}),yl=b.memo(function(e){var n=e.slice,t=e.slices,r=e.axis,i=e.debug,a=e.tooltip,o=e.isCurrent,l=e.setCurrent,s=e.onMouseEnter,d=e.onMouseMove,f=e.onMouseLeave,u=e.onClick,h=e.onTouchStart,m=e.onTouchMove,x=e.onTouchEnd,g=Gn(),p=g.showTooltipFromEvent,y=g.hideTooltip,v=b.useCallback(function(M){p(b.createElement(a,{slice:n,axis:r}),M,"right"),l(n),s&&s(n,M)},[p,a,n,r,l,s]),S=b.useCallback(function(M){p(b.createElement(a,{slice:n,axis:r}),M,"right"),d&&d(n,M)},[p,a,n,r,d]),k=b.useCallback(function(M){y(),l(null),f&&f(n,M)},[y,l,f,n]),T=b.useCallback(function(M){u&&u(n,M)},[n,u]),W=b.useCallback(function(M){p(b.createElement(a,{slice:n,axis:r}),M,"right"),l(n),h&&h(n,M)},[r,h,l,p,n,a]),O=b.useCallback(function(M){var C=M.touches[0],L=document.elementFromPoint(C.clientX,C.clientY),F=L==null?void 0:L.getAttribute("data-ref");if(F){var P=t.find(function(X){return X.id===F});P&&(p(b.createElement(a,{slice:P,axis:r}),M,"right"),l(P))}m&&m(n,M)},[r,m,l,p,n,t,a]),E=b.useCallback(function(M){y(),l(null),x&&x(n,M)},[y,l,x,n]);return c.jsx("rect",{x:n.x0,y:n.y0,width:n.width,height:n.height,stroke:"red",strokeWidth:i?1:0,strokeOpacity:.75,fill:"red",fillOpacity:o&&i?.35:0,onMouseEnter:v,onMouseMove:S,onMouseLeave:k,onClick:T,onTouchStart:W,onTouchMove:O,onTouchEnd:E,"data-ref":n.id})}),bl=b.memo(function(e){var n=e.slices,t=e.axis,r=e.debug,i=e.height,a=e.tooltip,o=e.current,l=e.setCurrent,s=e.onMouseEnter,d=e.onMouseMove,f=e.onMouseLeave,u=e.onClick,h=e.onTouchStart,m=e.onTouchMove,x=e.onTouchEnd;return n.map(function(g){return c.jsx(yl,{slice:g,slices:n,axis:t,debug:r,height:i,tooltip:a,setCurrent:l,isCurrent:o!==null&&o.id===g.id,onMouseEnter:s,onMouseMove:d,onMouseLeave:f,onClick:u,onTouchStart:h,onTouchMove:m,onTouchEnd:x},g.id)})}),vl=b.memo(function(e){var n=e.points,t=e.symbol,r=e.size,i=e.borderWidth,a=e.enableLabel,o=e.label,l=e.labelYOffset,s=_e(),d=ba(o),f=n.slice(0).reverse().map(function(u){return{id:u.id,x:u.x,y:u.y,datum:u.data,fill:u.color,stroke:u.borderColor,label:a?d(u):null}});return c.jsx("g",{children:f.map(function(u){return c.jsx(va,{x:u.x,y:u.y,datum:u.datum,symbol:t,size:r,color:u.fill,borderWidth:i,borderColor:u.stroke,label:u.label,labelYOffset:l,theme:s},u.id)})})}),kl=b.memo(function(e){var n=e.points,t=e.width,r=e.height,i=e.margin,a=e.setCurrent,o=e.onMouseEnter,l=e.onMouseMove,s=e.onMouseLeave,d=e.onClick,f=e.onTouchStart,u=e.onTouchMove,h=e.onTouchEnd,m=e.tooltip,x=e.debug,g=e.enableTouchCrosshair,p=Gn(),y=p.showTooltipAt,v=p.hideTooltip,S=b.useCallback(function(C,L){y(b.createElement(m,{point:C}),[C.x+i.left,C.y+i.top],"top"),o&&o(C,L)},[y,m,o,i]),k=b.useCallback(function(C,L){y(b.createElement(m,{point:C}),[C.x+i.left,C.y+i.top],"top"),l&&l(C,L)},[y,m,i.left,i.top,l]),T=b.useCallback(function(C,L){v(),s&&s(C,L)},[v,s]),W=b.useCallback(function(C,L){d&&d(C,L)},[d]),O=b.useCallback(function(C,L){y(b.createElement(m,{point:C}),[C.x+i.left,C.y+i.top],"top"),f&&f(C,L)},[i.left,i.top,f,y,m]),E=b.useCallback(function(C,L){y(b.createElement(m,{point:C}),[C.x+i.left,C.y+i.top],"top"),u&&u(C,L)},[i.left,i.top,u,y,m]),M=b.useCallback(function(C,L){v(),h&&h(C,L)},[h,v]);return c.jsx(ka,{nodes:n,width:t,height:r,setCurrent:a,onMouseEnter:S,onMouseMove:k,onMouseLeave:T,onClick:W,onTouchStart:O,onTouchMove:E,onTouchEnd:M,enableTouchCrosshair:g,debug:x})}),Sl=Si(function(e){var n=e.data,t=e.xScale,r=t===void 0?{type:"point"}:t,i=e.xFormat,a=e.yScale,o=a===void 0?{type:"linear",min:0,max:"auto"}:a,l=e.yFormat,s=e.layers,d=s===void 0?["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"]:s,f=e.curve,u=f===void 0?"linear":f,h=e.areaBaselineValue,m=h===void 0?0:h,x=e.colors,g=x===void 0?{scheme:"nivo"}:x,p=e.margin,y=e.width,v=e.height,S=e.axisTop,k=e.axisRight,T=e.axisBottom,W=T===void 0?{}:T,O=e.axisLeft,E=O===void 0?{}:O,M=e.enableGridX,C=M===void 0||M,L=e.enableGridY,F=L===void 0||L,P=e.gridXValues,X=e.gridYValues,Y=e.lineWidth,H=Y===void 0?2:Y,U=e.enableArea,$=U!==void 0&&U,D=e.areaOpacity,z=D===void 0?.2:D,ie=e.areaBlendMode,me=ie===void 0?"normal":ie,Pe=e.enablePoints,be=Pe===void 0||Pe,Fe=e.pointSymbol,ge=e.pointSize,ne=ge===void 0?6:ge,te=e.pointColor,he=te===void 0?{from:"color"}:te,V=e.pointBorderWidth,xe=V===void 0?0:V,Re=e.pointBorderColor,je=Re===void 0?{theme:"background"}:Re,Ke=e.enablePointLabel,De=Ke!==void 0&&Ke,ve=e.pointLabel,Ve=ve===void 0?"data.yFormatted":ve,Ee=e.pointLabelYOffset,ln=e.defs,dn=ln===void 0?[]:ln,We=e.fill,fn=We===void 0?[]:We,tn=e.markers,$e=e.legends,Ye=$e===void 0?[]:$e,ke=e.isInteractive,Le=ke===void 0||ke,Ie=e.useMesh,pe=Ie!==void 0&&Ie,oe=e.debugMesh,Me=oe!==void 0&&oe,Xe=e.onMouseEnter,Je=e.onMouseMove,en=e.onMouseLeave,ue=e.onClick,Se=e.onTouchStart,Qe=e.onTouchMove,I=e.onTouchEnd,q=e.tooltip,Q=q===void 0?Dt:q,de=e.enableSlices,Ce=de!==void 0&&de,ce=e.debugSlices,ye=ce!==void 0&&ce,He=e.sliceTooltip,Ne=He===void 0?Tr:He,Ge=e.enableCrosshair,rn=Ge===void 0||Ge,an=e.crosshairType,hn=an===void 0?"bottom-left":an,sn=e.enableTouchCrosshair,w=sn!==void 0&&sn,A=e.role,N=A===void 0?"img":A,ae=e.initialHiddenIds,G=ae===void 0?[]:ae,we=lt(y,v,p),ze=we.margin,Be=we.innerWidth,le=we.innerHeight,Sn=we.outerWidth,In=we.outerHeight,qe=Er({data:n,xScale:r,xFormat:i,yScale:o,yFormat:l,width:Be,height:le,colors:g,curve:u,areaBaselineValue:m,pointColor:he,pointBorderColor:je,enableSlices:Ce,initialHiddenIds:G}),yn=qe.legendData,Yn=qe.toggleSerie,B=qe.lineGenerator,R=qe.areaGenerator,_=qe.series,Z=qe.xScale,K=qe.yScale,Oe=qe.slices,fe=qe.points,re=_e(),bn=Rn(he,re),Bn=Rn(je,re),gn=b.useState(null),vn=gn[0],on=gn[1],On=b.useState(null),j=On[0],xn=On[1],un={grid:c.jsx(Mr,{theme:re,width:Be,height:le,xScale:C?Z:null,yScale:F?K:null,xValues:P,yValues:X},"grid"),markers:c.jsx(wi,{markers:tn,width:Be,height:le,xScale:Z,yScale:K,theme:re},"markers"),axes:c.jsx(Cr,{xScale:Z,yScale:K,width:Be,height:le,theme:re,top:S,right:k,bottom:W,left:E},"axes"),areas:null,lines:c.jsx(pl,{lines:_,lineGenerator:B,lineWidth:H},"lines"),slices:null,points:null,crosshair:null,mesh:null,legends:Ye.map(function(Tn,ct){return c.jsx(Mi,nn({},Tn,{containerWidth:Be,containerHeight:le,data:Tn.data||yn,theme:re,toggleSerie:Tn.toggleSerie?Yn:void 0}),"legend."+ct)})},mn=Ti(dn,_,fn);return $&&(un.areas=c.jsx(gl,{areaGenerator:R,areaOpacity:z,areaBlendMode:me,lines:_},"areas")),Le&&Ce!==!1&&(un.slices=c.jsx(bl,{slices:Oe,axis:Ce,debug:ye,height:le,tooltip:Ne,current:j,setCurrent:xn,onMouseEnter:Xe,onMouseMove:Je,onMouseLeave:en,onClick:ue,onTouchStart:Se,onTouchMove:Qe,onTouchEnd:I},"slices")),be&&(un.points=c.jsx(vl,{points:fe,symbol:Fe,size:ne,color:bn,borderWidth:xe,borderColor:Bn,enableLabel:De,label:Ve,labelYOffset:Ee},"points")),Le&&rn&&(vn!==null&&(un.crosshair=c.jsx(qt,{width:Be,height:le,x:vn.x,y:vn.y,type:hn},"crosshair")),j!==null&&(un.crosshair=c.jsx(qt,{width:Be,height:le,x:j.x,y:j.y,type:Ce},"crosshair"))),Le&&pe&&Ce===!1&&(un.mesh=c.jsx(kl,{points:fe,width:Be,height:le,margin:ze,current:vn,setCurrent:on,onMouseEnter:Xe,onMouseMove:Je,onMouseLeave:en,onClick:ue,onTouchStart:Se,onTouchMove:Qe,onTouchEnd:I,tooltip:Q,enableTouchCrosshair:w,debug:Me},"mesh")),c.jsx(ji,{defs:mn,width:Sn,height:In,margin:ze,role:N,children:d.map(function(Tn,ct){return typeof Tn=="function"?c.jsx(b.Fragment,{children:Tn(nn({},e,{innerWidth:Be,innerHeight:le,series:_,slices:Oe,points:fe,xScale:Z,yScale:K,lineGenerator:B,areaGenerator:R,currentPoint:vn,setCurrentPoint:on,currentSlice:j,setCurrentSlice:xn}))},ct):un[Tn]})})}),Cl=function(e){return c.jsx(ot,{children:function(n){var t=n.width,r=n.height;return c.jsx(Sl,nn({width:t,height:r},e))}})},Ml=Si(function(e){var n=b.useRef(null),t=e.width,r=e.height,i=e.margin,a=e.pixelRatio,o=a===void 0?typeof window<"u"&&window.devicePixelRatio||1:a,l=e.data,s=e.xScale,d=s===void 0?{type:"point"}:s,f=e.xFormat,u=e.yScale,h=u===void 0?{type:"linear",min:0,max:"auto"}:u,m=e.yFormat,x=e.curve,g=x===void 0?"linear":x,p=e.layers,y=p===void 0?["grid","markers","axes","areas","crosshair","lines","points","slices","mesh","legends"]:p,v=e.colors,S=v===void 0?{scheme:"nivo"}:v,k=e.lineWidth,T=k===void 0?2:k,W=e.enableArea,O=W!==void 0&&W,E=e.areaBaselineValue,M=E===void 0?0:E,C=e.areaOpacity,L=C===void 0?.2:C,F=e.enablePoints,P=F===void 0||F,X=e.pointSize,Y=X===void 0?6:X,H=e.pointColor,U=H===void 0?{from:"color"}:H,$=e.pointBorderWidth,D=$===void 0?0:$,z=e.pointBorderColor,ie=z===void 0?{theme:"background"}:z,me=e.enableGridX,Pe=me===void 0||me,be=e.gridXValues,Fe=e.enableGridY,ge=Fe===void 0||Fe,ne=e.gridYValues,te=e.axisTop,he=e.axisRight,V=e.axisBottom,xe=V===void 0?{}:V,Re=e.axisLeft,je=Re===void 0?{}:Re,Ke=e.legends,De=Ke===void 0?[]:Ke,ve=e.isInteractive,Ve=ve===void 0||ve,Ee=e.debugMesh,ln=Ee!==void 0&&Ee,dn=e.onMouseLeave,We=e.onClick,fn=e.tooltip,tn=fn===void 0?Dt:fn,$e=e.canvasRef,Ye=lt(t,r,i),ke=Ye.margin,Le=Ye.innerWidth,Ie=Ye.innerHeight,pe=Ye.outerWidth,oe=Ye.outerHeight,Me=_e(),Xe=b.useState(null),Je=Xe[0],en=Xe[1],ue=Er({data:l,xScale:d,xFormat:f,yScale:h,yFormat:m,width:Le,height:Ie,colors:S,curve:g,areaBaselineValue:M,pointColor:U,pointBorderColor:ie}),Se=ue.lineGenerator,Qe=ue.areaGenerator,I=ue.series,q=ue.xScale,Q=ue.yScale,de=ue.points,Ce=Sa({points:de,width:Le,height:Ie,debug:ln}),ce=Ce.delaunay,ye=Ce.voronoi;b.useEffect(function(){$e&&($e.current=n.current),n.current.width=pe*o,n.current.height=oe*o;var w=n.current.getContext("2d");w.scale(o,o),w.fillStyle=Me.background,w.fillRect(0,0,pe,oe),w.translate(ke.left,ke.top),y.forEach(function(A){if(typeof A=="function"&&A({ctx:w,innerWidth:Le,innerHeight:Ie,series:I,points:de,xScale:q,yScale:Q,lineWidth:T,lineGenerator:Se,areaGenerator:Qe,currentPoint:Je,setCurrentPoint:en}),A==="grid"&&Me.grid.line.strokeWidth>0&&(w.lineWidth=Me.grid.line.strokeWidth,w.strokeStyle=Me.grid.line.stroke,Pe&&et(w,{width:Le,height:Ie,scale:q,axis:"x",values:be}),ge&&et(w,{width:Le,height:Ie,scale:Q,axis:"y",values:ne})),A==="axes"&&wr(w,{xScale:q,yScale:Q,width:Le,height:Ie,top:te,right:he,bottom:xe,left:je,theme:Me}),A==="areas"&&O===!0){w.save(),w.globalAlpha=L,Qe.context(w);for(var N=I.length-1;N>=0;N--)w.fillStyle=I[N].color,w.beginPath(),Qe(I[N].data.map(function(G){return G.position})),w.fill();w.restore()}if(A==="lines"&&(Se.context(w),I.forEach(function(G){w.strokeStyle=G.color,w.lineWidth=T,w.beginPath(),Se(G.data.map(function(we){return we.position})),w.stroke()})),A==="points"&&P===!0&&Y>0&&de.forEach(function(G){w.fillStyle=G.color,w.beginPath(),w.arc(G.x,G.y,Y/2,0,2*Math.PI),w.fill(),D>0&&(w.strokeStyle=G.borderColor,w.lineWidth=D,w.stroke())}),A==="mesh"&&ln===!0&&(Ca(w,ye),Je&&Ma(w,ye,Je.index)),A==="legends"){var ae=I.map(function(G){return{id:G.id,label:G.id,color:G.color}}).reverse();De.forEach(function(G){Ei(w,nn({},G,{data:G.data||ae,containerWidth:Le,containerHeight:Ie,theme:Me}))})}})},[n,pe,oe,y,Me,Se,I,q,Q,Pe,be,ge,ne,te,he,xe,je,De,de,P,Y,Je]);var He=b.useCallback(function(w){var A=_n(n.current,w),N=A[0],ae=A[1];if(!Wi(ke.left,ke.top,Le,Ie,N,ae))return null;var G=ce.find(N-ke.left,ae-ke.top);return de[G]},[n,ke,Le,Ie,ce]),Ne=Gn(),Ge=Ne.showTooltipFromEvent,rn=Ne.hideTooltip,an=b.useCallback(function(w){var A=He(w);en(A),A?Ge(b.createElement(tn,{point:A}),w):rn()},[He,en,Ge,rn,tn]),hn=b.useCallback(function(w){rn(),en(null),Je&&dn&&dn(Je,w)},[rn,en,dn]),sn=b.useCallback(function(w){if(We){var A=He(w);A&&We(A,w)}},[He,We]);return c.jsx("canvas",{ref:n,width:pe*o,height:oe*o,style:{width:pe,height:oe,cursor:Ve?"auto":"normal"},onMouseEnter:Ve?an:void 0,onMouseMove:Ve?an:void 0,onMouseLeave:Ve?hn:void 0,onClick:Ve?sn:void 0})}),wl=b.forwardRef(function(e,n){return c.jsx(Ml,nn({},e,{canvasRef:n}))});b.forwardRef(function(e,n){return c.jsx(ot,{children:function(t){var r=t.width,i=t.height;return c.jsx(wl,nn({width:r,height:i},e,{ref:n}))}})});const Wr=({formattedValue:e,color:n,date:t,id:r})=>c.jsxs(Bt,{p:1,"data-testid":"chart-tooltip",children:[c.jsxs(Ot,{"data-testid":"chart-tooltip-id",children:[c.jsx(Qr,{size:4,bg:n}),c.jsx(Kn,{children:r})]}),c.jsx(eo,{date:t,isShort:!0}),c.jsx(Kn,{fontWeight:"bold","data-testid":"chart-tooltip-value",children:e})]}),Tl=({data:e,metricName:n,"aria-label":t,chartTheme:r,...i})=>{const{t:a}=Mn(),{colors:o}=rt();if(!n)return null;const l={x:Math.min(...e.map(x=>x.value)),y:Math.max(...e.map(x=>x.value))},{suffix:s,device:d,id:f}=En(n);let u=a(`metrics.${d}.${s}`).replaceAll("."," ");u=`${u} - ${f}`;const h=(r==null?void 0:r.colourScheme)||"red",m=o[h][500];return c.jsx(Cn,{w:"100%",...i,role:"application","aria-label":t,children:c.jsx(Cl,{useMesh:!0,role:"none",data:[{id:u,color:"red",data:[...e].reverse().map(x=>({x:Hn.fromISO(x.sampleTime).toMillis(),y:x.value}))}],colors:[m],margin:{top:0,right:10,bottom:70,left:50},yScale:{type:"linear",min:l.x,max:l.y,stacked:!0},curve:"monotoneX",axisBottom:{format:x=>Hn.fromMillis(x).diffNow(["second"]).negate().mapUnits(y=>Math.floor(y)).rescale().as("seconds"),legend:a("metrics.charts.LineChart.ariaLabel.legend"),legendOffset:36,legendPosition:"middle"},tooltip:x=>c.jsx(Wr,{color:x.point.serieColor,id:x.point.serieId,date:Hn.fromMillis(x.point.data.x),formattedValue:x.point.data.yFormatted.toString()}),legends:[{direction:"row",anchor:"bottom-right",itemDirection:"right-to-left",translateY:70,itemWidth:0,itemHeight:20,effects:[{on:"hover",style:{itemOpacity:1}}]}]})})};var bt,ui;function jl(){if(ui)return bt;ui=1;var e=La();function n(t,r){var i=[];return e(t,function(a,o,l){r(a,o,l)&&i.push(a)}),i}return bt=n,bt}var vt,di;function El(){if(di)return vt;di=1;var e=Zr(),n=jl(),t=Oi(),r=ea();function i(a,o){var l=r(a)?e:n;return l(a,t(o,3))}return vt=i,vt}var Wl=El();const Ll=it(Wl);function pn(){return pn=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pn.apply(this,arguments)}var Wt={dotSize:4,noteWidth:120,noteTextOffset:8},Il=function(e){var n=typeof e;return b.isValidElement(e)||n==="string"||n==="function"||n==="object"},Bl=function(e){var n=typeof e;return n==="string"||n==="function"},Un=function(e){return e.type==="circle"},Lt=function(e){return e.type==="dot"},Xn=function(e){return e.type==="rect"},Ol=function(e){var n=e.data,t=e.annotations,r=e.getPosition,i=e.getDimensions;return t.reduce(function(a,o){var l=o.offset||0;return[].concat(a,Ll(n,o.match).map(function(s){var d=r(s),f=i(s);return(Un(o)||Xn(o))&&(f.size=f.size+2*l,f.width=f.width+2*l,f.height=f.height+2*l),pn({},Pi(o,["match","offset"]),d,f,{size:o.size||f.size,datum:s})}))},[])},Pl=function(e,n,t,r){var i=Math.atan2(r-n,t-e);return Ta(ja(i))},Lr=function(e){var n,t,r=e.x,i=e.y,a=e.noteX,o=e.noteY,l=e.noteWidth,s=l===void 0?Wt.noteWidth:l,d=e.noteTextOffset,f=d===void 0?Wt.noteTextOffset:d;if(Nt(a))n=r+a;else{if(a.abs===void 0)throw new Error("noteX should be either a number or an object containing an 'abs' property");n=a.abs}if(Nt(o))t=i+o;else{if(o.abs===void 0)throw new Error("noteY should be either a number or an object containing an 'abs' property");t=o.abs}var u=r,h=i,m=Pl(r,i,n,t);if(Un(e)){var x=wa(Ct(m),e.size/2);u+=x.x,h+=x.y}if(Xn(e)){var g=Math.round((m+90)/45)%8;g===0&&(h-=e.height/2),g===1&&(u+=e.width/2,h-=e.height/2),g===2&&(u+=e.width/2),g===3&&(u+=e.width/2,h+=e.height/2),g===4&&(h+=e.height/2),g===5&&(u-=e.width/2,h+=e.height/2),g===6&&(u-=e.width/2),g===7&&(u-=e.width/2,h-=e.height/2)}var p=n,y=n;return(m+90)%360>180?(p-=s,y-=s):y+=s,{points:[[u,h],[n,t],[y,t]],text:[p,t-f],angle:m+90}},Ir=function(e){var n=e.data,t=e.annotations,r=e.getPosition,i=e.getDimensions;return b.useMemo(function(){return Ol({data:n,annotations:t,getPosition:r,getDimensions:i})},[n,t,r,i])},Fl=function(e){var n=e.annotations;return b.useMemo(function(){return n.map(function(t){return pn({},t,{computed:Lr(pn({},t))})})},[n])},Al=function(e){return b.useMemo(function(){return Lr(e)},[e])},Rl=function(e){var n=e.datum,t=e.x,r=e.y,i=e.note,a=_e(),o=wn(),l=o.animate,s=o.config,d=Vn({x:t,y:r,config:s,immediate:!l});return typeof i=="function"?b.createElement(i,{x:t,y:r,datum:n}):c.jsxs(c.Fragment,{children:[a.annotations.text.outlineWidth>0&&c.jsx(Te.text,{x:d.x,y:d.y,style:pn({},a.annotations.text,{strokeLinejoin:"round",strokeWidth:2*a.annotations.text.outlineWidth,stroke:a.annotations.text.outlineColor}),children:i}),c.jsx(Te.text,{x:d.x,y:d.y,style:Pi(a.annotations.text,["outlineWidth","outlineColor"]),children:i})]})},ci=function(e){var n=e.points,t=e.isOutline,r=t!==void 0&&t,i=_e(),a=b.useMemo(function(){var s=n[0];return n.slice(1).reduce(function(d,f){return d+" L"+f[0]+","+f[1]},"M"+s[0]+","+s[1])},[n]),o=Pt(a);if(r&&i.annotations.link.outlineWidth<=0)return null;var l=pn({},i.annotations.link);return r&&(l.strokeLinecap="square",l.strokeWidth=i.annotations.link.strokeWidth+2*i.annotations.link.outlineWidth,l.stroke=i.annotations.link.outlineColor,l.opacity=i.annotations.link.outlineOpacity),c.jsx(Te.path,{fill:"none",d:o,style:l})},Dl=function(e){var n=e.x,t=e.y,r=e.size,i=_e(),a=wn(),o=a.animate,l=a.config,s=Vn({x:n,y:t,radius:r/2,config:l,immediate:!o});return c.jsxs(c.Fragment,{children:[i.annotations.outline.outlineWidth>0&&c.jsx(Te.circle,{cx:s.x,cy:s.y,r:s.radius,style:pn({},i.annotations.outline,{fill:"none",strokeWidth:i.annotations.outline.strokeWidth+2*i.annotations.outline.outlineWidth,stroke:i.annotations.outline.outlineColor,opacity:i.annotations.outline.outlineOpacity})}),c.jsx(Te.circle,{cx:s.x,cy:s.y,r:s.radius,style:i.annotations.outline})]})},Vl=function(e){var n=e.x,t=e.y,r=e.size,i=r===void 0?Wt.dotSize:r,a=_e(),o=wn(),l=o.animate,s=o.config,d=Vn({x:n,y:t,radius:i/2,config:s,immediate:!l});return c.jsxs(c.Fragment,{children:[a.annotations.outline.outlineWidth>0&&c.jsx(Te.circle,{cx:d.x,cy:d.y,r:d.radius,style:pn({},a.annotations.outline,{fill:"none",strokeWidth:2*a.annotations.outline.outlineWidth,stroke:a.annotations.outline.outlineColor,opacity:a.annotations.outline.outlineOpacity})}),c.jsx(Te.circle,{cx:d.x,cy:d.y,r:d.radius,style:a.annotations.symbol})]})},$l=function(e){var n=e.x,t=e.y,r=e.width,i=e.height,a=e.borderRadius,o=a===void 0?6:a,l=_e(),s=wn(),d=s.animate,f=s.config,u=Vn({x:n-r/2,y:t-i/2,width:r,height:i,config:f,immediate:!d});return c.jsxs(c.Fragment,{children:[l.annotations.outline.outlineWidth>0&&c.jsx(Te.rect,{x:u.x,y:u.y,rx:o,ry:o,width:u.width,height:u.height,style:pn({},l.annotations.outline,{fill:"none",strokeWidth:l.annotations.outline.strokeWidth+2*l.annotations.outline.outlineWidth,stroke:l.annotations.outline.outlineColor,opacity:l.annotations.outline.outlineOpacity})}),c.jsx(Te.rect,{x:u.x,y:u.y,rx:o,ry:o,width:u.width,height:u.height,style:l.annotations.outline})]})},Yl=function(e){var n=e.datum,t=e.x,r=e.y,i=e.note,a=Al(e);if(!Il(i))throw new Error("note should be a valid react element");return c.jsxs(c.Fragment,{children:[c.jsx(ci,{points:a.points,isOutline:!0}),Un(e)&&c.jsx(Dl,{x:t,y:r,size:e.size}),Lt(e)&&c.jsx(Vl,{x:t,y:r,size:e.size}),Xn(e)&&c.jsx($l,{x:t,y:r,width:e.width,height:e.height,borderRadius:e.borderRadius}),c.jsx(ci,{points:a.points}),c.jsx(Rl,{datum:n,x:a.text[0],y:a.text[1],note:i})]})},fi=function(e,n){n.forEach(function(t,r){var i=t[0],a=t[1];r===0?e.moveTo(i,a):e.lineTo(i,a)})},Hl=function(e,n){var t=n.annotations,r=n.theme;t.length!==0&&(e.save(),t.forEach(function(i){if(!Bl(i.note))throw new Error("note is invalid for canvas implementation");r.annotations.link.outlineWidth>0&&(e.lineCap="square",e.strokeStyle=r.annotations.link.outlineColor,e.lineWidth=r.annotations.link.strokeWidth+2*r.annotations.link.outlineWidth,e.beginPath(),fi(e,i.computed.points),e.stroke(),e.lineCap="butt"),Un(i)&&r.annotations.outline.outlineWidth>0&&(e.strokeStyle=r.annotations.outline.outlineColor,e.lineWidth=r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,e.beginPath(),e.arc(i.x,i.y,i.size/2,0,2*Math.PI),e.stroke()),Lt(i)&&r.annotations.symbol.outlineWidth>0&&(e.strokeStyle=r.annotations.symbol.outlineColor,e.lineWidth=2*r.annotations.symbol.outlineWidth,e.beginPath(),e.arc(i.x,i.y,i.size/2,0,2*Math.PI),e.stroke()),Xn(i)&&r.annotations.outline.outlineWidth>0&&(e.strokeStyle=r.annotations.outline.outlineColor,e.lineWidth=r.annotations.outline.strokeWidth+2*r.annotations.outline.outlineWidth,e.beginPath(),e.rect(i.x-i.width/2,i.y-i.height/2,i.width,i.height),e.stroke()),e.strokeStyle=r.annotations.link.stroke,e.lineWidth=r.annotations.link.strokeWidth,e.beginPath(),fi(e,i.computed.points),e.stroke(),Un(i)&&(e.strokeStyle=r.annotations.outline.stroke,e.lineWidth=r.annotations.outline.strokeWidth,e.beginPath(),e.arc(i.x,i.y,i.size/2,0,2*Math.PI),e.stroke()),Lt(i)&&(e.fillStyle=r.annotations.symbol.fill,e.beginPath(),e.arc(i.x,i.y,i.size/2,0,2*Math.PI),e.fill()),Xn(i)&&(e.strokeStyle=r.annotations.outline.stroke,e.lineWidth=r.annotations.outline.strokeWidth,e.beginPath(),e.rect(i.x-i.width/2,i.y-i.height/2,i.width,i.height),e.stroke()),typeof i.note=="function"?i.note(e,{datum:i.datum,x:i.computed.text[0],y:i.computed.text[1],theme:r}):(e.font=r.annotations.text.fontSize+"px "+r.annotations.text.fontFamily,e.textAlign="left",e.textBaseline="alphabetic",e.fillStyle=r.annotations.text.fill,e.strokeStyle=r.annotations.text.outlineColor,e.lineWidth=2*r.annotations.text.outlineWidth,r.annotations.text.outlineWidth>0&&(e.lineJoin="round",e.strokeText(i.note,i.computed.text[0],i.computed.text[1]),e.lineJoin="miter"),e.fillText(i.note,i.computed.text[0],i.computed.text[1]))}),e.restore())};function J(){return J=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},J.apply(this,arguments)}function $n(e,n){if(e==null)return{};var t,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}var hi,zl=function(e){var n=e.bars,t=e.annotations,r=Ir({data:n,annotations:t,getPosition:function(i){return{x:i.x+i.width/2,y:i.y+i.height/2}},getDimensions:function(i){var a=i.height,o=i.width;return{width:o,height:a,size:Math.max(o,a)}}});return c.jsx(c.Fragment,{children:r.map(function(i,a){return c.jsx(Yl,J({},i),a)})})},ql=function(e){var n=e.width,t=e.height,r=e.legends,i=e.toggleSerie;return c.jsx(c.Fragment,{children:r.map(function(a,o){var l,s=a[0],d=a[1];return c.jsx(Mi,J({},s,{containerWidth:n,containerHeight:t,data:(l=s.data)!=null?l:d,toggleSerie:s.toggleSerie&&s.dataFrom==="keys"?i:void 0}),o)})})},Ul=["data"],Xl=function(e){var n,t=e.bar,r=t.data,i=$n(t,Ul),a=e.style,o=a.borderColor,l=a.color,s=a.height,d=a.labelColor,f=a.labelOpacity,u=a.labelX,h=a.labelY,m=a.transform,x=a.width,g=a.textAnchor,p=e.borderRadius,y=e.borderWidth,v=e.label,S=e.shouldRenderLabel,k=e.isInteractive,T=e.onClick,W=e.onMouseEnter,O=e.onMouseLeave,E=e.tooltip,M=e.isFocusable,C=e.ariaLabel,L=e.ariaLabelledBy,F=e.ariaDescribedBy,P=e.ariaDisabled,X=e.ariaHidden,Y=_e(),H=Gn(),U=H.showTooltipFromEvent,$=H.showTooltipAt,D=H.hideTooltip,z=b.useMemo(function(){return function(){return b.createElement(E,J({},i,r))}},[E,i,r]),ie=b.useCallback(function(ne){T==null||T(J({color:i.color},r),ne)},[i,r,T]),me=b.useCallback(function(ne){return U(z(),ne)},[U,z]),Pe=b.useCallback(function(ne){W==null||W(r,ne),U(z(),ne)},[r,W,U,z]),be=b.useCallback(function(ne){O==null||O(r,ne),D()},[r,D,O]),Fe=b.useCallback(function(){$(z(),[i.absX+i.width/2,i.absY])},[$,z,i]),ge=b.useCallback(function(){D()},[D]);return c.jsxs(Te.g,{transform:m,children:[c.jsx(Te.rect,{width:Ut(x,function(ne){return Math.max(ne,0)}),height:Ut(s,function(ne){return Math.max(ne,0)}),rx:p,ry:p,fill:(n=r.fill)!=null?n:l,strokeWidth:y,stroke:o,focusable:M,tabIndex:M?0:void 0,"aria-label":C?C(r):void 0,"aria-labelledby":L?L(r):void 0,"aria-describedby":F?F(r):void 0,"aria-disabled":P?P(r):void 0,"aria-hidden":X?X(r):void 0,onMouseEnter:k?Pe:void 0,onMouseMove:k?me:void 0,onMouseLeave:k?be:void 0,onClick:k?ie:void 0,onFocus:k&&M?Fe:void 0,onBlur:k&&M?ge:void 0}),S&&c.jsx(Te.text,{x:u,y:h,textAnchor:g,dominantBaseline:"central",fillOpacity:f,style:J({},Y.labels.text,{pointerEvents:"none",fill:d}),children:v})]})},Nl=["color","label"],Gl=function(e){var n=e.color,t=e.label,r=$n(e,Nl);return c.jsx(Ci,{id:t,value:r.formattedValue,enableChip:!0,color:n})},ee={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelPosition:"middle",labelOffset:0,labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{from:"theme",theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:Gl,tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[],enableTotals:!1,totalsOffset:10},se=J({},ee,{layers:["grid","axes","bars","totals","markers","legends","annotations"],barComponent:Xl,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),Ae=J({},ee,{layers:["grid","axes","bars","totals","legends","annotations"],pixelRatio:typeof window<"u"&&(hi=window.devicePixelRatio)!=null?hi:1}),Br=function(e,n,t,r,i,a){return qn(r,{all:e.map(n),min:0,max:0},i,a).padding(t)},Or=function(e,n){return e.map(function(t){return J({},n.reduce(function(r,i){return r[i]=null,r},{}),t)})},ut=function(e){return Object.keys(e).reduce(function(n,t){return e[t]&&(n[t]=e[t]),n},{})},dt=function(e){return[e,Number(e)]};function Pr(e,n,t,r){return e===void 0&&(e=ee.layout),n===void 0&&(n=ee.reverse),t===void 0&&(t=ee.labelPosition),r===void 0&&(r=ee.labelOffset),function(i,a){var o=r*(n?-1:1);if(e==="horizontal"){var l=i/2;return t==="start"?l=n?i:0:t==="end"&&(l=n?0:i),{labelX:l+o,labelY:a/2,textAnchor:t==="middle"?"middle":n?"end":"start"}}var s=a/2;return t==="start"?s=n?0:a:t==="end"&&(s=n?a:0),{labelX:i/2,labelY:s-o,textAnchor:"middle"}}}var _l=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],Vt=function(e,n){return e>n},Fr=function(e,n){return e<n},Ar=function(e,n){return Array.from(" ".repeat(n-e),function(t,r){return e+r})},Kl=function(e){return Vt(e,0)?0:e},Jl=function(e,n,t,r){var i=e.data,a=e.formatValue,o=e.getColor,l=e.getIndex,s=e.getTooltipLabel,d=e.innerPadding,f=d===void 0?0:d,u=e.keys,h=e.xScale,m=e.yScale,x=e.margin,g=t?Fr:Vt,p=i.map(ut),y=[];return u.forEach(function(v,S){return Ar(0,h.domain().length).forEach(function(k){var T,W,O,E=dt(i[k][v]),M=E[0],C=E[1],L=l(i[k]),F=((T=h(L))!=null?T:0)+n*S+f*S,P=g(W=C,0)?(O=m(W))!=null?O:0:r,X=function(H,U){var $;return g(H,0)?r-U:(($=m(H))!=null?$:0)-r}(C,P),Y={id:v,value:M===null?M:C,formattedValue:a(C),hidden:!1,index:k,indexValue:L,data:p[k]};y.push({key:v+"."+Y.indexValue,index:y.length,data:Y,x:F,y:P,absX:x.left+F,absY:x.top+P,width:n,height:X,color:o(Y),label:s(Y)})})}),y},Ql=function(e,n,t,r){var i=e.data,a=e.formatValue,o=e.getIndex,l=e.getColor,s=e.getTooltipLabel,d=e.keys,f=e.innerPadding,u=f===void 0?0:f,h=e.xScale,m=e.yScale,x=e.margin,g=t?Fr:Vt,p=i.map(ut),y=[];return d.forEach(function(v,S){return Ar(0,m.domain().length).forEach(function(k){var T,W,O,E=dt(i[k][v]),M=E[0],C=E[1],L=o(i[k]),F=g(W=C,0)?r:(O=h(W))!=null?O:0,P=((T=m(L))!=null?T:0)+n*S+u*S,X=function(H,U){var $;return g(H,0)?(($=h(H))!=null?$:0)-r:r-U}(C,F),Y={id:v,value:M===null?M:C,formattedValue:a(C),hidden:!1,index:k,indexValue:L,data:p[k]};y.push({key:v+"."+Y.indexValue,index:y.length,data:Y,x:F,y:P,absX:x.left+F,absY:x.top+P,width:X,height:n,color:l(Y),label:s(Y)})})}),y},Zl=function(e){var n,t,r=e.layout,i=e.minValue,a=e.maxValue,o=e.reverse,l=e.width,s=e.height,d=e.padding,f=d===void 0?0:d,u=e.innerPadding,h=u===void 0?0:u,m=e.valueScale,x=e.indexScale,g=e.hiddenIds,p=g===void 0?[]:g,y=$n(e,_l),v=y.keys.filter(function(z){return!p.includes(z)}),S=Or(y.data,v),k=r==="vertical"?["y","x",l]:["x","y",s],T=k[0],W=k[1],O=k[2],E=Br(S,y.getIndex,f,x,O,W),M=J({max:a,min:i,reverse:o},m),C=M.min==="auto"?Kl:function(z){return z},L=S.reduce(function(z,ie){return[].concat(z,v.map(function(me){return ie[me]}))},[]).filter(Boolean),F=C(Math.min.apply(Math,L)),P=(t=Math.max.apply(Math,L),isFinite(t)?t:0),X=qn(M,{all:L,min:F,max:P},T==="x"?l:s,T),Y=r==="vertical"?[E,X]:[X,E],H=Y[0],U=Y[1],$=(E.bandwidth()-h*(v.length-1))/v.length,D=[J({},y,{data:S,keys:v,innerPadding:h,xScale:H,yScale:U}),$,M.reverse,(n=X(0))!=null?n:0];return{xScale:H,yScale:U,bars:$>0?r==="vertical"?Jl.apply(void 0,D):Ql.apply(void 0,D):[]}},es=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],ns=function e(n){var t;return n.some(Array.isArray)?e((t=[]).concat.apply(t,n)):n},ts=function(e,n,t){var r=e.formatValue,i=e.getColor,a=e.getIndex,o=e.getTooltipLabel,l=e.innerPadding,s=e.stackedData,d=e.xScale,f=e.yScale,u=e.margin,h=[];return s.forEach(function(m){return d.domain().forEach(function(x,g){var p,y,v=m[g],S=(p=d(a(v.data)))!=null?p:0,k=((y=function(C){return f(C[t?0:1])}(v))!=null?y:0)+.5*l,T=function(C,L){var F;return((F=f(C[t?1:0]))!=null?F:0)-L}(v,k)-l,W=dt(v.data[m.key]),O=W[0],E=W[1],M={id:m.key,value:O===null?O:E,formattedValue:r(E),hidden:!1,index:g,indexValue:x,data:ut(v.data)};h.push({key:m.key+"."+x,index:h.length,data:M,x:S,y:k,absX:u.left+S,absY:u.top+k,width:n,height:T,color:i(M),label:o(M)})})}),h},is=function(e,n,t){var r=e.formatValue,i=e.getColor,a=e.getIndex,o=e.getTooltipLabel,l=e.innerPadding,s=e.stackedData,d=e.xScale,f=e.yScale,u=e.margin,h=[];return s.forEach(function(m){return f.domain().forEach(function(x,g){var p,y,v=m[g],S=(p=f(a(v.data)))!=null?p:0,k=((y=function(C){return d(C[t?1:0])}(v))!=null?y:0)+.5*l,T=function(C,L){var F;return((F=d(C[t?0:1]))!=null?F:0)-L}(v,k)-l,W=dt(v.data[m.key]),O=W[0],E=W[1],M={id:m.key,value:O===null?O:E,formattedValue:r(E),hidden:!1,index:g,indexValue:x,data:ut(v.data)};h.push({key:m.key+"."+x,index:h.length,data:M,x:k,y:S,absX:u.left+k,absY:u.top+S,width:T,height:n,color:i(M),label:o(M)})})}),h},rs=function(e){var n,t=e.data,r=e.layout,i=e.minValue,a=e.maxValue,o=e.reverse,l=e.width,s=e.height,d=e.padding,f=d===void 0?0:d,u=e.valueScale,h=e.indexScale,m=e.hiddenIds,x=m===void 0?[]:m,g=$n(e,es),p=g.keys.filter(function($){return!x.includes($)}),y=So().keys(p).offset(Co)(Or(t,p)),v=r==="vertical"?["y","x",l]:["x","y",s],S=v[0],k=v[1],T=v[2],W=Br(t,g.getIndex,f,h,T,k),O=J({max:a,min:i,reverse:o},u),E=(n=ns(y),u.type==="log"?n.filter(function($){return $!==0}):n),M=Math.min.apply(Math,E),C=Math.max.apply(Math,E),L=qn(O,{all:E,min:M,max:C},S==="x"?l:s,S),F=r==="vertical"?[W,L]:[L,W],P=F[0],X=F[1],Y=g.innerPadding>0?g.innerPadding:0,H=W.bandwidth(),U=[J({},g,{innerPadding:Y,stackedData:y,xScale:P,yScale:X}),H,O.reverse];return{xScale:P,yScale:X,bars:H>0?r==="vertical"?ts.apply(void 0,U):is.apply(void 0,U):[]}},as=function(e){var n=e.bars,t=e.direction,r=e.from,i=e.groupMode,a=e.layout,o=e.legendLabel,l=e.reverse,s=Ea(o??(r==="indexes"?"indexValue":"id"));return r==="indexes"?function(d,f,u){var h=Mt(d.map(function(m){var x,g;return{id:(x=m.data.indexValue)!=null?x:"",label:u(m.data),hidden:m.data.hidden,color:(g=m.color)!=null?g:"#000"}}),function(m){return m.id});return f==="horizontal"&&h.reverse(),h}(n,a,s):function(d,f,u,h,m,x){var g=Mt(d.map(function(p){var y;return{id:p.data.id,label:x(p.data),hidden:p.data.hidden,color:(y=p.color)!=null?y:"#000"}}),function(p){return p.id});return(f==="vertical"&&h==="stacked"&&u==="column"&&m!==!0||f==="horizontal"&&h==="stacked"&&m===!0)&&g.reverse(),g}(n,a,t,i,l,s)},mi=function(e,n,t){var r=e.get(n)||0;e.set(n,r+t)},os=function(e,n,t){var r=e.get(n)||0;e.set(n,r+(t>0?t:0))},ls=function(e,n,t){var r=e.get(n)||0;e.set(n,Math.max(r,Number(t)))},ss=function(e,n){var t=e.get(n)||0;e.set(n,t+1)},Rr=function(e){var n=e.indexBy,t=n===void 0?ee.indexBy:n,r=e.keys,i=r===void 0?ee.keys:r,a=e.label,o=a===void 0?ee.label:a,l=e.tooltipLabel,s=l===void 0?ee.tooltipLabel:l,d=e.valueFormat,f=e.colors,u=f===void 0?ee.colors:f,h=e.colorBy,m=h===void 0?ee.colorBy:h,x=e.borderColor,g=x===void 0?ee.borderColor:x,p=e.labelTextColor,y=p===void 0?ee.labelTextColor:p,v=e.groupMode,S=v===void 0?ee.groupMode:v,k=e.layout,T=k===void 0?ee.layout:k,W=e.reverse,O=W===void 0?ee.reverse:W,E=e.data,M=e.minValue,C=M===void 0?ee.minValue:M,L=e.maxValue,F=L===void 0?ee.maxValue:L,P=e.margin,X=e.width,Y=e.height,H=e.padding,U=H===void 0?ee.padding:H,$=e.innerPadding,D=$===void 0?ee.innerPadding:$,z=e.valueScale,ie=z===void 0?ee.valueScale:z,me=e.indexScale,Pe=me===void 0?ee.indexScale:me,be=e.initialHiddenIds,Fe=be===void 0?ee.initialHiddenIds:be,ge=e.enableLabel,ne=ge===void 0?ee.enableLabel:ge,te=e.labelSkipWidth,he=te===void 0?ee.labelSkipWidth:te,V=e.labelSkipHeight,xe=V===void 0?ee.labelSkipHeight:V,Re=e.legends,je=Re===void 0?ee.legends:Re,Ke=e.legendLabel,De=e.totalsOffset,ve=De===void 0?ee.totalsOffset:De,Ve=b.useState(Fe??[]),Ee=Ve[0],ln=Ve[1],dn=b.useCallback(function(I){ln(function(q){return q.indexOf(I)>-1?q.filter(function(Q){return Q!==I}):[].concat(q,[I])})},[]),We=ft(t),fn=ft(o),tn=ft(s),$e=Jn(d),Ye=_e(),ke=Li(u,m),Le=Rn(g,Ye),Ie=Rn(y,Ye),pe=(S==="grouped"?Zl:rs)({layout:T,reverse:O,data:E,getIndex:We,keys:i,minValue:C,maxValue:F,width:X,height:Y,getColor:ke,padding:U,innerPadding:D,valueScale:ie,indexScale:Pe,hiddenIds:Ee,formatValue:$e,getTooltipLabel:tn,margin:P}),oe=pe.bars,Me=pe.xScale,Xe=pe.yScale,Je=b.useMemo(function(){return oe.filter(function(I){return I.data.value!==null}).map(function(I,q){return J({},I,{index:q})})},[oe]),en=b.useCallback(function(I){var q=I.width,Q=I.height;return!!ne&&!(he>0&&q<he)&&!(xe>0&&Q<xe)},[ne,he,xe]),ue=b.useMemo(function(){return i.map(function(I){var q=oe.find(function(Q){return Q.data.id===I});return J({},q,{data:J({id:I},q==null?void 0:q.data,{hidden:Ee.includes(I)})})})},[Ee,i,oe]),Se=b.useMemo(function(){return je.map(function(I){return[I,as({bars:I.dataFrom==="keys"?ue:oe,direction:I.direction,from:I.dataFrom,groupMode:S,layout:T,legendLabel:Ke,reverse:O})]})},[je,ue,oe,S,T,Ke,O]),Qe=b.useMemo(function(){return function(I,q,Q,de,Ce,ce,ye){de===void 0&&(de=ee.layout),Ce===void 0&&(Ce=ee.groupMode);var He=[];if(I.length===0)return He;var Ne=new Map,Ge=I[0].width,rn=I[0].height;if(Ce==="stacked"){var an=new Map;I.forEach(function(w){var A=w.data,N=A.indexValue,ae=A.value;mi(Ne,N,Number(ae)),os(an,N,Number(ae))}),an.forEach(function(w,A){var N,ae,G,we=Ne.get(A)||0;de==="vertical"?(N=q(A),ae=Q(w),G=Q(w/2)):(N=q(w),ae=Q(A),G=q(w/2)),N+=de==="vertical"?Ge/2:ce,ae+=de==="vertical"?-ce:rn/2,He.push({key:"total_"+A,x:N,y:ae,value:we,formattedValue:ye(we),animationOffset:G})})}else if(Ce==="grouped"){var hn=new Map,sn=new Map;I.forEach(function(w){var A=w.data,N=A.indexValue,ae=A.value;mi(Ne,N,Number(ae)),ls(hn,N,Number(ae)),ss(sn,N)}),hn.forEach(function(w,A){var N,ae,G,we=Ne.get(A)||0,ze=sn.get(A);de==="vertical"?(N=q(A),ae=Q(w),G=Q(w/2)):(N=q(w),ae=Q(A),G=q(w/2)),N+=de==="vertical"?ze*Ge/2:ce,ae+=de==="vertical"?-ce:ze*rn/2,He.push({key:"total_"+A,x:N,y:ae,value:we,formattedValue:ye(we),animationOffset:G})})}return He}(oe,Me,Xe,T,S,ve,$e)},[oe,Me,Xe,T,S,ve,$e]);return{bars:oe,barsWithValue:Je,xScale:Me,yScale:Xe,getIndex:We,getLabel:fn,getTooltipLabel:tn,formatValue:$e,getColor:ke,getBorderColor:Le,getLabelColor:Ie,shouldRenderBarLabel:en,hiddenIds:Ee,toggleSerie:dn,legendsWithData:Se,barTotals:Qe}},us=function(e){var n=e.data,t=e.springConfig,r=e.animate,i=e.layout,a=i===void 0?se.layout:i,o=_e();return at(n,{keys:function(l){return l.key},from:function(l){return{x:a==="vertical"?l.x:l.animationOffset,y:a==="vertical"?l.animationOffset:l.y,labelOpacity:0}},enter:function(l){return{x:l.x,y:l.y,labelOpacity:1}},update:function(l){return{x:l.x,y:l.y,labelOpacity:1}},leave:function(l){return{x:a==="vertical"?l.x:l.animationOffset,y:a==="vertical"?l.animationOffset:l.y,labelOpacity:0}},config:t,immediate:!r,initial:r?void 0:null})(function(l,s){return c.jsx(Te.text,{x:l.x,y:l.y,fillOpacity:l.labelOpacity,style:J({},o.labels.text,{pointerEvents:"none",fill:o.text.fill}),fontWeight:"bold",fontSize:o.labels.text.fontSize,fontFamily:o.labels.text.fontFamily,textAnchor:a==="vertical"?"middle":"start",alignmentBaseline:a==="vertical"?"alphabetic":"middle",children:s.formattedValue},s.key)})},ds=["isInteractive","animate","motionConfig","theme","renderWrapper"],cs=function(e){var n=e.data,t=e.indexBy,r=e.keys,i=e.margin,a=e.width,o=e.height,l=e.groupMode,s=e.layout,d=e.reverse,f=e.minValue,u=e.maxValue,h=e.valueScale,m=e.indexScale,x=e.padding,g=e.innerPadding,p=e.axisTop,y=e.axisRight,v=e.axisBottom,S=v===void 0?se.axisBottom:v,k=e.axisLeft,T=k===void 0?se.axisLeft:k,W=e.enableGridX,O=W===void 0?se.enableGridX:W,E=e.enableGridY,M=E===void 0?se.enableGridY:E,C=e.gridXValues,L=e.gridYValues,F=e.layers,P=F===void 0?se.layers:F,X=e.barComponent,Y=X===void 0?se.barComponent:X,H=e.enableLabel,U=H===void 0?se.enableLabel:H,$=e.label,D=e.labelSkipWidth,z=D===void 0?se.labelSkipWidth:D,ie=e.labelSkipHeight,me=ie===void 0?se.labelSkipHeight:ie,Pe=e.labelTextColor,be=e.labelPosition,Fe=be===void 0?se.labelPosition:be,ge=e.labelOffset,ne=ge===void 0?se.labelOffset:ge,te=e.markers,he=te===void 0?se.markers:te,V=e.colorBy,xe=e.colors,Re=e.defs,je=Re===void 0?se.defs:Re,Ke=e.fill,De=Ke===void 0?se.fill:Ke,ve=e.borderRadius,Ve=ve===void 0?se.borderRadius:ve,Ee=e.borderWidth,ln=Ee===void 0?se.borderWidth:Ee,dn=e.borderColor,We=e.annotations,fn=We===void 0?se.annotations:We,tn=e.legendLabel,$e=e.tooltipLabel,Ye=e.valueFormat,ke=e.isInteractive,Le=ke===void 0?se.isInteractive:ke,Ie=e.tooltip,pe=Ie===void 0?se.tooltip:Ie,oe=e.onClick,Me=e.onMouseEnter,Xe=e.onMouseLeave,Je=e.legends,en=e.role,ue=en===void 0?se.role:en,Se=e.ariaLabel,Qe=e.ariaLabelledBy,I=e.ariaDescribedBy,q=e.isFocusable,Q=q===void 0?se.isFocusable:q,de=e.barAriaLabel,Ce=e.barAriaLabelledBy,ce=e.barAriaDescribedBy,ye=e.barAriaHidden,He=e.barAriaDisabled,Ne=e.initialHiddenIds,Ge=e.enableTotals,rn=Ge===void 0?se.enableTotals:Ge,an=e.totalsOffset,hn=an===void 0?se.totalsOffset:an,sn=wn(),w=sn.animate,A=sn.config,N=lt(a,o,i),ae=N.outerWidth,G=N.outerHeight,we=N.margin,ze=N.innerWidth,Be=N.innerHeight,le=Rr({indexBy:t,label:$,tooltipLabel:$e,valueFormat:Ye,colors:xe,colorBy:V,borderColor:dn,labelTextColor:Pe,groupMode:l,layout:s,reverse:d,data:n,keys:r,minValue:f,maxValue:u,margin:we,width:ze,height:Be,padding:x,innerPadding:g,valueScale:h,indexScale:m,enableLabel:U,labelSkipWidth:z,labelSkipHeight:me,legends:Je,legendLabel:tn,initialHiddenIds:Ne,totalsOffset:hn}),Sn=le.bars,In=le.barsWithValue,qe=le.xScale,yn=le.yScale,Yn=le.getLabel,B=le.getTooltipLabel,R=le.getBorderColor,_=le.getLabelColor,Z=le.shouldRenderBarLabel,K=le.toggleSerie,Oe=le.legendsWithData,fe=le.barTotals,re=le.getColor,bn=Pr(s,d,Fe,ne),Bn=at(In,{keys:function(j){return j.key},from:function(j){return J({borderColor:R(j),color:j.color,height:0,labelColor:_(j),labelOpacity:0},bn(j.width,j.height),{transform:"translate("+j.x+", "+(j.y+j.height)+")",width:j.width},s==="vertical"?{}:{height:j.height,transform:"translate("+j.x+", "+j.y+")",width:0})},enter:function(j){return J({borderColor:R(j),color:j.color,height:j.height,labelColor:_(j),labelOpacity:1},bn(j.width,j.height),{transform:"translate("+j.x+", "+j.y+")",width:j.width})},update:function(j){return J({borderColor:R(j),color:j.color,height:j.height,labelColor:_(j),labelOpacity:1},bn(j.width,j.height),{transform:"translate("+j.x+", "+j.y+")",width:j.width})},leave:function(j){return J({borderColor:R(j),color:j.color,height:0,labelColor:_(j),labelOpacity:0},bn(j.width,j.height),{labelY:0,transform:"translate("+j.x+", "+(j.y+j.height)+")",width:j.width},s==="vertical"?{}:J({},bn(j.width,j.height),{labelX:0,height:j.height,transform:"translate("+j.x+", "+j.y+")",width:0}))},config:A,immediate:!w,initial:w?void 0:null}),gn=b.useMemo(function(){return{borderRadius:Ve,borderWidth:ln,enableLabel:U,isInteractive:Le,labelSkipWidth:z,labelSkipHeight:me,onClick:oe,onMouseEnter:Me,onMouseLeave:Xe,getTooltipLabel:B,tooltip:pe,isFocusable:Q,ariaLabel:de,ariaLabelledBy:Ce,ariaDescribedBy:ce,ariaHidden:ye,ariaDisabled:He}},[Ve,ln,U,B,Le,me,z,oe,Me,Xe,pe,Q,de,Ce,ce,ye,He]),vn=Ti(je,Sn,De,{dataKey:"data",targetKey:"data.fill"}),on={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null,totals:null};P.includes("annotations")&&(on.annotations=c.jsx(zl,{bars:Sn,annotations:fn},"annotations")),P.includes("axes")&&(on.axes=c.jsx(Cr,{xScale:qe,yScale:yn,width:ze,height:Be,top:p,right:y,bottom:S,left:T},"axes")),P.includes("bars")&&(on.bars=c.jsx(b.Fragment,{children:Bn(function(j,xn){return b.createElement(Y,J({},gn,{bar:xn,style:j,shouldRenderLabel:Z(xn),label:Yn(xn.data)}))})},"bars")),P.includes("grid")&&(on.grid=c.jsx(Mr,{width:ze,height:Be,xScale:O?qe:null,yScale:M?yn:null,xValues:C,yValues:L},"grid")),P.includes("legends")&&(on.legends=c.jsx(ql,{width:ze,height:Be,legends:Oe,toggleSerie:K},"legends")),P.includes("markers")&&(on.markers=c.jsx(wi,{markers:he,width:ze,height:Be,xScale:qe,yScale:yn},"markers")),P.includes("totals")&&rn&&(on.totals=c.jsx(us,{data:fe,springConfig:A,animate:w,layout:s},"totals"));var On=b.useMemo(function(){return J({},gn,{margin:we,width:a,height:o,innerWidth:ze,innerHeight:Be,bars:Sn,legendData:Oe,enableLabel:U,xScale:qe,yScale:yn,tooltip:pe,getTooltipLabel:B,onClick:oe,onMouseEnter:Me,onMouseLeave:Xe,getColor:re})},[gn,we,a,o,ze,Be,Sn,Oe,U,qe,yn,pe,B,oe,Me,Xe,re]);return c.jsx(ji,{width:ae,height:G,margin:we,defs:vn,role:ue,ariaLabel:Se,ariaLabelledBy:Qe,ariaDescribedBy:I,isFocusable:Q,children:P.map(function(j,xn){var un;return typeof j=="function"?c.jsx(b.Fragment,{children:b.createElement(j,On)},xn):(un=on==null?void 0:on[j])!=null?un:null})})},fs=function(e){var n=e.isInteractive,t=n===void 0?se.isInteractive:n,r=e.animate,i=r===void 0?se.animate:r,a=e.motionConfig,o=a===void 0?se.motionConfig:a,l=e.theme,s=e.renderWrapper,d=$n(e,ds);return c.jsx(Bi,{animate:i,isInteractive:t,motionConfig:o,renderWrapper:s,theme:l,children:c.jsx(cs,J({isInteractive:t},d))})},hs=["isInteractive","renderWrapper","theme"],kt=function(e,n,t,r){return e.find(function(i){return Wi(i.x+n.left,i.y+n.top,i.width,i.height,t,r)})},ms=function(e){var n=e.data,t=e.indexBy,r=e.keys,i=e.margin,a=e.width,o=e.height,l=e.groupMode,s=e.layout,d=e.reverse,f=e.minValue,u=e.maxValue,h=e.valueScale,m=e.indexScale,x=e.padding,g=e.innerPadding,p=e.axisTop,y=e.axisRight,v=e.axisBottom,S=v===void 0?Ae.axisBottom:v,k=e.axisLeft,T=k===void 0?Ae.axisLeft:k,W=e.enableGridX,O=W===void 0?Ae.enableGridX:W,E=e.enableGridY,M=E===void 0?Ae.enableGridY:E,C=e.gridXValues,L=e.gridYValues,F=e.labelPosition,P=F===void 0?Ae.labelPosition:F,X=e.labelOffset,Y=X===void 0?Ae.labelOffset:X,H=e.layers,U=H===void 0?Ae.layers:H,$=e.renderBar,D=$===void 0?function(B,R){var _=R.bar,Z=_.color,K=_.height,Oe=_.width,fe=_.x,re=_.y,bn=R.borderColor,Bn=R.borderRadius,gn=R.borderWidth,vn=R.label,on=R.labelColor,On=R.shouldRenderLabel,j=R.labelX,xn=R.labelY,un=R.textAnchor;if(B.fillStyle=Z,gn>0&&(B.strokeStyle=bn,B.lineWidth=gn),B.beginPath(),Bn>0){var mn=Math.min(Bn,K);B.moveTo(fe+mn,re),B.lineTo(fe+Oe-mn,re),B.quadraticCurveTo(fe+Oe,re,fe+Oe,re+mn),B.lineTo(fe+Oe,re+K-mn),B.quadraticCurveTo(fe+Oe,re+K,fe+Oe-mn,re+K),B.lineTo(fe+mn,re+K),B.quadraticCurveTo(fe,re+K,fe,re+K-mn),B.lineTo(fe,re+mn),B.quadraticCurveTo(fe,re,fe+mn,re),B.closePath()}else B.rect(fe,re,Oe,K);B.fill(),gn>0&&B.stroke(),On&&(B.textBaseline="middle",B.textAlign=un==="middle"?"center":un,B.fillStyle=on,B.fillText(vn,fe+j,re+xn))}:$,z=e.enableLabel,ie=z===void 0?Ae.enableLabel:z,me=e.label,Pe=e.labelSkipWidth,be=Pe===void 0?Ae.labelSkipWidth:Pe,Fe=e.labelSkipHeight,ge=Fe===void 0?Ae.labelSkipHeight:Fe,ne=e.labelTextColor,te=e.colorBy,he=e.colors,V=e.borderRadius,xe=V===void 0?Ae.borderRadius:V,Re=e.borderWidth,je=Re===void 0?Ae.borderWidth:Re,Ke=e.borderColor,De=e.annotations,ve=De===void 0?Ae.annotations:De,Ve=e.legendLabel,Ee=e.tooltipLabel,ln=e.valueFormat,dn=e.isInteractive,We=dn===void 0?Ae.isInteractive:dn,fn=e.tooltip,tn=fn===void 0?Ae.tooltip:fn,$e=e.onClick,Ye=e.onMouseEnter,ke=e.onMouseLeave,Le=e.legends,Ie=e.pixelRatio,pe=Ie===void 0?Ae.pixelRatio:Ie,oe=e.canvasRef,Me=e.enableTotals,Xe=Me===void 0?Ae.enableTotals:Me,Je=e.totalsOffset,en=Je===void 0?Ae.totalsOffset:Je,ue=b.useRef(null),Se=_e(),Qe=lt(a,o,i),I=Qe.margin,q=Qe.innerWidth,Q=Qe.innerHeight,de=Qe.outerWidth,Ce=Qe.outerHeight,ce=Rr({indexBy:t,label:me,tooltipLabel:Ee,valueFormat:ln,colors:he,colorBy:te,borderColor:Ke,labelTextColor:ne,groupMode:l,layout:s,reverse:d,data:n,keys:r,minValue:f,maxValue:u,margin:I,width:q,height:Q,padding:x,innerPadding:g,valueScale:h,indexScale:m,enableLabel:ie,labelSkipWidth:be,labelSkipHeight:ge,legends:Le,legendLabel:Ve,totalsOffset:en}),ye=ce.bars,He=ce.barsWithValue,Ne=ce.xScale,Ge=ce.yScale,rn=ce.getLabel,an=ce.getTooltipLabel,hn=ce.getBorderColor,sn=ce.getLabelColor,w=ce.shouldRenderBarLabel,A=ce.legendsWithData,N=ce.barTotals,ae=ce.getColor,G=Gn(),we=G.showTooltipFromEvent,ze=G.hideTooltip,Be=Fl({annotations:Ir({data:ye,annotations:ve,getPosition:function(B){return{x:B.x,y:B.y}},getDimensions:function(B){var R=B.width,_=B.height;return{width:R,height:_,size:Math.max(R,_)}}})}),le=b.useMemo(function(){return{borderRadius:xe,borderWidth:je,isInteractive:We,isFocusable:!1,labelSkipWidth:be,labelSkipHeight:ge,margin:I,width:a,height:o,innerWidth:q,innerHeight:Q,bars:ye,legendData:A,enableLabel:ie,xScale:Ne,yScale:Ge,tooltip:tn,getTooltipLabel:an,onClick:$e,onMouseEnter:Ye,onMouseLeave:ke,getColor:ae}},[xe,je,We,be,ge,I,a,o,q,Q,ye,A,ie,Ne,Ge,tn,an,$e,Ye,ke,ae]),Sn=Jn(ln),In=Pr(s,d,P,Y);b.useEffect(function(){var B,R=(B=ue.current)==null?void 0:B.getContext("2d");ue.current&&R&&(ue.current.width=de*pe,ue.current.height=Ce*pe,R.scale(pe,pe),R.fillStyle=Se.background,R.fillRect(0,0,de,Ce),R.translate(I.left,I.top),U.forEach(function(_){_==="grid"?typeof Se.grid.line.strokeWidth=="number"&&Se.grid.line.strokeWidth>0&&(R.lineWidth=Se.grid.line.strokeWidth,R.strokeStyle=Se.grid.line.stroke,O&&et(R,{width:q,height:Q,scale:Ne,axis:"x",values:C}),M&&et(R,{width:q,height:Q,scale:Ge,axis:"y",values:L})):_==="axes"?wr(R,{xScale:Ne,yScale:Ge,width:q,height:Q,top:p,right:y,bottom:S,left:T,theme:Se}):_==="bars"?He.forEach(function(Z){D(R,J({bar:Z,borderColor:hn(Z),borderRadius:xe,borderWidth:je,label:rn(Z.data),labelColor:sn(Z),shouldRenderLabel:w(Z)},In(Z.width,Z.height)))}):_==="legends"?A.forEach(function(Z){var K=Z[0],Oe=Z[1];Ei(R,J({},K,{data:Oe,containerWidth:q,containerHeight:Q,theme:Se}))}):_==="annotations"?Hl(R,{annotations:Be,theme:Se}):_==="totals"&&Xe?function(Z,K,Oe,fe){fe===void 0&&(fe=Ae.layout),Z.fillStyle=Oe.text.fill,Z.font="bold "+Oe.labels.text.fontSize+"px "+Oe.labels.text.fontFamily,Z.textBaseline=fe==="vertical"?"alphabetic":"middle",Z.textAlign=fe==="vertical"?"center":"start",K.forEach(function(re){Z.fillText(re.formattedValue,re.x,re.y)})}(R,N,Se,s):typeof _=="function"&&_(R,le)}),R.save())},[S,T,y,p,He,xe,je,Be,O,M,hn,rn,sn,C,L,l,o,Q,q,le,U,s,A,I.left,I.top,Ce,de,pe,D,Ne,Ge,d,w,Se,a,N,Xe,Sn,In]);var qe=b.useCallback(function(B){if(ye&&ue.current){var R=_n(ue.current,B),_=R[0],Z=R[1],K=kt(ye,I,_,Z);K!==void 0?(we(b.createElement(tn,J({},K.data,{color:K.color,label:K.label,value:Number(K.data.value)})),B),B.type==="mouseenter"&&(Ye==null||Ye(K.data,B))):ze()}},[ze,I,Ye,ye,we,tn]),yn=b.useCallback(function(B){if(ye&&ue.current){ze();var R=_n(ue.current,B),_=R[0],Z=R[1],K=kt(ye,I,_,Z);K&&(ke==null||ke(K.data,B))}},[ze,I,ke,ye]),Yn=b.useCallback(function(B){if(ye&&ue.current){var R=_n(ue.current,B),_=R[0],Z=R[1],K=kt(ye,I,_,Z);K!==void 0&&($e==null||$e(J({},K.data,{color:K.color}),B))}},[I,$e,ye]);return c.jsx("canvas",{ref:function(B){ue.current=B,oe&&"current"in oe&&(oe.current=B)},width:de*pe,height:Ce*pe,style:{width:de,height:Ce,cursor:We?"auto":"normal"},onMouseEnter:We?qe:void 0,onMouseMove:We?qe:void 0,onMouseLeave:We?yn:void 0,onClick:We?Yn:void 0})},gs=b.forwardRef(function(e,n){var t=e.isInteractive,r=e.renderWrapper,i=e.theme,a=$n(e,hs);return c.jsx(Bi,{isInteractive:t,renderWrapper:r,theme:i,animate:!1,children:c.jsx(ms,J({},a,{canvasRef:n}))})}),xs=function(e){return c.jsx(ot,{children:function(n){var t=n.width,r=n.height;return c.jsx(fs,J({width:t,height:r},e))}})};b.forwardRef(function(e,n){return c.jsx(ot,{children:function(t){var r=t.width,i=t.height;return c.jsx(gs,J({width:r,height:i},e,{ref:n}))}})});const ps=({data:e,metricName:n,"aria-label":t,chartTheme:r,...i})=>{const{t:a}=Mn(),{colors:o}=rt(),l={text:{fill:"var(--chakra-colors-chakra-body-text)"}};if(!n)return null;const{suffix:s,device:d,id:f}=En(n);let u=a(`metrics.${d}.${s}`).replaceAll("."," ");u=`${u} - ${f}`;const h=[...e].reverse().map(g=>({sampleTime:g.sampleTime,[u]:g.value})),m=(r==null?void 0:r.colourScheme)||"red",x=o[m][500];return c.jsx(Cn,{w:"100%",...i,children:c.jsx(xs,{data:h,keys:[u],indexBy:"sampleTime",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},colors:[x],borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:a("metrics.charts.LineChart.ariaLabel.legend"),legendPosition:"middle",legendOffset:32,truncateTickAt:0,format:g=>Hn.fromISO(g).diffNow(["second"]).negate().mapUnits(v=>Math.floor(v)).rescale().as("seconds")},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legendPosition:"middle",legendOffset:-40,truncateTickAt:0},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",0]]},margin:{top:5,right:0,bottom:70,left:40},padding:.3,tooltip:g=>c.jsx(Wr,{color:g.color,id:g.id,date:Hn.fromISO(g.indexValue),formattedValue:g.formattedValue.toString()}),legends:[{direction:"row",anchor:"bottom-right",dataFrom:"keys",itemDirection:"right-to-left",translateY:70,itemWidth:0,itemHeight:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],role:"application",ariaLabel:t,theme:l})})},gi=10,ys=({chartType:e,chartTheme:n,metricName:t,onClose:r,canEdit:i=!0,...a})=>{const{t:o}=Mn(),{data:l}=Gi(t),[s,d]=b.useState([]),[f,u]=b.useState(!0);if(b.useEffect(()=>{l&&d(p=>{const v=[{value:l.value,sampleTime:l.sampleTime},...p];return v.length=Math.min(v.length,f?gi:gi/2),v})},[l,f]),!t)return null;const h=En(t),{device:m,suffix:x}=h,g=e===An.BAR_CHART?ps:Tl;return c.jsxs(Ot,{alignItems:"flex-start",gap:0,...a,gridColumn:f?"1 / span 2":"auto",children:[c.jsx(Bt,{size:"sm",w:"100%","data-testid":"chart-container",children:c.jsx(no,{h:180,children:c.jsx(g,{h:f?250:200,data:s,metricName:t,"aria-label":o(`metrics.${m}.${x}`).replaceAll("."," "),chartTheme:n})})}),c.jsxs(It,{ml:1,"data-testid":"chart-container-toolbar",children:[i&&c.jsxs(c.Fragment,{children:[c.jsx(Cn,{flex:1,children:c.jsx(ki,{"data-testid":"metrics-remove","aria-label":o("metrics.command.remove.ariaLabel"),size:"sm",onClick:r})}),c.jsx(Cn,{children:c.jsx(na,{variant:"ghost",colorScheme:"gray","aria-label":o(f?"metrics.command.resize.collapse":"metrics.command.resize.expand"),size:"xs",icon:c.jsx(Fn,{as:f?ta:ia,fontSize:"1rem"}),onClick:()=>u(p=>!p)})})]}),c.jsx(Cn,{children:c.jsx(_i,{content:t})})]})]})},bs=({metricInfo:e,series:n,chartTheme:t,isLoading:r,error:i,children:a,...o})=>{var k;const{t:l}=Mn(),{device:s,suffix:d,id:f}=e,u=Intl.NumberFormat(navigator.language),{colors:h}=rt(),{role:m,...x}=o,g=(T,W)=>T-W,p=b.useMemo(()=>{if(n.length<2)return;const T=g(n[0].value,n[1].value);return Number.isFinite(T)?T:void 0},[n]),y=(k=n[0])==null?void 0:k.value,v=(t==null?void 0:t.colourScheme)||"red",S=h[v][500];return c.jsxs(Ot,{alignItems:"flex-start",gap:0,role:m,"aria-labelledby":`sample-title-${f}-${d}`,children:[c.jsxs(Vi,{variant:"hivemq",...x,overflowX:"hidden",h:"100%",sx:{borderColor:S,"dd[data-testid='metric-value']":{color:S}},children:[c.jsxs(qi,{isTruncated:!0,h:"100%",id:`sample-title-${f}-${d}`,children:[c.jsx(vi,{label:l(`metrics.${s}.${d}`).replaceAll("."," "),placement:"top",children:c.jsx(Kn,{textOverflow:"ellipsis",children:l(`metrics.${s}.${d}`).replaceAll("."," ")})}),c.jsx(Kn,{children:f})]}),c.jsxs(Ui,{py:2,"data-testid":"metric-value",children:[r&&c.jsx(ra,{"data-testid":"metric-loader"}),!!i&&c.jsx(uo,{color:"red.100"}),isNaN(y)&&"-",!isNaN(y)&&u.format(y)]}),!!p&&c.jsxs(zi,{"data-testid":"metric-change",children:[c.jsx(Hi,{type:p>0?"increase":"decrease"}),u.format(Math.abs(p))]})]}),a]})},vs=10,ks=({metricName:e,chartTheme:n,onClose:t,canEdit:r=!0,...i})=>{const{t:a}=Mn(),{data:o,isLoading:l,error:s}=Gi(e),[d,f]=b.useState([]),[u]=b.useState(!1);if(b.useEffect(()=>{o&&f(m=>{const g=[{value:o.value,sampleTime:o.sampleTime},...m];return g.length=Math.min(g.length,vs),g})},[o]),!e)return null;const h=En(e);return c.jsx(bs,{metricInfo:h,isLoading:l,error:s,series:d,chartTheme:n,...u?{gridColumn:"1 / span 2"}:{},...i,children:c.jsxs(It,{ml:1,children:[r&&c.jsx(Cn,{flex:1,children:c.jsx(ki,{"data-testid":"metrics-remove","aria-label":a("metrics.command.remove.ariaLabel"),size:"sm",onClick:t})}),c.jsx(Cn,{children:c.jsx(_i,{content:e})})]})})},Ss=["blue","green","orange","pink","purple","red","teal","yellow","cyan"],$s=({nodeId:e,filters:n,initMetrics:t,defaultChartType:r})=>{const{t:i}=Mn(),{isOpen:a,onOpen:o,onClose:l}=aa(),{addMetrics:s,getMetricsFor:d,removeMetrics:f}=Mo(),{colors:u}=rt(),h=Object.keys(u),m=Ss.filter(y=>h.includes(y)),x=y=>{const{selectedTopic:v,selectedChart:S}=y;s(e,v.value,S==null?void 0:S.value)},g=y=>{f(e,y)},p=d(e);return b.useEffect(()=>{d(e).length===0&&t&&t.map(v=>{s(e,v,r)})},[]),c.jsxs(c.Fragment,{children:[c.jsx(Bt,{size:"sm",children:c.jsx(to,{allowToggle:!0,onChange:y=>{y===-1?l():o()},children:c.jsxs(io,{children:[c.jsxs(ro,{"data-testid":"metrics-toggle",children:[c.jsx(Cn,{as:"span",flex:"1",textAlign:"left",children:i("metrics.editor.title")}),c.jsx(ao,{})]}),c.jsx(oo,{pb:4,children:c.jsx(jo,{filters:n,selectedMetrics:p.map(y=>y.metrics),selectedChart:r,onSubmit:x})})]})})}),c.jsx(lo,{spacing:4,templateColumns:"repeat(auto-fill, minmax(200px, 1fr))",role:"list","aria-label":i("metrics.charts.list"),children:p.map(y=>{const{id:v}=En(y.metrics),S=n.findIndex(k=>k.id===v);return!y.chart||y.chart===An.SAMPLE?c.jsx(ks,{metricName:y.metrics,chartTheme:{colourScheme:m[S]},onClose:()=>g(y.metrics),canEdit:a,role:"listitem"},y.metrics):c.jsx(ys,{chartType:y.chart,metricName:y.metrics,chartTheme:{colourScheme:m[S]},onClose:()=>g(y.metrics),canEdit:a,role:"listitem"},y.metrics)})})]})};export{An as C,$s as M};
//# sourceMappingURL=MetricsContainer-Bl1xDqAo.js.map
