import{u as useTranslation,j as jsxRuntimeExports,Z as Icon,cM as AiOutlineInteraction,cN as MdSchema,cf as MdPolicy,cO as AiOutlineCloudServer,cP as SiMqtt,a1 as PiBridgeThin,bl as PiPlugsConnectedFill,cQ as commonjsGlobal,af as getDefaultExportFromCjs,l as instance,cA as enumFromStringValue}from"./index-cMih3SEP.js";import{G as GrStatusUnknown,c as TbTransitionRight,d as GrValidate}from"./index-C46KiF-i.js";import{D as LuFunctionSquare}from"./index-iD7yky8Q.js";import{a as DataHubNodeType,e as SchemaType,R as ResourceWorkingVersion}from"./types-CNm55BG_.js";import{P as PolicyCheckErrors}from"./usePolicyGuards-DliXcvYq.js";(function(){try{var f=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new f.Error().stack;o&&(f._sentryDebugIds=f._sentryDebugIds||{},f._sentryDebugIds[o]="d4239153-9295-46cf-bf14-7e70de2be51e",f._sentryDebugIdIdentifier="sentry-dbid-d4239153-9295-46cf-bf14-7e70de2be51e")}catch{}})();const iconMapping={[DataHubNodeType.ADAPTOR]:f=>jsxRuntimeExports.jsx(Icon,{as:PiPlugsConnectedFill,boxSize:"24px","aria-label":f}),[DataHubNodeType.BRIDGE]:f=>jsxRuntimeExports.jsx(Icon,{as:PiBridgeThin,boxSize:"24px","aria-label":f}),[DataHubNodeType.TOPIC_FILTER]:f=>jsxRuntimeExports.jsx(Icon,{as:SiMqtt,boxSize:"16px","aria-label":f}),[DataHubNodeType.CLIENT_FILTER]:f=>jsxRuntimeExports.jsx(Icon,{as:AiOutlineCloudServer,boxSize:"24px","aria-label":f}),[DataHubNodeType.DATA_POLICY]:f=>jsxRuntimeExports.jsx(Icon,{as:MdPolicy,boxSize:"24px","aria-label":f}),[DataHubNodeType.BEHAVIOR_POLICY]:f=>jsxRuntimeExports.jsx(Icon,{as:MdPolicy,boxSize:"24px","aria-label":f}),[DataHubNodeType.VALIDATOR]:f=>jsxRuntimeExports.jsx(Icon,{as:GrValidate,boxSize:"24px","aria-label":f}),[DataHubNodeType.SCHEMA]:f=>jsxRuntimeExports.jsx(Icon,{as:MdSchema,boxSize:"24px","aria-label":f}),[DataHubNodeType.OPERATION]:f=>jsxRuntimeExports.jsx(Icon,{as:AiOutlineInteraction,boxSize:"24px","aria-label":f}),[DataHubNodeType.FUNCTION]:f=>jsxRuntimeExports.jsx(Icon,{as:LuFunctionSquare,boxSize:"24px","aria-label":f}),[DataHubNodeType.TRANSITION]:f=>jsxRuntimeExports.jsx(Icon,{as:TbTransitionRight,boxSize:"24px","aria-label":f})},NodeIcon=({type:f})=>{const{t:o}=useTranslation("datahub");return!f||!iconMapping[f]?jsxRuntimeExports.jsx(Icon,{as:GrStatusUnknown,boxSize:"24px","aria-label":o("workspace.nodes.type")}):iconMapping[f](o("workspace.nodes.type",{context:f}))},HEADER_HEIGHT="var(--chakra-space-3) + var(--chakra-sizes-12)",HANDLE_PADDING="12px",HANDLE_GAP=.5,HANDLE_HEIGHT=24,CANVAS_GRID=HANDLE_HEIGHT+HANDLE_GAP*16,getHandlePosition=(f=0)=>`calc(${HEADER_HEIGHT} + ${HANDLE_PADDING} + ${f*HANDLE_HEIGHT}px + ${HANDLE_GAP*f}rem)`;var src={exports:{}},indexLight={exports:{}},indexMinimal={},minimal={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;hasRequiredAspromise=1,aspromise=f;function f(o,c){for(var d=new Array(arguments.length-1),a=0,r=2,e=!0;r<arguments.length;)d[a++]=arguments[r++];return new Promise(function(n,i){d[a]=function(s){if(e)if(e=!1,s)i(s);else{for(var l=new Array(arguments.length-1),u=0;u<l.length;)l[u++]=arguments[u];n.apply(null,l)}};try{o.apply(c||null,d)}catch(h){e&&(e=!1,i(h))}})}return aspromise}var base64={},hasRequiredBase64;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(f){var o=f;o.length=function(t){var n=t.length;if(!n)return 0;for(var i=0;--n%4>1&&t.charAt(n)==="=";)++i;return Math.ceil(t.length*3)/4-i};for(var c=new Array(64),d=new Array(123),a=0;a<64;)d[c[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;o.encode=function(t,n,i){for(var h=null,s=[],l=0,u=0,y;n<i;){var v=t[n++];switch(u){case 0:s[l++]=c[v>>2],y=(v&3)<<4,u=1;break;case 1:s[l++]=c[y|v>>4],y=(v&15)<<2,u=2;break;case 2:s[l++]=c[y|v>>6],s[l++]=c[v&63],u=0;break}l>8191&&((h||(h=[])).push(String.fromCharCode.apply(String,s)),l=0)}return u&&(s[l++]=c[y],s[l++]=61,u===1&&(s[l++]=61)),h?(l&&h.push(String.fromCharCode.apply(String,s.slice(0,l))),h.join("")):String.fromCharCode.apply(String,s.slice(0,l))};var r="invalid encoding";o.decode=function(t,n,i){for(var h=i,s=0,l,u=0;u<t.length;){var y=t.charCodeAt(u++);if(y===61&&s>1)break;if((y=d[y])===void 0)throw Error(r);switch(s){case 0:l=y,s=1;break;case 1:n[i++]=l<<2|(y&48)>>4,l=y,s=2;break;case 2:n[i++]=(l&15)<<4|(y&60)>>2,l=y,s=3;break;case 3:n[i++]=(l&3)<<6|y,s=0;break}}if(s===1)throw Error(r);return i-h},o.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}}(base64)),base64}var eventemitter,hasRequiredEventemitter;function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;hasRequiredEventemitter=1,eventemitter=f;function f(){this._listeners={}}return f.prototype.on=function(c,d,a){return(this._listeners[c]||(this._listeners[c]=[])).push({fn:d,ctx:a||this}),this},f.prototype.off=function(c,d){if(c===void 0)this._listeners={};else if(d===void 0)this._listeners[c]=[];else for(var a=this._listeners[c],r=0;r<a.length;)a[r].fn===d?a.splice(r,1):++r;return this},f.prototype.emit=function(c){var d=this._listeners[c];if(d){for(var a=[],r=1;r<arguments.length;)a.push(arguments[r++]);for(r=0;r<d.length;)d[r].fn.apply(d[r++].ctx,a)}return this},eventemitter}var float,hasRequiredFloat;function requireFloat(){if(hasRequiredFloat)return float;hasRequiredFloat=1,float=f(f);function f(r){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),t=new Uint8Array(e.buffer),n=t[3]===128;function i(u,y,v){e[0]=u,y[v]=t[0],y[v+1]=t[1],y[v+2]=t[2],y[v+3]=t[3]}function h(u,y,v){e[0]=u,y[v]=t[3],y[v+1]=t[2],y[v+2]=t[1],y[v+3]=t[0]}r.writeFloatLE=n?i:h,r.writeFloatBE=n?h:i;function s(u,y){return t[0]=u[y],t[1]=u[y+1],t[2]=u[y+2],t[3]=u[y+3],e[0]}function l(u,y){return t[3]=u[y],t[2]=u[y+1],t[1]=u[y+2],t[0]=u[y+3],e[0]}r.readFloatLE=n?s:l,r.readFloatBE=n?l:s}():function(){function e(n,i,h,s){var l=i<0?1:0;if(l&&(i=-i),i===0)n(1/i>0?0:2147483648,h,s);else if(isNaN(i))n(2143289344,h,s);else if(i>34028234663852886e22)n((l<<31|2139095040)>>>0,h,s);else if(i<11754943508222875e-54)n((l<<31|Math.round(i/1401298464324817e-60))>>>0,h,s);else{var u=Math.floor(Math.log(i)/Math.LN2),y=Math.round(i*Math.pow(2,-u)*8388608)&8388607;n((l<<31|u+127<<23|y)>>>0,h,s)}}r.writeFloatLE=e.bind(null,o),r.writeFloatBE=e.bind(null,c);function t(n,i,h){var s=n(i,h),l=(s>>31)*2+1,u=s>>>23&255,y=s&8388607;return u===255?y?NaN:l*(1/0):u===0?l*1401298464324817e-60*y:l*Math.pow(2,u-150)*(y+8388608)}r.readFloatLE=t.bind(null,d),r.readFloatBE=t.bind(null,a)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),t=new Uint8Array(e.buffer),n=t[7]===128;function i(u,y,v){e[0]=u,y[v]=t[0],y[v+1]=t[1],y[v+2]=t[2],y[v+3]=t[3],y[v+4]=t[4],y[v+5]=t[5],y[v+6]=t[6],y[v+7]=t[7]}function h(u,y,v){e[0]=u,y[v]=t[7],y[v+1]=t[6],y[v+2]=t[5],y[v+3]=t[4],y[v+4]=t[3],y[v+5]=t[2],y[v+6]=t[1],y[v+7]=t[0]}r.writeDoubleLE=n?i:h,r.writeDoubleBE=n?h:i;function s(u,y){return t[0]=u[y],t[1]=u[y+1],t[2]=u[y+2],t[3]=u[y+3],t[4]=u[y+4],t[5]=u[y+5],t[6]=u[y+6],t[7]=u[y+7],e[0]}function l(u,y){return t[7]=u[y],t[6]=u[y+1],t[5]=u[y+2],t[4]=u[y+3],t[3]=u[y+4],t[2]=u[y+5],t[1]=u[y+6],t[0]=u[y+7],e[0]}r.readDoubleLE=n?s:l,r.readDoubleBE=n?l:s}():function(){function e(n,i,h,s,l,u){var y=s<0?1:0;if(y&&(s=-s),s===0)n(0,l,u+i),n(1/s>0?0:2147483648,l,u+h);else if(isNaN(s))n(0,l,u+i),n(2146959360,l,u+h);else if(s>17976931348623157e292)n(0,l,u+i),n((y<<31|2146435072)>>>0,l,u+h);else{var v;if(s<22250738585072014e-324)v=s/5e-324,n(v>>>0,l,u+i),n((y<<31|v/4294967296)>>>0,l,u+h);else{var w=Math.floor(Math.log(s)/Math.LN2);w===1024&&(w=1023),v=s*Math.pow(2,-w),n(v*4503599627370496>>>0,l,u+i),n((y<<31|w+1023<<20|v*1048576&1048575)>>>0,l,u+h)}}}r.writeDoubleLE=e.bind(null,o,0,4),r.writeDoubleBE=e.bind(null,c,4,0);function t(n,i,h,s,l){var u=n(s,l+i),y=n(s,l+h),v=(y>>31)*2+1,w=y>>>20&2047,g=4294967296*(y&1048575)+u;return w===2047?g?NaN:v*(1/0):w===0?v*5e-324*g:v*Math.pow(2,w-1075)*(g+4503599627370496)}r.readDoubleLE=t.bind(null,d,0,4),r.readDoubleBE=t.bind(null,a,4,0)}(),r}function o(r,e,t){e[t]=r&255,e[t+1]=r>>>8&255,e[t+2]=r>>>16&255,e[t+3]=r>>>24}function c(r,e,t){e[t]=r>>>24,e[t+1]=r>>>16&255,e[t+2]=r>>>8&255,e[t+3]=r&255}function d(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0}function a(r,e){return(r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3])>>>0}return float}var inquire_1,hasRequiredInquire;function requireInquire(){if(hasRequiredInquire)return inquire_1;hasRequiredInquire=1,inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(f){}return null}return inquire_1}var utf8={},hasRequiredUtf8;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(f){var o=f;o.length=function(d){for(var a=0,r=0,e=0;e<d.length;++e)r=d.charCodeAt(e),r<128?a+=1:r<2048?a+=2:(r&64512)===55296&&(d.charCodeAt(e+1)&64512)===56320?(++e,a+=4):a+=3;return a},o.read=function(d,a,r){var e=r-a;if(e<1)return"";for(var t=null,n=[],i=0,h;a<r;)h=d[a++],h<128?n[i++]=h:h>191&&h<224?n[i++]=(h&31)<<6|d[a++]&63:h>239&&h<365?(h=((h&7)<<18|(d[a++]&63)<<12|(d[a++]&63)<<6|d[a++]&63)-65536,n[i++]=55296+(h>>10),n[i++]=56320+(h&1023)):n[i++]=(h&15)<<12|(d[a++]&63)<<6|d[a++]&63,i>8191&&((t||(t=[])).push(String.fromCharCode.apply(String,n)),i=0);return t?(i&&t.push(String.fromCharCode.apply(String,n.slice(0,i))),t.join("")):String.fromCharCode.apply(String,n.slice(0,i))},o.write=function(d,a,r){for(var e=r,t,n,i=0;i<d.length;++i)t=d.charCodeAt(i),t<128?a[r++]=t:t<2048?(a[r++]=t>>6|192,a[r++]=t&63|128):(t&64512)===55296&&((n=d.charCodeAt(i+1))&64512)===56320?(t=65536+((t&1023)<<10)+(n&1023),++i,a[r++]=t>>18|240,a[r++]=t>>12&63|128,a[r++]=t>>6&63|128,a[r++]=t&63|128):(a[r++]=t>>12|224,a[r++]=t>>6&63|128,a[r++]=t&63|128);return r-e}}(utf8)),utf8}var pool_1,hasRequiredPool;function requirePool(){if(hasRequiredPool)return pool_1;hasRequiredPool=1,pool_1=f;function f(o,c,d){var a=d||8192,r=a>>>1,e=null,t=a;return function(i){if(i<1||i>r)return o(i);t+i>a&&(e=o(a),t=0);var h=c.call(e,t,t+=i);return t&7&&(t=(t|7)+1),h}}return pool_1}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=o;var f=requireMinimal();function o(r,e){this.lo=r>>>0,this.hi=e>>>0}var c=o.zero=new o(0,0);c.toNumber=function(){return 0},c.zzEncode=c.zzDecode=function(){return this},c.length=function(){return 1};var d=o.zeroHash="\0\0\0\0\0\0\0\0";o.fromNumber=function(e){if(e===0)return c;var t=e<0;t&&(e=-e);var n=e>>>0,i=(e-n)/4294967296>>>0;return t&&(i=~i>>>0,n=~n>>>0,++n>4294967295&&(n=0,++i>4294967295&&(i=0))),new o(n,i)},o.from=function(e){if(typeof e=="number")return o.fromNumber(e);if(f.isString(e))if(f.Long)e=f.Long.fromString(e);else return o.fromNumber(parseInt(e,10));return e.low||e.high?new o(e.low>>>0,e.high>>>0):c},o.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+n*4294967296)}return this.lo+this.hi*4294967296},o.prototype.toLong=function(e){return f.Long?new f.Long(this.lo|0,this.hi|0,!!e):{low:this.lo|0,high:this.hi|0,unsigned:!!e}};var a=String.prototype.charCodeAt;return o.fromHash=function(e){return e===d?c:new o((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},o.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},o.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},o.prototype.zzDecode=function(){var e=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},o.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?t===0?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(f){var o=f;o.asPromise=requireAspromise(),o.base64=requireBase64(),o.EventEmitter=requireEventemitter(),o.float=requireFloat(),o.inquire=requireInquire(),o.utf8=requireUtf8(),o.pool=requirePool(),o.LongBits=requireLongbits(),o.isNode=!!(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),o.global=o.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||minimal,o.emptyArray=Object.freeze?Object.freeze([]):[],o.emptyObject=Object.freeze?Object.freeze({}):{},o.isInteger=Number.isInteger||function(r){return typeof r=="number"&&isFinite(r)&&Math.floor(r)===r},o.isString=function(r){return typeof r=="string"||r instanceof String},o.isObject=function(r){return r&&typeof r=="object"},o.isset=o.isSet=function(r,e){var t=r[e];return t!=null&&r.hasOwnProperty(e)?typeof t!="object"||(Array.isArray(t)?t.length:Object.keys(t).length)>0:!1},o.Buffer=function(){try{var a=o.inquire("buffer").Buffer;return a.prototype.utf8Write?a:null}catch{return null}}(),o._Buffer_from=null,o._Buffer_allocUnsafe=null,o.newBuffer=function(r){return typeof r=="number"?o.Buffer?o._Buffer_allocUnsafe(r):new o.Array(r):o.Buffer?o._Buffer_from(r):typeof Uint8Array>"u"?r:new Uint8Array(r)},o.Array=typeof Uint8Array<"u"?Uint8Array:Array,o.Long=o.global.dcodeIO&&o.global.dcodeIO.Long||o.global.Long||o.inquire("long"),o.key2Re=/^true|false|0|1$/,o.key32Re=/^-?(?:0|[1-9][0-9]*)$/,o.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,o.longToHash=function(r){return r?o.LongBits.from(r).toHash():o.LongBits.zeroHash},o.longFromHash=function(r,e){var t=o.LongBits.fromHash(r);return o.Long?o.Long.fromBits(t.lo,t.hi,e):t.toNumber(!!e)};function c(a,r,e){for(var t=Object.keys(r),n=0;n<t.length;++n)(a[t[n]]===void 0||!e)&&(a[t[n]]=r[t[n]]);return a}o.merge=c,o.lcFirst=function(r){return r.charAt(0).toLowerCase()+r.substring(1)};function d(a){function r(e,t){if(!(this instanceof r))return new r(e,t);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,r):Object.defineProperty(this,"stack",{value:new Error().stack||""}),t&&c(this,t)}return r.prototype=Object.create(Error.prototype,{constructor:{value:r,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return a},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),r}o.newError=d,o.ProtocolError=d("ProtocolError"),o.oneOfGetter=function(r){for(var e={},t=0;t<r.length;++t)e[r[t]]=1;return function(){for(var n=Object.keys(this),i=n.length-1;i>-1;--i)if(e[n[i]]===1&&this[n[i]]!==void 0&&this[n[i]]!==null)return n[i]}},o.oneOfSetter=function(r){return function(e){for(var t=0;t<r.length;++t)r[t]!==e&&delete this[r[t]]}},o.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},o._configure=function(){var a=o.Buffer;if(!a){o._Buffer_from=o._Buffer_allocUnsafe=null;return}o._Buffer_from=a.from!==Uint8Array.from&&a.from||function(e,t){return new a(e,t)},o._Buffer_allocUnsafe=a.allocUnsafe||function(e){return new a(e)}}}(minimal)),minimal}var writer,hasRequiredWriter;function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=n;var f=requireMinimal(),o,c=f.LongBits,d=f.base64,a=f.utf8;function r(w,g,m){this.fn=w,this.len=g,this.next=void 0,this.val=m}function e(){}function t(w){this.head=w.head,this.tail=w.tail,this.len=w.len,this.next=w.states}function n(){this.len=0,this.head=new r(e,0,0),this.tail=this.head,this.states=null}var i=function(){return f.Buffer?function(){return(n.create=function(){return new o})()}:function(){return new n}};n.create=i(),n.alloc=function(g){return new f.Array(g)},f.Array!==Array&&(n.alloc=f.pool(n.alloc,f.Array.prototype.subarray)),n.prototype._push=function(g,m,_){return this.tail=this.tail.next=new r(g,m,_),this.len+=m,this};function h(w,g,m){g[m]=w&255}function s(w,g,m){for(;w>127;)g[m++]=w&127|128,w>>>=7;g[m]=w}function l(w,g){this.len=w,this.next=void 0,this.val=g}l.prototype=Object.create(r.prototype),l.prototype.fn=s,n.prototype.uint32=function(g){return this.len+=(this.tail=this.tail.next=new l((g=g>>>0)<128?1:g<16384?2:g<2097152?3:g<268435456?4:5,g)).len,this},n.prototype.int32=function(g){return g<0?this._push(u,10,c.fromNumber(g)):this.uint32(g)},n.prototype.sint32=function(g){return this.uint32((g<<1^g>>31)>>>0)};function u(w,g,m){for(;w.hi;)g[m++]=w.lo&127|128,w.lo=(w.lo>>>7|w.hi<<25)>>>0,w.hi>>>=7;for(;w.lo>127;)g[m++]=w.lo&127|128,w.lo=w.lo>>>7;g[m++]=w.lo}n.prototype.uint64=function(g){var m=c.from(g);return this._push(u,m.length(),m)},n.prototype.int64=n.prototype.uint64,n.prototype.sint64=function(g){var m=c.from(g).zzEncode();return this._push(u,m.length(),m)},n.prototype.bool=function(g){return this._push(h,1,g?1:0)};function y(w,g,m){g[m]=w&255,g[m+1]=w>>>8&255,g[m+2]=w>>>16&255,g[m+3]=w>>>24}n.prototype.fixed32=function(g){return this._push(y,4,g>>>0)},n.prototype.sfixed32=n.prototype.fixed32,n.prototype.fixed64=function(g){var m=c.from(g);return this._push(y,4,m.lo)._push(y,4,m.hi)},n.prototype.sfixed64=n.prototype.fixed64,n.prototype.float=function(g){return this._push(f.float.writeFloatLE,4,g)},n.prototype.double=function(g){return this._push(f.float.writeDoubleLE,8,g)};var v=f.Array.prototype.set?function(g,m,_){m.set(g,_)}:function(g,m,_){for(var I=0;I<g.length;++I)m[_+I]=g[I]};return n.prototype.bytes=function(g){var m=g.length>>>0;if(!m)return this._push(h,1,0);if(f.isString(g)){var _=n.alloc(m=d.length(g));d.decode(g,_,0),g=_}return this.uint32(m)._push(v,m,g)},n.prototype.string=function(g){var m=a.length(g);return m?this.uint32(m)._push(a.write,m,g):this._push(h,1,0)},n.prototype.fork=function(){return this.states=new t(this),this.head=this.tail=new r(e,0,0),this.len=0,this},n.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new r(e,0,0),this.len=0),this},n.prototype.ldelim=function(){var g=this.head,m=this.tail,_=this.len;return this.reset().uint32(_),_&&(this.tail.next=g.next,this.tail=m,this.len+=_),this},n.prototype.finish=function(){for(var g=this.head.next,m=this.constructor.alloc(this.len),_=0;g;)g.fn(g.val,m,_),_+=g.len,g=g.next;return m},n._configure=function(w){o=w,n.create=i(),o._configure()},writer}var writer_buffer,hasRequiredWriter_buffer;function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=c;var f=requireWriter();(c.prototype=Object.create(f.prototype)).constructor=c;var o=requireMinimal();function c(){f.call(this)}c._configure=function(){c.alloc=o._Buffer_allocUnsafe,c.writeBytesBuffer=o.Buffer&&o.Buffer.prototype instanceof Uint8Array&&o.Buffer.prototype.set.name==="set"?function(r,e,t){e.set(r,t)}:function(r,e,t){if(r.copy)r.copy(e,t,0,r.length);else for(var n=0;n<r.length;)e[t++]=r[n++]}},c.prototype.bytes=function(r){o.isString(r)&&(r=o._Buffer_from(r,"base64"));var e=r.length>>>0;return this.uint32(e),e&&this._push(c.writeBytesBuffer,e,r),this};function d(a,r,e){a.length<40?o.utf8.write(a,r,e):r.utf8Write?r.utf8Write(a,e):r.write(a,e)}return c.prototype.string=function(r){var e=o.Buffer.byteLength(r);return this.uint32(e),e&&this._push(d,e,r),this},c._configure(),writer_buffer}var reader,hasRequiredReader;function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=r;var f=requireMinimal(),o,c=f.LongBits,d=f.utf8;function a(s,l){return RangeError("index out of range: "+s.pos+" + "+(l||1)+" > "+s.len)}function r(s){this.buf=s,this.pos=0,this.len=s.length}var e=typeof Uint8Array<"u"?function(l){if(l instanceof Uint8Array||Array.isArray(l))return new r(l);throw Error("illegal buffer")}:function(l){if(Array.isArray(l))return new r(l);throw Error("illegal buffer")},t=function(){return f.Buffer?function(u){return(r.create=function(v){return f.Buffer.isBuffer(v)?new o(v):e(v)})(u)}:e};r.create=t(),r.prototype._slice=f.Array.prototype.subarray||f.Array.prototype.slice,r.prototype.uint32=function(){var l=4294967295;return function(){if(l=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(l=(l|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(l=(l|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(l=(l|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(l=(l|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return l;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return l}}(),r.prototype.int32=function(){return this.uint32()|0},r.prototype.sint32=function(){var l=this.uint32();return l>>>1^-(l&1)|0};function n(){var s=new c(0,0),l=0;if(this.len-this.pos>4){for(;l<4;++l)if(s.lo=(s.lo|(this.buf[this.pos]&127)<<l*7)>>>0,this.buf[this.pos++]<128)return s;if(s.lo=(s.lo|(this.buf[this.pos]&127)<<28)>>>0,s.hi=(s.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return s;l=0}else{for(;l<3;++l){if(this.pos>=this.len)throw a(this);if(s.lo=(s.lo|(this.buf[this.pos]&127)<<l*7)>>>0,this.buf[this.pos++]<128)return s}return s.lo=(s.lo|(this.buf[this.pos++]&127)<<l*7)>>>0,s}if(this.len-this.pos>4){for(;l<5;++l)if(s.hi=(s.hi|(this.buf[this.pos]&127)<<l*7+3)>>>0,this.buf[this.pos++]<128)return s}else for(;l<5;++l){if(this.pos>=this.len)throw a(this);if(s.hi=(s.hi|(this.buf[this.pos]&127)<<l*7+3)>>>0,this.buf[this.pos++]<128)return s}throw Error("invalid varint encoding")}r.prototype.bool=function(){return this.uint32()!==0};function i(s,l){return(s[l-4]|s[l-3]<<8|s[l-2]<<16|s[l-1]<<24)>>>0}r.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)},r.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return i(this.buf,this.pos+=4)|0};function h(){if(this.pos+8>this.len)throw a(this,8);return new c(i(this.buf,this.pos+=4),i(this.buf,this.pos+=4))}return r.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var l=f.float.readFloatLE(this.buf,this.pos);return this.pos+=4,l},r.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var l=f.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,l},r.prototype.bytes=function(){var l=this.uint32(),u=this.pos,y=this.pos+l;if(y>this.len)throw a(this,l);if(this.pos+=l,Array.isArray(this.buf))return this.buf.slice(u,y);if(u===y){var v=f.Buffer;return v?v.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,u,y)},r.prototype.string=function(){var l=this.bytes();return d.read(l,0,l.length)},r.prototype.skip=function(l){if(typeof l=="number"){if(this.pos+l>this.len)throw a(this,l);this.pos+=l}else do if(this.pos>=this.len)throw a(this);while(this.buf[this.pos++]&128);return this},r.prototype.skipType=function(s){switch(s){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(s=this.uint32()&7)!==4;)this.skipType(s);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+s+" at offset "+this.pos)}return this},r._configure=function(s){o=s,r.create=t(),o._configure();var l=f.Long?"toLong":"toNumber";f.merge(r.prototype,{int64:function(){return n.call(this)[l](!1)},uint64:function(){return n.call(this)[l](!0)},sint64:function(){return n.call(this).zzDecode()[l](!1)},fixed64:function(){return h.call(this)[l](!0)},sfixed64:function(){return h.call(this)[l](!1)}})},reader}var reader_buffer,hasRequiredReader_buffer;function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=c;var f=requireReader();(c.prototype=Object.create(f.prototype)).constructor=c;var o=requireMinimal();function c(d){f.call(this,d)}return c._configure=function(){o.Buffer&&(c.prototype._slice=o.Buffer.prototype.slice)},c.prototype.string=function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},c._configure(),reader_buffer}var rpc={},service$1,hasRequiredService$1;function requireService$1(){if(hasRequiredService$1)return service$1;hasRequiredService$1=1,service$1=o;var f=requireMinimal();(o.prototype=Object.create(f.EventEmitter.prototype)).constructor=o;function o(c,d,a){if(typeof c!="function")throw TypeError("rpcImpl must be a function");f.EventEmitter.call(this),this.rpcImpl=c,this.requestDelimited=!!d,this.responseDelimited=!!a}return o.prototype.rpcCall=function c(d,a,r,e,t){if(!e)throw TypeError("request must be specified");var n=this;if(!t)return f.asPromise(c,n,d,a,r,e);if(!n.rpcImpl){setTimeout(function(){t(Error("already ended"))},0);return}try{return n.rpcImpl(d,a[n.requestDelimited?"encodeDelimited":"encode"](e).finish(),function(h,s){if(h)return n.emit("error",h,d),t(h);if(s===null){n.end(!0);return}if(!(s instanceof r))try{s=r[n.responseDelimited?"decodeDelimited":"decode"](s)}catch(l){return n.emit("error",l,d),t(l)}return n.emit("data",s,d),t(null,s)})}catch(i){n.emit("error",i,d),setTimeout(function(){t(i)},0);return}},o.prototype.end=function(d){return this.rpcImpl&&(d||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service$1}var hasRequiredRpc;function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,function(f){var o=f;o.Service=requireService$1()}(rpc)),rpc}var roots,hasRequiredRoots;function requireRoots(){return hasRequiredRoots||(hasRequiredRoots=1,roots={}),roots}var hasRequiredIndexMinimal;function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,function(f){var o=f;o.build="minimal",o.Writer=requireWriter(),o.BufferWriter=requireWriter_buffer(),o.Reader=requireReader(),o.BufferReader=requireReader_buffer(),o.util=requireMinimal(),o.rpc=requireRpc(),o.roots=requireRoots(),o.configure=c;function c(){o.util._configure(),o.Writer._configure(o.BufferWriter),o.Reader._configure(o.BufferReader)}c()}(indexMinimal)),indexMinimal}var util={exports:{}},codegen_1,hasRequiredCodegen;function requireCodegen(){if(hasRequiredCodegen)return codegen_1;hasRequiredCodegen=1,codegen_1=f;function f(o,c){typeof o=="string"&&(c=o,o=void 0);var d=[];function a(e){if(typeof e!="string"){var t=r();if(f.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var n=Object.keys(e),i=new Array(n.length+1),h=new Array(n.length),s=0;s<n.length;)i[s]=n[s],h[s]=e[n[s++]];return i[s]=t,Function.apply(null,i).apply(null,h)}return Function(t)()}for(var l=new Array(arguments.length-1),u=0;u<l.length;)l[u]=arguments[++u];if(u=0,e=e.replace(/%([%dfijs])/g,function(v,w){var g=l[u++];switch(w){case"d":case"f":return String(Number(g));case"i":return String(Math.floor(g));case"j":return JSON.stringify(g);case"s":return String(g)}return"%"}),u!==l.length)throw Error("parameter count mismatch");return d.push(e),a}function r(e){return"function "+(e||c||"")+"("+(o&&o.join(",")||"")+`){
  `+d.join(`
  `)+`
}`}return a.toString=r,a}return f.verbose=!1,codegen_1}var fetch_1,hasRequiredFetch;function requireFetch(){if(hasRequiredFetch)return fetch_1;hasRequiredFetch=1,fetch_1=d;var f=requireAspromise(),o=requireInquire(),c=o("fs");function d(a,r,e){return typeof r=="function"?(e=r,r={}):r||(r={}),e?!r.xhr&&c&&c.readFile?c.readFile(a,function(n,i){return n&&typeof XMLHttpRequest<"u"?d.xhr(a,r,e):n?e(n):e(null,r.binary?i:i.toString("utf8"))}):d.xhr(a,r,e):f(d,this,a,r)}return d.xhr=function(r,e,t){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===4){if(n.status!==0&&n.status!==200)return t(Error("status "+n.status));if(e.binary){var h=n.response;if(!h){h=[];for(var s=0;s<n.responseText.length;++s)h.push(n.responseText.charCodeAt(s)&255)}return t(null,typeof Uint8Array<"u"?new Uint8Array(h):h)}return t(null,n.responseText)}},e.binary&&("overrideMimeType"in n&&n.overrideMimeType("text/plain; charset=x-user-defined"),n.responseType="arraybuffer"),n.open("GET",r),n.send()},fetch_1}var path={},hasRequiredPath;function requirePath(){return hasRequiredPath||(hasRequiredPath=1,function(f){var o=f,c=o.isAbsolute=function(r){return/^(?:\/|\w+:)/.test(r)},d=o.normalize=function(r){r=r.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var e=r.split("/"),t=c(r),n="";t&&(n=e.shift()+"/");for(var i=0;i<e.length;)e[i]===".."?i>0&&e[i-1]!==".."?e.splice(--i,2):t?e.splice(i,1):++i:e[i]==="."?e.splice(i,1):++i;return n+e.join("/")};o.resolve=function(r,e,t){return t||(e=d(e)),c(e)?e:(t||(r=d(r)),(r=r.replace(/(?:\/|^)[^/]+$/,"")).length?d(r+"/"+e):e)}}(path)),path}var types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(f){var o=f,c=requireUtil(),d=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(r,e){var t=0,n={};for(e|=0;t<r.length;)n[d[t+e]]=r[t++];return n}o.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),o.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",c.emptyArray,null]),o.long=a([0,0,0,1,1],7),o.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),o.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])}(types)),types}var field,hasRequiredField;function requireField(){if(hasRequiredField)return field;hasRequiredField=1,field=e;var f=requireObject();((e.prototype=Object.create(f.prototype)).constructor=e).className="Field";var o=require_enum(),c=requireTypes(),d=requireUtil(),a,r=/^required|optional|repeated$/;e.fromJSON=function(n,i){return new e(n,i.id,i.type,i.rule,i.extend,i.options,i.comment)};function e(t,n,i,h,s,l,u){if(d.isObject(h)?(u=s,l=h,h=s=void 0):d.isObject(s)&&(u=l,l=s,s=void 0),f.call(this,t,l),!d.isInteger(n)||n<0)throw TypeError("id must be a non-negative integer");if(!d.isString(i))throw TypeError("type must be a string");if(h!==void 0&&!r.test(h=h.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(s!==void 0&&!d.isString(s))throw TypeError("extend must be a string");h==="proto3_optional"&&(h="optional"),this.rule=h&&h!=="optional"?h:void 0,this.type=i,this.id=n,this.extend=s||void 0,this.required=h==="required",this.optional=!this.required,this.repeated=h==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=d.Long?c.long[i]!==void 0:!1,this.bytes=i==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=u}return Object.defineProperty(e.prototype,"packed",{get:function(){return this._packed===null&&(this._packed=this.getOption("packed")!==!1),this._packed}}),e.prototype.setOption=function(n,i,h){return n==="packed"&&(this._packed=null),f.prototype.setOption.call(this,n,i,h)},e.prototype.toJSON=function(n){var i=n?!!n.keepComments:!1;return d.toObject(["rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",i?this.comment:void 0])},e.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=c.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof a?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof o&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&((this.options.packed===!0||this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof o))&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=d.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var n;d.base64.test(this.typeDefault)?d.base64.decode(this.typeDefault,n=d.newBuffer(d.base64.length(this.typeDefault)),0):d.utf8.write(this.typeDefault,n=d.newBuffer(d.utf8.length(this.typeDefault)),0),this.typeDefault=n}return this.map?this.defaultValue=d.emptyObject:this.repeated?this.defaultValue=d.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof a&&(this.parent.ctor.prototype[this.name]=this.defaultValue),f.prototype.resolve.call(this)},e.d=function(n,i,h,s){return typeof i=="function"?i=d.decorateType(i).name:i&&typeof i=="object"&&(i=d.decorateEnum(i).name),function(u,y){d.decorateType(u.constructor).add(new e(y,n,i,h,{default:s}))}},e._configure=function(n){a=n},field}var oneof,hasRequiredOneof;function requireOneof(){if(hasRequiredOneof)return oneof;hasRequiredOneof=1,oneof=d;var f=requireObject();((d.prototype=Object.create(f.prototype)).constructor=d).className="OneOf";var o=requireField(),c=requireUtil();function d(r,e,t,n){if(Array.isArray(e)||(t=e,e=void 0),f.call(this,r,t),!(e===void 0||Array.isArray(e)))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=n}d.fromJSON=function(e,t){return new d(e,t.oneof,t.options,t.comment)},d.prototype.toJSON=function(e){var t=e?!!e.keepComments:!1;return c.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])};function a(r){if(r.parent)for(var e=0;e<r.fieldsArray.length;++e)r.fieldsArray[e].parent||r.parent.add(r.fieldsArray[e])}return d.prototype.add=function(e){if(!(e instanceof o))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,a(this),this},d.prototype.remove=function(e){if(!(e instanceof o))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),t=this.oneof.indexOf(e.name),t>-1&&this.oneof.splice(t,1),e.partOf=null,this},d.prototype.onAdd=function(e){f.prototype.onAdd.call(this,e);for(var t=this,n=0;n<this.oneof.length;++n){var i=e.get(this.oneof[n]);i&&!i.partOf&&(i.partOf=t,t.fieldsArray.push(i))}a(this)},d.prototype.onRemove=function(e){for(var t=0,n;t<this.fieldsArray.length;++t)(n=this.fieldsArray[t]).parent&&n.parent.remove(n);f.prototype.onRemove.call(this,e)},d.d=function(){for(var e=new Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(i,h){c.decorateType(i.constructor).add(new d(h,e)),Object.defineProperty(i,h,{get:c.oneOfGetter(e),set:c.oneOfSetter(e)})}},oneof}var namespace,hasRequiredNamespace;function requireNamespace(){if(hasRequiredNamespace)return namespace;hasRequiredNamespace=1,namespace=n;var f=requireObject();((n.prototype=Object.create(f.prototype)).constructor=n).className="Namespace";var o=requireField(),c=requireUtil(),d=requireOneof(),a,r,e;n.fromJSON=function(s,l){return new n(s,l.options).addJSON(l.nested)};function t(h,s){if(h&&h.length){for(var l={},u=0;u<h.length;++u)l[h[u].name]=h[u].toJSON(s);return l}}n.arrayToJSON=t,n.isReservedId=function(s,l){if(s){for(var u=0;u<s.length;++u)if(typeof s[u]!="string"&&s[u][0]<=l&&s[u][1]>l)return!0}return!1},n.isReservedName=function(s,l){if(s){for(var u=0;u<s.length;++u)if(s[u]===l)return!0}return!1};function n(h,s){f.call(this,h,s),this.nested=void 0,this._nestedArray=null}function i(h){return h._nestedArray=null,h}return Object.defineProperty(n.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=c.toArray(this.nested))}}),n.prototype.toJSON=function(s){return c.toObject(["options",this.options,"nested",t(this.nestedArray,s)])},n.prototype.addJSON=function(s){var l=this;if(s)for(var u=Object.keys(s),y=0,v;y<u.length;++y)v=s[u[y]],l.add((v.fields!==void 0?a.fromJSON:v.values!==void 0?e.fromJSON:v.methods!==void 0?r.fromJSON:v.id!==void 0?o.fromJSON:n.fromJSON)(u[y],v));return this},n.prototype.get=function(s){return this.nested&&this.nested[s]||null},n.prototype.getEnum=function(s){if(this.nested&&this.nested[s]instanceof e)return this.nested[s].values;throw Error("no such enum: "+s)},n.prototype.add=function(s){if(!(s instanceof o&&s.extend!==void 0||s instanceof a||s instanceof d||s instanceof e||s instanceof r||s instanceof n))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var l=this.get(s.name);if(l)if(l instanceof n&&s instanceof n&&!(l instanceof a||l instanceof r)){for(var u=l.nestedArray,y=0;y<u.length;++y)s.add(u[y]);this.remove(l),this.nested||(this.nested={}),s.setOptions(l.options,!0)}else throw Error("duplicate name '"+s.name+"' in "+this)}return this.nested[s.name]=s,s.onAdd(this),i(this)},n.prototype.remove=function(s){if(!(s instanceof f))throw TypeError("object must be a ReflectionObject");if(s.parent!==this)throw Error(s+" is not a member of "+this);return delete this.nested[s.name],Object.keys(this.nested).length||(this.nested=void 0),s.onRemove(this),i(this)},n.prototype.define=function(s,l){if(c.isString(s))s=s.split(".");else if(!Array.isArray(s))throw TypeError("illegal path");if(s&&s.length&&s[0]==="")throw Error("path must be relative");for(var u=this;s.length>0;){var y=s.shift();if(u.nested&&u.nested[y]){if(u=u.nested[y],!(u instanceof n))throw Error("path conflicts with non-namespace objects")}else u.add(u=new n(y))}return l&&u.addJSON(l),u},n.prototype.resolveAll=function(){for(var s=this.nestedArray,l=0;l<s.length;)s[l]instanceof n?s[l++].resolveAll():s[l++].resolve();return this.resolve()},n.prototype.lookup=function(s,l,u){if(typeof l=="boolean"?(u=l,l=void 0):l&&!Array.isArray(l)&&(l=[l]),c.isString(s)&&s.length){if(s===".")return this.root;s=s.split(".")}else if(!s.length)return this;if(s[0]==="")return this.root.lookup(s.slice(1),l);var y=this.get(s[0]);if(y){if(s.length===1){if(!l||l.indexOf(y.constructor)>-1)return y}else if(y instanceof n&&(y=y.lookup(s.slice(1),l,!0)))return y}else for(var v=0;v<this.nestedArray.length;++v)if(this._nestedArray[v]instanceof n&&(y=this._nestedArray[v].lookup(s,l,!0)))return y;return this.parent===null||u?null:this.parent.lookup(s,l)},n.prototype.lookupType=function(s){var l=this.lookup(s,[a]);if(!l)throw Error("no such type: "+s);return l},n.prototype.lookupEnum=function(s){var l=this.lookup(s,[e]);if(!l)throw Error("no such Enum '"+s+"' in "+this);return l},n.prototype.lookupTypeOrEnum=function(s){var l=this.lookup(s,[a,e]);if(!l)throw Error("no such Type or Enum '"+s+"' in "+this);return l},n.prototype.lookupService=function(s){var l=this.lookup(s,[r]);if(!l)throw Error("no such Service '"+s+"' in "+this);return l},n._configure=function(h,s,l){a=h,r=s,e=l},namespace}var mapfield,hasRequiredMapfield;function requireMapfield(){if(hasRequiredMapfield)return mapfield;hasRequiredMapfield=1,mapfield=d;var f=requireField();((d.prototype=Object.create(f.prototype)).constructor=d).className="MapField";var o=requireTypes(),c=requireUtil();function d(a,r,e,t,n,i){if(f.call(this,a,r,t,void 0,void 0,n,i),!c.isString(e))throw TypeError("keyType must be a string");this.keyType=e,this.resolvedKeyType=null,this.map=!0}return d.fromJSON=function(r,e){return new d(r,e.id,e.keyType,e.type,e.options,e.comment)},d.prototype.toJSON=function(r){var e=r?!!r.keepComments:!1;return c.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},d.prototype.resolve=function(){if(this.resolved)return this;if(o.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return f.prototype.resolve.call(this)},d.d=function(r,e,t){return typeof t=="function"?t=c.decorateType(t).name:t&&typeof t=="object"&&(t=c.decorateEnum(t).name),function(i,h){c.decorateType(i.constructor).add(new d(h,r,e,t))}},mapfield}var method,hasRequiredMethod;function requireMethod(){if(hasRequiredMethod)return method;hasRequiredMethod=1,method=c;var f=requireObject();((c.prototype=Object.create(f.prototype)).constructor=c).className="Method";var o=requireUtil();function c(d,a,r,e,t,n,i,h,s){if(o.isObject(t)?(i=t,t=n=void 0):o.isObject(n)&&(i=n,n=void 0),!(a===void 0||o.isString(a)))throw TypeError("type must be a string");if(!o.isString(r))throw TypeError("requestType must be a string");if(!o.isString(e))throw TypeError("responseType must be a string");f.call(this,d,i),this.type=a||"rpc",this.requestType=r,this.requestStream=t?!0:void 0,this.responseType=e,this.responseStream=n?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=h,this.parsedOptions=s}return c.fromJSON=function(a,r){return new c(a,r.type,r.requestType,r.responseType,r.requestStream,r.responseStream,r.options,r.comment,r.parsedOptions)},c.prototype.toJSON=function(a){var r=a?!!a.keepComments:!1;return o.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",r?this.comment:void 0,"parsedOptions",this.parsedOptions])},c.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),f.prototype.resolve.call(this))},method}var service,hasRequiredService;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=a;var f=requireNamespace();((a.prototype=Object.create(f.prototype)).constructor=a).className="Service";var o=requireMethod(),c=requireUtil(),d=requireRpc();function a(e,t){f.call(this,e,t),this.methods={},this._methodsArray=null}a.fromJSON=function(t,n){var i=new a(t,n.options);if(n.methods)for(var h=Object.keys(n.methods),s=0;s<h.length;++s)i.add(o.fromJSON(h[s],n.methods[h[s]]));return n.nested&&i.addJSON(n.nested),i.comment=n.comment,i},a.prototype.toJSON=function(t){var n=f.prototype.toJSON.call(this,t),i=t?!!t.keepComments:!1;return c.toObject(["options",n&&n.options||void 0,"methods",f.arrayToJSON(this.methodsArray,t)||{},"nested",n&&n.nested||void 0,"comment",i?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=c.toArray(this.methods))}});function r(e){return e._methodsArray=null,e}return a.prototype.get=function(t){return this.methods[t]||f.prototype.get.call(this,t)},a.prototype.resolveAll=function(){for(var t=this.methodsArray,n=0;n<t.length;++n)t[n].resolve();return f.prototype.resolve.call(this)},a.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof o?(this.methods[t.name]=t,t.parent=this,r(this)):f.prototype.add.call(this,t)},a.prototype.remove=function(t){if(t instanceof o){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,r(this)}return f.prototype.remove.call(this,t)},a.prototype.create=function(t,n,i){for(var h=new d.Service(t,n,i),s=0,l;s<this.methodsArray.length;++s){var u=c.lcFirst((l=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");h[u]=c.codegen(["r","c"],c.isReserved(u)?u+"_":u)("return this.rpcCall(m,q,s,r,c)")({m:l,q:l.resolvedRequestType.ctor,s:l.resolvedResponseType.ctor})}return h},service}var message,hasRequiredMessage;function requireMessage(){if(hasRequiredMessage)return message;hasRequiredMessage=1,message=o;var f=requireMinimal();function o(c){if(c)for(var d=Object.keys(c),a=0;a<d.length;++a)this[d[a]]=c[d[a]]}return o.create=function(d){return this.$type.create(d)},o.encode=function(d,a){return this.$type.encode(d,a)},o.encodeDelimited=function(d,a){return this.$type.encodeDelimited(d,a)},o.decode=function(d){return this.$type.decode(d)},o.decodeDelimited=function(d){return this.$type.decodeDelimited(d)},o.verify=function(d){return this.$type.verify(d)},o.fromObject=function(d){return this.$type.fromObject(d)},o.toObject=function(d,a){return this.$type.toObject(d,a)},o.prototype.toJSON=function(){return this.$type.toObject(this,f.toJSONOptions)},message}var decoder_1,hasRequiredDecoder;function requireDecoder(){if(hasRequiredDecoder)return decoder_1;hasRequiredDecoder=1,decoder_1=a;var f=require_enum(),o=requireTypes(),c=requireUtil();function d(r){return"missing required '"+r.name+"'"}function a(r){var e=c.codegen(["r","l"],r.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(r.fieldsArray.filter(function(l){return l.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");r.group&&e("if((t&7)===4)")("break"),e("switch(t>>>3){");for(var t=0;t<r.fieldsArray.length;++t){var n=r._fieldsArray[t].resolve(),i=n.resolvedType instanceof f?"int32":n.type,h="m"+c.safeProp(n.name);e("case %i: {",n.id),n.map?(e("if(%s===util.emptyObject)",h)("%s={}",h)("var c2 = r.uint32()+r.pos"),o.defaults[n.keyType]!==void 0?e("k=%j",o.defaults[n.keyType]):e("k=null"),o.defaults[i]!==void 0?e("value=%j",o.defaults[i]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),o.basic[i]===void 0?e("value=types[%i].decode(r,r.uint32())",t):e("value=r.%s()",i),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),o.long[n.keyType]!==void 0?e('%s[typeof k==="object"?util.longToHash(k):k]=value',h):e("%s[k]=value",h)):n.repeated?(e("if(!(%s&&%s.length))",h,h)("%s=[]",h),o.packed[i]!==void 0&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",h,i)("}else"),o.basic[i]===void 0?e(n.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",h,t):e("%s.push(r.%s())",h,i)):o.basic[i]===void 0?e(n.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",h,t):e("%s=r.%s()",h,i),e("break")("}")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),t=0;t<r._fieldsArray.length;++t){var s=r._fieldsArray[t];s.required&&e("if(!m.hasOwnProperty(%j))",s.name)("throw util.ProtocolError(%j,{instance:m})",d(s))}return e("return m")}return decoder_1}var verifier_1,hasRequiredVerifier;function requireVerifier(){if(hasRequiredVerifier)return verifier_1;hasRequiredVerifier=1,verifier_1=r;var f=require_enum(),o=requireUtil();function c(e,t){return e.name+": "+t+(e.repeated&&t!=="array"?"[]":e.map&&t!=="object"?"{k:"+e.keyType+"}":"")+" expected"}function d(e,t,n,i){if(t.resolvedType)if(t.resolvedType instanceof f){e("switch(%s){",i)("default:")("return%j",c(t,"enum value"));for(var h=Object.keys(t.resolvedType.values),s=0;s<h.length;++s)e("case %i:",t.resolvedType.values[h[s]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",n,i)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",i)("return%j",c(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",i,i,i,i)("return%j",c(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',i)("return%j",c(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',i)("return%j",c(t,"boolean"));break;case"string":e("if(!util.isString(%s))",i)("return%j",c(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',i,i,i)("return%j",c(t,"buffer"));break}return e}function a(e,t,n){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",n)("return%j",c(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",n)("return%j",c(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",n)("return%j",c(t,"boolean key"));break}return e}function r(e){var t=o.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),n=e.oneofsArray,i={};n.length&&t("var p={}");for(var h=0;h<e.fieldsArray.length;++h){var s=e._fieldsArray[h].resolve(),l="m"+o.safeProp(s.name);if(s.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",l,s.name),s.map)t("if(!util.isObject(%s))",l)("return%j",c(s,"object"))("var k=Object.keys(%s)",l)("for(var i=0;i<k.length;++i){"),a(t,s,"k[i]"),d(t,s,h,l+"[k[i]]")("}");else if(s.repeated)t("if(!Array.isArray(%s))",l)("return%j",c(s,"array"))("for(var i=0;i<%s.length;++i){",l),d(t,s,h,l+"[i]")("}");else{if(s.partOf){var u=o.safeProp(s.partOf.name);i[s.partOf.name]===1&&t("if(p%s===1)",u)("return%j",s.partOf.name+": multiple values"),i[s.partOf.name]=1,t("p%s=1",u)}d(t,s,h,l)}s.optional&&t("}")}return t("return null")}return verifier_1}var converter={},hasRequiredConverter;function requireConverter(){return hasRequiredConverter||(hasRequiredConverter=1,function(f){var o=f,c=require_enum(),d=requireUtil();function a(e,t,n,i){var h=!1;if(t.resolvedType)if(t.resolvedType instanceof c){e("switch(d%s){",i);for(var s=t.resolvedType.values,l=Object.keys(s),u=0;u<l.length;++u)s[l[u]]===t.typeDefault&&!h&&(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',i,i,i),t.repeated||e("break"),h=!0),e("case%j:",l[u])("case %i:",s[l[u]])("m%s=%j",i,s[l[u]])("break");e("}")}else e('if(typeof d%s!=="object")',i)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,n,i);else{var y=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",i,i);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",i,i);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",i,i);break;case"uint64":y=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,y)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,y?"true":"");break;case"bytes":e('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length >= 0)",i)("m%s=d%s",i,i);break;case"string":e("m%s=String(d%s)",i,i);break;case"bool":e("m%s=Boolean(d%s)",i,i);break}}return e}o.fromObject=function(t){var n=t.fieldsArray,i=d.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!n.length)return i("return new this.ctor");i("var m=new this.ctor");for(var h=0;h<n.length;++h){var s=n[h].resolve(),l=d.safeProp(s.name);s.map?(i("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),a(i,s,h,l+"[ks[i]]")("}")("}")):s.repeated?(i("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),a(i,s,h,l+"[i]")("}")("}")):(s.resolvedType instanceof c||i("if(d%s!=null){",l),a(i,s,h,l),s.resolvedType instanceof c||i("}"))}return i("return m")};function r(e,t,n,i){if(t.resolvedType)t.resolvedType instanceof c?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",i,n,i,i,n,i,i):e("d%s=types[%i].toObject(m%s,o)",i,n,i);else{var h=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case"uint64":h=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,h?"true":"",i);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:e("d%s=m%s",i,i);break}}return e}o.toObject=function(t){var n=t.fieldsArray.slice().sort(d.compareFieldsById);if(!n.length)return d.codegen()("return {}");for(var i=d.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),h=[],s=[],l=[],u=0;u<n.length;++u)n[u].partOf||(n[u].resolve().repeated?h:n[u].map?s:l).push(n[u]);if(h.length){for(i("if(o.arrays||o.defaults){"),u=0;u<h.length;++u)i("d%s=[]",d.safeProp(h[u].name));i("}")}if(s.length){for(i("if(o.objects||o.defaults){"),u=0;u<s.length;++u)i("d%s={}",d.safeProp(s[u].name));i("}")}if(l.length){for(i("if(o.defaults){"),u=0;u<l.length;++u){var y=l[u],v=d.safeProp(y.name);if(y.resolvedType instanceof c)i("d%s=o.enums===String?%j:%j",v,y.resolvedType.valuesById[y.typeDefault],y.typeDefault);else if(y.long)i("if(util.Long){")("var n=new util.Long(%i,%i,%j)",y.typeDefault.low,y.typeDefault.high,y.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",v)("}else")("d%s=o.longs===String?%j:%i",v,y.typeDefault.toString(),y.typeDefault.toNumber());else if(y.bytes){var w="["+Array.prototype.slice.call(y.typeDefault).join(",")+"]";i("if(o.bytes===String)d%s=%j",v,String.fromCharCode.apply(String,y.typeDefault))("else{")("d%s=%s",v,w)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",v,v)("}")}else i("d%s=%j",v,y.typeDefault)}i("}")}var g=!1;for(u=0;u<n.length;++u){var y=n[u],m=t._fieldsArray.indexOf(y),v=d.safeProp(y.name);y.map?(g||(g=!0,i("var ks2")),i("if(m%s&&(ks2=Object.keys(m%s)).length){",v,v)("d%s={}",v)("for(var j=0;j<ks2.length;++j){"),r(i,y,m,v+"[ks2[j]]")("}")):y.repeated?(i("if(m%s&&m%s.length){",v,v)("d%s=[]",v)("for(var j=0;j<m%s.length;++j){",v),r(i,y,m,v+"[j]")("}")):(i("if(m%s!=null&&m.hasOwnProperty(%j)){",v,y.name),r(i,y,m,v),y.partOf&&i("if(o.oneofs)")("d%s=%j",d.safeProp(y.partOf.name),y.name)),i("}")}return i("return d")}}(converter)),converter}var wrappers={},hasRequiredWrappers;function requireWrappers(){return hasRequiredWrappers||(hasRequiredWrappers=1,function(f){var o=f,c=requireMessage();o[".google.protobuf.Any"]={fromObject:function(d){if(d&&d["@type"]){var a=d["@type"].substring(d["@type"].lastIndexOf("/")+1),r=this.lookup(a);if(r){var e=d["@type"].charAt(0)==="."?d["@type"].slice(1):d["@type"];return e.indexOf("/")===-1&&(e="/"+e),this.create({type_url:e,value:r.encode(r.fromObject(d)).finish()})}}return this.fromObject(d)},toObject:function(d,a){var r="type.googleapis.com/",e="",t="";if(a&&a.json&&d.type_url&&d.value){t=d.type_url.substring(d.type_url.lastIndexOf("/")+1),e=d.type_url.substring(0,d.type_url.lastIndexOf("/")+1);var n=this.lookup(t);n&&(d=n.decode(d.value))}if(!(d instanceof this.ctor)&&d instanceof c){var i=d.$type.toObject(d,a),h=d.$type.fullName[0]==="."?d.$type.fullName.slice(1):d.$type.fullName;return e===""&&(e=r),t=e+h,i["@type"]=t,i}return this.toObject(d,a)}}}(wrappers)),wrappers}var type,hasRequiredType;function requireType(){if(hasRequiredType)return type;hasRequiredType=1,type=v;var f=requireNamespace();((v.prototype=Object.create(f.prototype)).constructor=v).className="Type";var o=require_enum(),c=requireOneof(),d=requireField(),a=requireMapfield(),r=requireService(),e=requireMessage(),t=requireReader(),n=requireWriter(),i=requireUtil(),h=requireEncoder(),s=requireDecoder(),l=requireVerifier(),u=requireConverter(),y=requireWrappers();function v(g,m){f.call(this,g,m),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var g=Object.keys(this.fields),m=0;m<g.length;++m){var _=this.fields[g[m]],I=_.id;if(this._fieldsById[I])throw Error("duplicate id "+I+" in "+this);this._fieldsById[I]=_}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=i.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=i.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(g){var m=g.prototype;m instanceof e||((g.prototype=new e).constructor=g,i.merge(g.prototype,m)),g.$type=g.prototype.$type=this,i.merge(g,e,!0),this._ctor=g;for(var _=0;_<this.fieldsArray.length;++_)this._fieldsArray[_].resolve();var I={};for(_=0;_<this.oneofsArray.length;++_)I[this._oneofsArray[_].resolve().name]={get:i.oneOfGetter(this._oneofsArray[_].oneof),set:i.oneOfSetter(this._oneofsArray[_].oneof)};_&&Object.defineProperties(g.prototype,I)}}}),v.generateConstructor=function(m){for(var _=i.codegen(["p"],m.name),I=0,P;I<m.fieldsArray.length;++I)(P=m._fieldsArray[I]).map?_("this%s={}",i.safeProp(P.name)):P.repeated&&_("this%s=[]",i.safeProp(P.name));return _("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function w(g){return g._fieldsById=g._fieldsArray=g._oneofsArray=null,delete g.encode,delete g.decode,delete g.verify,g}return v.fromJSON=function(m,_){var I=new v(m,_.options);I.extensions=_.extensions,I.reserved=_.reserved;for(var P=Object.keys(_.fields),F=0;F<P.length;++F)I.add((typeof _.fields[P[F]].keyType<"u"?a.fromJSON:d.fromJSON)(P[F],_.fields[P[F]]));if(_.oneofs)for(P=Object.keys(_.oneofs),F=0;F<P.length;++F)I.add(c.fromJSON(P[F],_.oneofs[P[F]]));if(_.nested)for(P=Object.keys(_.nested),F=0;F<P.length;++F){var j=_.nested[P[F]];I.add((j.id!==void 0?d.fromJSON:j.fields!==void 0?v.fromJSON:j.values!==void 0?o.fromJSON:j.methods!==void 0?r.fromJSON:f.fromJSON)(P[F],j))}return _.extensions&&_.extensions.length&&(I.extensions=_.extensions),_.reserved&&_.reserved.length&&(I.reserved=_.reserved),_.group&&(I.group=!0),_.comment&&(I.comment=_.comment),I},v.prototype.toJSON=function(m){var _=f.prototype.toJSON.call(this,m),I=m?!!m.keepComments:!1;return i.toObject(["options",_&&_.options||void 0,"oneofs",f.arrayToJSON(this.oneofsArray,m),"fields",f.arrayToJSON(this.fieldsArray.filter(function(P){return!P.declaringField}),m)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",_&&_.nested||void 0,"comment",I?this.comment:void 0])},v.prototype.resolveAll=function(){for(var m=this.fieldsArray,_=0;_<m.length;)m[_++].resolve();var I=this.oneofsArray;for(_=0;_<I.length;)I[_++].resolve();return f.prototype.resolveAll.call(this)},v.prototype.get=function(m){return this.fields[m]||this.oneofs&&this.oneofs[m]||this.nested&&this.nested[m]||null},v.prototype.add=function(m){if(this.get(m.name))throw Error("duplicate name '"+m.name+"' in "+this);if(m instanceof d&&m.extend===void 0){if(this._fieldsById?this._fieldsById[m.id]:this.fieldsById[m.id])throw Error("duplicate id "+m.id+" in "+this);if(this.isReservedId(m.id))throw Error("id "+m.id+" is reserved in "+this);if(this.isReservedName(m.name))throw Error("name '"+m.name+"' is reserved in "+this);return m.parent&&m.parent.remove(m),this.fields[m.name]=m,m.message=this,m.onAdd(this),w(this)}return m instanceof c?(this.oneofs||(this.oneofs={}),this.oneofs[m.name]=m,m.onAdd(this),w(this)):f.prototype.add.call(this,m)},v.prototype.remove=function(m){if(m instanceof d&&m.extend===void 0){if(!this.fields||this.fields[m.name]!==m)throw Error(m+" is not a member of "+this);return delete this.fields[m.name],m.parent=null,m.onRemove(this),w(this)}if(m instanceof c){if(!this.oneofs||this.oneofs[m.name]!==m)throw Error(m+" is not a member of "+this);return delete this.oneofs[m.name],m.parent=null,m.onRemove(this),w(this)}return f.prototype.remove.call(this,m)},v.prototype.isReservedId=function(m){return f.isReservedId(this.reserved,m)},v.prototype.isReservedName=function(m){return f.isReservedName(this.reserved,m)},v.prototype.create=function(m){return new this.ctor(m)},v.prototype.setup=function(){for(var m=this.fullName,_=[],I=0;I<this.fieldsArray.length;++I)_.push(this._fieldsArray[I].resolve().resolvedType);this.encode=h(this)({Writer:n,types:_,util:i}),this.decode=s(this)({Reader:t,types:_,util:i}),this.verify=l(this)({types:_,util:i}),this.fromObject=u.fromObject(this)({types:_,util:i}),this.toObject=u.toObject(this)({types:_,util:i});var P=y[m];if(P){var F=Object.create(this);F.fromObject=this.fromObject,this.fromObject=P.fromObject.bind(F),F.toObject=this.toObject,this.toObject=P.toObject.bind(F)}return this},v.prototype.encode=function(m,_){return this.setup().encode(m,_)},v.prototype.encodeDelimited=function(m,_){return this.encode(m,_&&_.len?_.fork():_).ldelim()},v.prototype.decode=function(m,_){return this.setup().decode(m,_)},v.prototype.decodeDelimited=function(m){return m instanceof t||(m=t.create(m)),this.decode(m,m.uint32())},v.prototype.verify=function(m){return this.setup().verify(m)},v.prototype.fromObject=function(m){return this.setup().fromObject(m)},v.prototype.toObject=function(m,_){return this.setup().toObject(m,_)},v.d=function(m){return function(I){i.decorateType(I,m)}},type}var root,hasRequiredRoot;function requireRoot(){if(hasRequiredRoot)return root;hasRequiredRoot=1,root=n;var f=requireNamespace();((n.prototype=Object.create(f.prototype)).constructor=n).className="Root";var o=requireField(),c=require_enum(),d=requireOneof(),a=requireUtil(),r,e,t;function n(l){f.call(this,"",l),this.deferred=[],this.files=[]}n.fromJSON=function(u,y){return y||(y=new n),u.options&&y.setOptions(u.options),y.addJSON(u.nested)},n.prototype.resolvePath=a.path.resolve,n.prototype.fetch=a.fetch;function i(){}n.prototype.load=function l(u,y,v){typeof y=="function"&&(v=y,y=void 0);var w=this;if(!v)return a.asPromise(l,w,u,y);var g=v===i;function m(M,T){if(v){if(g)throw M;var p=v;v=null,p(M,T)}}function _(M){var T=M.lastIndexOf("google/protobuf/");if(T>-1){var p=M.substring(T);if(p in t)return p}return null}function I(M,T){try{if(a.isString(T)&&T.charAt(0)==="{"&&(T=JSON.parse(T)),!a.isString(T))w.setOptions(T.options).addJSON(T.nested);else{e.filename=M;var p=e(T,w,y),R,b=0;if(p.imports)for(;b<p.imports.length;++b)(R=_(p.imports[b])||w.resolvePath(M,p.imports[b]))&&P(R);if(p.weakImports)for(b=0;b<p.weakImports.length;++b)(R=_(p.weakImports[b])||w.resolvePath(M,p.weakImports[b]))&&P(R,!0)}}catch(O){m(O)}!g&&!F&&m(null,w)}function P(M,T){if(M=_(M)||M,!(w.files.indexOf(M)>-1)){if(w.files.push(M),M in t){g?I(M,t[M]):(++F,setTimeout(function(){--F,I(M,t[M])}));return}if(g){var p;try{p=a.fs.readFileSync(M).toString("utf8")}catch(R){T||m(R);return}I(M,p)}else++F,w.fetch(M,function(R,b){if(--F,!!v){if(R){T?F||m(null,w):m(R);return}I(M,b)}})}}var F=0;a.isString(u)&&(u=[u]);for(var j=0,z;j<u.length;++j)(z=w.resolvePath("",u[j]))&&P(z);if(g)return w;F||m(null,w)},n.prototype.loadSync=function(u,y){if(!a.isNode)throw Error("not supported");return this.load(u,y,i)},n.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(u){return"'extend "+u.extend+"' in "+u.parent.fullName}).join(", "));return f.prototype.resolveAll.call(this)};var h=/^[A-Z]/;function s(l,u){var y=u.parent.lookup(u.extend);if(y){var v=new o(u.fullName,u.id,u.type,u.rule,void 0,u.options);return y.get(v.name)||(v.declaringField=u,u.extensionField=v,y.add(v)),!0}return!1}return n.prototype._handleAdd=function(u){if(u instanceof o)u.extend!==void 0&&!u.extensionField&&(s(this,u)||this.deferred.push(u));else if(u instanceof c)h.test(u.name)&&(u.parent[u.name]=u.values);else if(!(u instanceof d)){if(u instanceof r)for(var y=0;y<this.deferred.length;)s(this,this.deferred[y])?this.deferred.splice(y,1):++y;for(var v=0;v<u.nestedArray.length;++v)this._handleAdd(u._nestedArray[v]);h.test(u.name)&&(u.parent[u.name]=u)}},n.prototype._handleRemove=function(u){if(u instanceof o){if(u.extend!==void 0)if(u.extensionField)u.extensionField.parent.remove(u.extensionField),u.extensionField=null;else{var y=this.deferred.indexOf(u);y>-1&&this.deferred.splice(y,1)}}else if(u instanceof c)h.test(u.name)&&delete u.parent[u.name];else if(u instanceof f){for(var v=0;v<u.nestedArray.length;++v)this._handleRemove(u._nestedArray[v]);h.test(u.name)&&delete u.parent[u.name]}},n._configure=function(l,u,y){r=l,e=u,t=y},root}var hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util.exports;hasRequiredUtil=1;var f=util.exports=requireMinimal(),o=requireRoots(),c,d;f.codegen=requireCodegen(),f.fetch=requireFetch(),f.path=requirePath(),f.fs=f.inquire("fs"),f.toArray=function(i){if(i){for(var h=Object.keys(i),s=new Array(h.length),l=0;l<h.length;)s[l]=i[h[l++]];return s}return[]},f.toObject=function(i){for(var h={},s=0;s<i.length;){var l=i[s++],u=i[s++];u!==void 0&&(h[l]=u)}return h};var a=/\\/g,r=/"/g;f.isReserved=function(i){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(i)},f.safeProp=function(i){return!/^[$\w_]+$/.test(i)||f.isReserved(i)?'["'+i.replace(a,"\\\\").replace(r,'\\"')+'"]':"."+i},f.ucFirst=function(i){return i.charAt(0).toUpperCase()+i.substring(1)};var e=/_([a-z])/g;f.camelCase=function(i){return i.substring(0,1)+i.substring(1).replace(e,function(h,s){return s.toUpperCase()})},f.compareFieldsById=function(i,h){return i.id-h.id},f.decorateType=function(i,h){if(i.$type)return h&&i.$type.name!==h&&(f.decorateRoot.remove(i.$type),i.$type.name=h,f.decorateRoot.add(i.$type)),i.$type;c||(c=requireType());var s=new c(h||i.name);return f.decorateRoot.add(s),s.ctor=i,Object.defineProperty(i,"$type",{value:s,enumerable:!1}),Object.defineProperty(i.prototype,"$type",{value:s,enumerable:!1}),s};var t=0;return f.decorateEnum=function(i){if(i.$type)return i.$type;d||(d=require_enum());var h=new d("Enum"+t++,i);return f.decorateRoot.add(h),Object.defineProperty(i,"$type",{value:h,enumerable:!1}),h},f.setProperty=function(i,h,s){function l(u,y,v){var w=y.shift();if(w==="__proto__"||w==="prototype")return u;if(y.length>0)u[w]=l(u[w]||{},y,v);else{var g=u[w];g&&(v=[].concat(g).concat(v)),u[w]=v}return u}if(typeof i!="object")throw TypeError("dst must be an object");if(!h)throw TypeError("path must be specified");return h=h.split("."),l(i,h,s)},Object.defineProperty(f,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(requireRoot()))}}),util.exports}var object,hasRequiredObject;function requireObject(){if(hasRequiredObject)return object;hasRequiredObject=1,object=c,c.className="ReflectionObject";var f=requireUtil(),o;function c(d,a){if(!f.isString(d))throw TypeError("name must be a string");if(a&&!f.isObject(a))throw TypeError("options must be an object");this.options=a,this.parsedOptions=null,this.name=d,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}return Object.defineProperties(c.prototype,{root:{get:function(){for(var d=this;d.parent!==null;)d=d.parent;return d}},fullName:{get:function(){for(var d=[this.name],a=this.parent;a;)d.unshift(a.name),a=a.parent;return d.join(".")}}}),c.prototype.toJSON=function(){throw Error()},c.prototype.onAdd=function(a){this.parent&&this.parent!==a&&this.parent.remove(this),this.parent=a,this.resolved=!1;var r=a.root;r instanceof o&&r._handleAdd(this)},c.prototype.onRemove=function(a){var r=a.root;r instanceof o&&r._handleRemove(this),this.parent=null,this.resolved=!1},c.prototype.resolve=function(){return this.resolved?this:(this.root instanceof o&&(this.resolved=!0),this)},c.prototype.getOption=function(a){if(this.options)return this.options[a]},c.prototype.setOption=function(a,r,e){return(!e||!this.options||this.options[a]===void 0)&&((this.options||(this.options={}))[a]=r),this},c.prototype.setParsedOption=function(a,r,e){this.parsedOptions||(this.parsedOptions=[]);var t=this.parsedOptions;if(e){var n=t.find(function(s){return Object.prototype.hasOwnProperty.call(s,a)});if(n){var i=n[a];f.setProperty(i,e,r)}else n={},n[a]=f.setProperty({},e,r),t.push(n)}else{var h={};h[a]=r,t.push(h)}return this},c.prototype.setOptions=function(a,r){if(a)for(var e=Object.keys(a),t=0;t<e.length;++t)this.setOption(e[t],a[e[t]],r);return this},c.prototype.toString=function(){var a=this.constructor.className,r=this.fullName;return r.length?a+" "+r:a},c._configure=function(d){o=d},object}var _enum,hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,_enum=d;var f=requireObject();((d.prototype=Object.create(f.prototype)).constructor=d).className="Enum";var o=requireNamespace(),c=requireUtil();function d(a,r,e,t,n,i){if(f.call(this,a,e),r&&typeof r!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=t,this.comments=n||{},this.valuesOptions=i,this.reserved=void 0,r)for(var h=Object.keys(r),s=0;s<h.length;++s)typeof r[h[s]]=="number"&&(this.valuesById[this.values[h[s]]=r[h[s]]]=h[s])}return d.fromJSON=function(r,e){var t=new d(r,e.values,e.options,e.comment,e.comments);return t.reserved=e.reserved,t},d.prototype.toJSON=function(r){var e=r?!!r.keepComments:!1;return c.toObject(["options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",e?this.comment:void 0,"comments",e?this.comments:void 0])},d.prototype.add=function(r,e,t,n){if(!c.isString(r))throw TypeError("name must be a string");if(!c.isInteger(e))throw TypeError("id must be an integer");if(this.values[r]!==void 0)throw Error("duplicate name '"+r+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(r))throw Error("name '"+r+"' is reserved in "+this);if(this.valuesById[e]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+e+" in "+this);this.values[r]=e}else this.valuesById[this.values[r]=e]=r;return n&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[r]=n||null),this.comments[r]=t||null,this},d.prototype.remove=function(r){if(!c.isString(r))throw TypeError("name must be a string");var e=this.values[r];if(e==null)throw Error("name '"+r+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[r],delete this.comments[r],this.valuesOptions&&delete this.valuesOptions[r],this},d.prototype.isReservedId=function(r){return o.isReservedId(this.reserved,r)},d.prototype.isReservedName=function(r){return o.isReservedName(this.reserved,r)},_enum}var encoder_1,hasRequiredEncoder;function requireEncoder(){if(hasRequiredEncoder)return encoder_1;hasRequiredEncoder=1,encoder_1=a;var f=require_enum(),o=requireTypes(),c=requireUtil();function d(r,e,t,n){return e.resolvedType.group?r("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",t,n,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):r("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",t,n,(e.id<<3|2)>>>0)}function a(r){for(var e=c.codegen(["m","w"],r.name+"$encode")("if(!w)")("w=Writer.create()"),t,n,i=r.fieldsArray.slice().sort(c.compareFieldsById),t=0;t<i.length;++t){var h=i[t].resolve(),s=r._fieldsArray.indexOf(h),l=h.resolvedType instanceof f?"int32":h.type,u=o.basic[l];n="m"+c.safeProp(h.name),h.map?(e("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",n,h.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",n)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(h.id<<3|2)>>>0,8|o.mapKey[h.keyType],h.keyType),u===void 0?e("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",s,n):e(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|u,l,n),e("}")("}")):h.repeated?(e("if(%s!=null&&%s.length){",n,n),h.packed&&o.packed[l]!==void 0?e("w.uint32(%i).fork()",(h.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",n)("w.%s(%s[i])",l,n)("w.ldelim()"):(e("for(var i=0;i<%s.length;++i)",n),u===void 0?d(e,h,s,n+"[i]"):e("w.uint32(%i).%s(%s[i])",(h.id<<3|u)>>>0,l,n)),e("}")):(h.optional&&e("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",n,h.name),u===void 0?d(e,h,s,n):e("w.uint32(%i).%s(%s)",(h.id<<3|u)>>>0,l,n))}return e("return w")}return encoder_1}var hasRequiredIndexLight;function requireIndexLight(){if(hasRequiredIndexLight)return indexLight.exports;hasRequiredIndexLight=1;var f=indexLight.exports=requireIndexMinimal();f.build="light";function o(d,a,r){return typeof a=="function"?(r=a,a=new f.Root):a||(a=new f.Root),a.load(d,r)}f.load=o;function c(d,a){return a||(a=new f.Root),a.loadSync(d)}return f.loadSync=c,f.encoder=requireEncoder(),f.decoder=requireDecoder(),f.verifier=requireVerifier(),f.converter=requireConverter(),f.ReflectionObject=requireObject(),f.Namespace=requireNamespace(),f.Root=requireRoot(),f.Enum=require_enum(),f.Type=requireType(),f.Field=requireField(),f.OneOf=requireOneof(),f.MapField=requireMapfield(),f.Service=requireService(),f.Method=requireMethod(),f.Message=requireMessage(),f.wrappers=requireWrappers(),f.types=requireTypes(),f.util=requireUtil(),f.ReflectionObject._configure(f.Root),f.Namespace._configure(f.Type,f.Service,f.Enum),f.Root._configure(f.Type),f.Field._configure(f.Type),indexLight.exports}var tokenize_1,hasRequiredTokenize;function requireTokenize(){if(hasRequiredTokenize)return tokenize_1;hasRequiredTokenize=1,tokenize_1=h;var f=/[\s{}=;:[\],'"()<>]/g,o=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,c=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,d=/^ *[*/]+ */,a=/^\s*\*?\/*/,r=/\n/g,e=/\s/,t=/\\(.?)/g,n={0:"\0",r:"\r",n:`
`,t:"	"};function i(s){return s.replace(t,function(l,u){switch(u){case"\\":case"":return u;default:return n[u]||""}})}h.unescape=i;function h(s,l){s=s.toString();var u=0,y=s.length,v=1,w=0,g={},m=[],_=null;function I(S){return Error("illegal "+S+" (line "+v+")")}function P(){var S=_==="'"?c:o;S.lastIndex=u-1;var x=S.exec(s);if(!x)throw I("string");return u=S.lastIndex,p(_),_=null,i(x[1])}function F(S){return s.charAt(S)}function j(S,x,k){var L={type:s.charAt(S++),lineEmpty:!1,leading:k},H;l?H=2:H=3;var $=S-H,V;do if(--$<0||(V=s.charAt($))===`
`){L.lineEmpty=!0;break}while(V===" "||V==="	");for(var Z=s.substring(S,x).split(r),G=0;G<Z.length;++G)Z[G]=Z[G].replace(l?a:d,"").trim();L.text=Z.join(`
`).trim(),g[v]=L,w=v}function z(S){var x=M(S),k=s.substring(S,x),L=/^\s*\/\//.test(k);return L}function M(S){for(var x=S;x<y&&F(x)!==`
`;)x++;return x}function T(){if(m.length>0)return m.shift();if(_)return P();var S,x,k,L,H,$=u===0;do{if(u===y)return null;for(S=!1;e.test(k=F(u));)if(k===`
`&&($=!0,++v),++u===y)return null;if(F(u)==="/"){if(++u===y)throw I("comment");if(F(u)==="/")if(l){if(L=u,H=!1,z(u-1)){H=!0;do if(u=M(u),u===y||(u++,!$))break;while(z(u))}else u=Math.min(y,M(u)+1);H&&(j(L,u,$),$=!0),v++,S=!0}else{for(H=F(L=u+1)==="/";F(++u)!==`
`;)if(u===y)return null;++u,H&&(j(L,u-1,$),$=!0),++v,S=!0}else if((k=F(u))==="*"){L=u+1,H=l||F(L)==="*";do{if(k===`
`&&++v,++u===y)throw I("comment");x=k,k=F(u)}while(x!=="*"||k!=="/");++u,H&&(j(L,u-2,$),$=!0),S=!0}else return"/"}}while(S);var V=u;f.lastIndex=0;var Z=f.test(F(V++));if(!Z)for(;V<y&&!f.test(F(V));)++V;var G=s.substring(u,u=V);return(G==='"'||G==="'")&&(_=G),G}function p(S){m.push(S)}function R(){if(!m.length){var S=T();if(S===null)return null;p(S)}return m[0]}function b(S,x){var k=R(),L=k===S;if(L)return T(),!0;if(!x)throw I("token '"+k+"', '"+S+"' expected");return!1}function O(S){var x=null,k;return S===void 0?(k=g[v-1],delete g[v-1],k&&(l||k.type==="*"||k.lineEmpty)&&(x=k.leading?k.text:null)):(w<S&&R(),k=g[S],delete g[S],k&&!k.lineEmpty&&(l||k.type==="/")&&(x=k.leading?null:k.text)),x}return Object.defineProperty({next:T,peek:R,push:p,skip:b,cmnt:O},"line",{get:function(){return v}})}return tokenize_1}var parse_1,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse_1;hasRequiredParse=1,parse_1=P,P.filename=null,P.defaults={keepCase:!1};var f=requireTokenize(),o=requireRoot(),c=requireType(),d=requireField(),a=requireMapfield(),r=requireOneof(),e=require_enum(),t=requireService(),n=requireMethod(),i=requireTypes(),h=requireUtil(),s=/^[1-9][0-9]*$/,l=/^-?[1-9][0-9]*$/,u=/^0[x][0-9a-fA-F]+$/,y=/^-?0[x][0-9a-fA-F]+$/,v=/^0[0-7]+$/,w=/^-?0[0-7]+$/,g=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,m=/^[a-zA-Z_][a-zA-Z_0-9]*$/,_=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/,I=/^(?:\.[a-zA-Z_][a-zA-Z_0-9]*)+$/;function P(F,j,z){j instanceof o||(z=j,j=new o),z||(z=P.defaults);var M=z.preferTrailingComment||!1,T=f(F,z.alternateCommentMode||!1),p=T.next,R=T.push,b=T.peek,O=T.skip,S=T.cmnt,x=!0,k,L,H,$,V=!1,Z=j,G=z.keepCase?function(A){return A}:h.camelCase;function C(A,q,E){var D=P.filename;return E||(P.filename=null),Error("illegal "+(q||"token")+" '"+A+"' ("+(D?D+", ":"")+"line "+T.line+")")}function te(){var A=[],q;do{if((q=p())!=='"'&&q!=="'")throw C(q);A.push(p()),O(q),q=b()}while(q==='"'||q==="'");return A.join("")}function ie(A){var q=p();switch(q){case"'":case'"':return R(q),te();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return ce(q,!0)}catch{if(_.test(q))return q;throw C(q,"value")}}function ne(A,q){var E,D;do q&&((E=b())==='"'||E==="'")?A.push(te()):A.push([D=ee(p()),O("to",!0)?ee(p()):D]);while(O(",",!0));O(";")}function ce(A,q){var E=1;switch(A.charAt(0)==="-"&&(E=-1,A=A.substring(1)),A){case"inf":case"INF":case"Inf":return E*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(s.test(A))return E*parseInt(A,10);if(u.test(A))return E*parseInt(A,16);if(v.test(A))return E*parseInt(A,8);if(g.test(A))return E*parseFloat(A);throw C(A,"number",q)}function ee(A,q){switch(A){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!q&&A.charAt(0)==="-")throw C(A,"id");if(l.test(A))return parseInt(A,10);if(y.test(A))return parseInt(A,16);if(w.test(A))return parseInt(A,8);throw C(A,"id")}function he(){if(k!==void 0)throw C("package");if(k=p(),!_.test(k))throw C(k,"name");Z=Z.define(k),O(";")}function pe(){var A=b(),q;switch(A){case"weak":q=H||(H=[]),p();break;case"public":p();default:q=L||(L=[]);break}A=te(),O(";"),q.push(A)}function ye(){if(O("="),$=te(),V=$==="proto3",!V&&$!=="proto2")throw C($,"syntax");O(";")}function se(A,q){switch(q){case"option":return K(A,q),O(";"),!0;case"message":return fe(A,q),!0;case"enum":return le(A,q),!0;case"service":return _e(A,q),!0;case"extend":return Re(A,q),!0}return!1}function X(A,q,E){var D=T.line;if(A&&(typeof A.comment!="string"&&(A.comment=S()),A.filename=P.filename),O("{",!0)){for(var N;(N=p())!=="}";)q(N);O(";",!0)}else E&&E(),O(";"),A&&(typeof A.comment!="string"||M)&&(A.comment=S(D)||A.comment)}function fe(A,q){if(!m.test(q=p()))throw C(q,"type name");var E=new c(q);X(E,function(N){if(!se(E,N))switch(N){case"map":ve(E);break;case"required":case"repeated":Y(E,N);break;case"optional":V?Y(E,"proto3_optional"):Y(E,"optional");break;case"oneof":ge(E,N);break;case"extensions":ne(E.extensions||(E.extensions=[]));break;case"reserved":ne(E.reserved||(E.reserved=[]),!0);break;default:if(!V||!_.test(N))throw C(N);R(N),Y(E,"optional");break}}),A.add(E)}function Y(A,q,E){var D=p();if(D==="group"){me(A,q);return}for(;D.endsWith(".")||b().startsWith(".");)D+=p();if(!_.test(D))throw C(D,"type");var N=p();if(!m.test(N))throw C(N,"name");N=G(N),O("=");var B=new d(N,ee(p()),D,q,E);if(X(B,function(W){if(W==="option")K(B,W),O(";");else throw C(W)},function(){ae(B)}),q==="proto3_optional"){var J=new r("_"+N);B.setOption("proto3_optional",!0),J.add(B),A.add(J)}else A.add(B);!V&&B.repeated&&(i.packed[D]!==void 0||i.basic[D]===void 0)&&B.setOption("packed",!1,!0)}function me(A,q){var E=p();if(!m.test(E))throw C(E,"name");var D=h.lcFirst(E);E===D&&(E=h.ucFirst(E)),O("=");var N=ee(p()),B=new c(E);B.group=!0;var J=new d(D,N,E,q);J.filename=P.filename,X(B,function(W){switch(W){case"option":K(B,W),O(";");break;case"required":case"repeated":Y(B,W);break;case"optional":V?Y(B,"proto3_optional"):Y(B,"optional");break;case"message":fe(B,W);break;case"enum":le(B,W);break;default:throw C(W)}}),A.add(B).add(J)}function ve(A){O("<");var q=p();if(i.mapKey[q]===void 0)throw C(q,"type");O(",");var E=p();if(!_.test(E))throw C(E,"type");O(">");var D=p();if(!m.test(D))throw C(D,"name");O("=");var N=new a(G(D),ee(p()),q,E);X(N,function(J){if(J==="option")K(N,J),O(";");else throw C(J)},function(){ae(N)}),A.add(N)}function ge(A,q){if(!m.test(q=p()))throw C(q,"name");var E=new r(G(q));X(E,function(N){N==="option"?(K(E,N),O(";")):(R(N),Y(E,"optional"))}),A.add(E)}function le(A,q){if(!m.test(q=p()))throw C(q,"name");var E=new e(q);X(E,function(N){switch(N){case"option":K(E,N),O(";");break;case"reserved":ne(E.reserved||(E.reserved=[]),!0);break;default:be(E,N)}}),A.add(E)}function be(A,q){if(!m.test(q))throw C(q,"name");O("=");var E=ee(p(),!0),D={options:void 0};D.setOption=function(N,B){this.options===void 0&&(this.options={}),this.options[N]=B},X(D,function(B){if(B==="option")K(D,B),O(";");else throw C(B)},function(){ae(D)}),A.add(q,E,D.comment,D.options)}function K(A,q){var E=O("(",!0);if(!_.test(q=p()))throw C(q,"name");var D=q,N=D,B;E&&(O(")"),D="("+D+")",N=D,q=b(),I.test(q)&&(B=q.slice(1),D+=q,p())),O("=");var J=de(A,D);Oe(A,N,J,B)}function de(A,q){if(O("{",!0)){for(var E={};!O("}",!0);){if(!m.test(U=p()))throw C(U,"name");if(U===null)throw C(U,"end of input");var D,N=U;if(O(":",!0),b()==="{")D=de(A,q+"."+U);else if(b()==="["){D=[];var B;if(O("[",!0)){do B=ie(),D.push(B);while(O(",",!0));O("]"),typeof B<"u"&&oe(A,q+"."+U,B)}}else D=ie(),oe(A,q+"."+U,D);var J=E[N];J&&(D=[].concat(J).concat(D)),E[N]=D,O(",",!0),O(";",!0)}return E}var Q=ie();return oe(A,q,Q),Q}function oe(A,q,E){A.setOption&&A.setOption(q,E)}function Oe(A,q,E,D){A.setParsedOption&&A.setParsedOption(q,E,D)}function ae(A){if(O("[",!0)){do K(A,"option");while(O(",",!0));O("]")}return A}function _e(A,q){if(!m.test(q=p()))throw C(q,"service name");var E=new t(q);X(E,function(N){if(!se(E,N))if(N==="rpc")we(E,N);else throw C(N)}),A.add(E)}function we(A,q){var E=S(),D=q;if(!m.test(q=p()))throw C(q,"name");var N=q,B,J,Q,W;if(O("("),O("stream",!0)&&(J=!0),!_.test(q=p())||(B=q,O(")"),O("returns"),O("("),O("stream",!0)&&(W=!0),!_.test(q=p())))throw C(q);Q=q,O(")");var re=new n(N,D,B,Q,J,W);re.comment=E,X(re,function(ue){if(ue==="option")K(re,ue),O(";");else throw C(ue)}),A.add(re)}function Re(A,q){if(!_.test(q=p()))throw C(q,"reference");var E=q;X(null,function(N){switch(N){case"required":case"repeated":Y(A,N,E);break;case"optional":V?Y(A,"proto3_optional",E):Y(A,"optional",E);break;default:if(!V||!_.test(N))throw C(N);R(N),Y(A,"optional",E);break}})}for(var U;(U=p())!==null;)switch(U){case"package":if(!x)throw C(U);he();break;case"import":if(!x)throw C(U);pe();break;case"syntax":if(!x)throw C(U);ye();break;case"option":K(Z,U),O(";");break;default:if(se(Z,U)){x=!1;continue}throw C(U)}return P.filename=null,{package:k,imports:L,weakImports:H,syntax:$,root:j}}return parse_1}var common_1,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common_1;hasRequiredCommon=1,common_1=o;var f=/\/|\./;function o(d,a){f.test(d)||(d="google/protobuf/"+d+".proto",a={nested:{google:{nested:{protobuf:{nested:a}}}}}),o[d]=a}o("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var c;return o("duration",{Duration:c={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),o("timestamp",{Timestamp:c}),o("empty",{Empty:{fields:{}}}),o("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),o("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),o("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),o.get=function(a){return o[a]||null},common_1}var hasRequiredSrc;function requireSrc(){if(hasRequiredSrc)return src.exports;hasRequiredSrc=1;var f=src.exports=requireIndexLight();return f.build="full",f.tokenize=requireTokenize(),f.parse=requireParse(),f.common=requireCommon(),f.Root._configure(f.Type,f.parse,f.common),src.exports}var protobufjs,hasRequiredProtobufjs;function requireProtobufjs(){return hasRequiredProtobufjs||(hasRequiredProtobufjs=1,protobufjs=requireSrc()),protobufjs}var protobufjsExports=requireProtobufjs(),descriptor$1={exports:{}};const nested={google:{nested:{protobuf:{nested:{FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}}}}}}},require$$1={nested};var hasRequiredDescriptor;function requireDescriptor(){return hasRequiredDescriptor||(hasRequiredDescriptor=1,function(f,o){var c=requireProtobufjs();f.exports=o=c.descriptor=c.Root.fromJSON(require$$1).lookup(".google.protobuf");var d=c.Namespace,a=c.Root,r=c.Enum,e=c.Type,t=c.Field,n=c.MapField,i=c.OneOf,h=c.Service,s=c.Method;a.fromDescriptor=function(p){typeof p.length=="number"&&(p=o.FileDescriptorSet.decode(p));var R=new a;if(p.file)for(var b,O,S=0,x;S<p.file.length;++S){if(O=R,(b=p.file[S]).package&&b.package.length&&(O=R.define(b.package)),b.name&&b.name.length&&R.files.push(O.filename=b.name),b.messageType)for(x=0;x<b.messageType.length;++x)O.add(e.fromDescriptor(b.messageType[x],b.syntax));if(b.enumType)for(x=0;x<b.enumType.length;++x)O.add(r.fromDescriptor(b.enumType[x]));if(b.extension)for(x=0;x<b.extension.length;++x)O.add(t.fromDescriptor(b.extension[x]));if(b.service)for(x=0;x<b.service.length;++x)O.add(h.fromDescriptor(b.service[x]));var k=F(b.options,o.FileOptions);if(k){var L=Object.keys(k);for(x=0;x<L.length;++x)O.setOption(L[x],k[L[x]])}}return R},a.prototype.toDescriptor=function(p){var R=o.FileDescriptorSet.create();return l(this,R.file,p),R};function l(T,p,R){var b=o.FileDescriptorProto.create({name:T.filename||(T.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});R&&(b.syntax=R),T instanceof a||(b.package=T.fullName.substring(1));for(var O=0,S;O<T.nestedArray.length;++O)(S=T._nestedArray[O])instanceof e?b.messageType.push(S.toDescriptor(R)):S instanceof r?b.enumType.push(S.toDescriptor()):S instanceof t?b.extension.push(S.toDescriptor(R)):S instanceof h?b.service.push(S.toDescriptor()):S instanceof d&&l(S,p,R);b.options=j(T.options,o.FileOptions),b.messageType.length+b.enumType.length+b.extension.length+b.service.length&&p.push(b)}var u=0;e.fromDescriptor=function(p,R){typeof p.length=="number"&&(p=o.DescriptorProto.decode(p));var b=new e(p.name.length?p.name:"Type"+u++,F(p.options,o.MessageOptions)),O;if(p.oneofDecl)for(O=0;O<p.oneofDecl.length;++O)b.add(i.fromDescriptor(p.oneofDecl[O]));if(p.field)for(O=0;O<p.field.length;++O){var S=t.fromDescriptor(p.field[O],R);b.add(S),p.field[O].hasOwnProperty("oneofIndex")&&b.oneofsArray[p.field[O].oneofIndex].add(S)}if(p.extension)for(O=0;O<p.extension.length;++O)b.add(t.fromDescriptor(p.extension[O],R));if(p.nestedType)for(O=0;O<p.nestedType.length;++O)b.add(e.fromDescriptor(p.nestedType[O],R)),p.nestedType[O].options&&p.nestedType[O].options.mapEntry&&b.setOption("map_entry",!0);if(p.enumType)for(O=0;O<p.enumType.length;++O)b.add(r.fromDescriptor(p.enumType[O]));if(p.extensionRange&&p.extensionRange.length)for(b.extensions=[],O=0;O<p.extensionRange.length;++O)b.extensions.push([p.extensionRange[O].start,p.extensionRange[O].end]);if(p.reservedRange&&p.reservedRange.length||p.reservedName&&p.reservedName.length){if(b.reserved=[],p.reservedRange)for(O=0;O<p.reservedRange.length;++O)b.reserved.push([p.reservedRange[O].start,p.reservedRange[O].end]);if(p.reservedName)for(O=0;O<p.reservedName.length;++O)b.reserved.push(p.reservedName[O])}return b},e.prototype.toDescriptor=function(p){var R=o.DescriptorProto.create({name:this.name}),b;for(b=0;b<this.fieldsArray.length;++b){var O;if(R.field.push(O=this._fieldsArray[b].toDescriptor(p)),this._fieldsArray[b]instanceof n){var S=P(this._fieldsArray[b].keyType,this._fieldsArray[b].resolvedKeyType),x=P(this._fieldsArray[b].type,this._fieldsArray[b].resolvedType),k=x===11||x===14?this._fieldsArray[b].resolvedType&&z(this.parent,this._fieldsArray[b].resolvedType)||this._fieldsArray[b].type:void 0;R.nestedType.push(o.DescriptorProto.create({name:O.typeName,field:[o.FieldDescriptorProto.create({name:"key",number:1,label:1,type:S}),o.FieldDescriptorProto.create({name:"value",number:2,label:1,type:x,typeName:k})],options:o.MessageOptions.create({mapEntry:!0})}))}}for(b=0;b<this.oneofsArray.length;++b)R.oneofDecl.push(this._oneofsArray[b].toDescriptor());for(b=0;b<this.nestedArray.length;++b)this._nestedArray[b]instanceof t?R.field.push(this._nestedArray[b].toDescriptor(p)):this._nestedArray[b]instanceof e?R.nestedType.push(this._nestedArray[b].toDescriptor(p)):this._nestedArray[b]instanceof r&&R.enumType.push(this._nestedArray[b].toDescriptor());if(this.extensions)for(b=0;b<this.extensions.length;++b)R.extensionRange.push(o.DescriptorProto.ExtensionRange.create({start:this.extensions[b][0],end:this.extensions[b][1]}));if(this.reserved)for(b=0;b<this.reserved.length;++b)typeof this.reserved[b]=="string"?R.reservedName.push(this.reserved[b]):R.reservedRange.push(o.DescriptorProto.ReservedRange.create({start:this.reserved[b][0],end:this.reserved[b][1]}));return R.options=j(this.options,o.MessageOptions),R};var y=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;t.fromDescriptor=function(p,R){if(typeof p.length=="number"&&(p=o.DescriptorProto.decode(p)),typeof p.number!="number")throw Error("missing field id");var b;p.typeName&&p.typeName.length?b=p.typeName:b=_(p.type);var O;switch(p.label){case 1:O=void 0;break;case 2:O="required";break;case 3:O="repeated";break;default:throw Error("illegal label: "+p.label)}var S=p.extendee;p.extendee!==void 0&&(S=S.length?S:void 0);var x=new t(p.name.length?p.name:"field"+p.number,p.number,b,O,S);if(x.options=F(p.options,o.FieldOptions),p.defaultValue&&p.defaultValue.length){var k=p.defaultValue;switch(k){case"true":case"TRUE":k=!0;break;case"false":case"FALSE":k=!1;break;default:var L=y.exec(k);L&&(k=parseInt(k));break}x.setOption("default",k)}return I(p.type)&&(R==="proto3"?p.options&&!p.options.packed&&x.setOption("packed",!1):p.options&&p.options.packed||x.setOption("packed",!1)),x},t.prototype.toDescriptor=function(p){var R=o.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)R.type=11,R.typeName=c.util.ucFirst(this.name),R.label=3;else{switch(R.type=P(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:R.typeName=this.resolvedType?z(this.parent,this.resolvedType):this.type;break}switch(this.rule){case"repeated":R.label=3;break;case"required":R.label=2;break;default:R.label=1;break}}if(R.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(R.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(R.options=j(this.options,o.FieldOptions),this.options.default!=null&&(R.defaultValue=String(this.options.default))),p==="proto3"?this.packed||((R.options||(R.options=o.FieldOptions.create())).packed=!1):this.packed&&((R.options||(R.options=o.FieldOptions.create())).packed=!0),R};var v=0;r.fromDescriptor=function(p){typeof p.length=="number"&&(p=o.EnumDescriptorProto.decode(p));var R={};if(p.value)for(var b=0;b<p.value.length;++b){var O=p.value[b].name,S=p.value[b].number||0;R[O&&O.length?O:"NAME"+S]=S}return new r(p.name&&p.name.length?p.name:"Enum"+v++,R,F(p.options,o.EnumOptions))},r.prototype.toDescriptor=function(){for(var p=[],R=0,b=Object.keys(this.values);R<b.length;++R)p.push(o.EnumValueDescriptorProto.create({name:b[R],number:this.values[b[R]]}));return o.EnumDescriptorProto.create({name:this.name,value:p,options:j(this.options,o.EnumOptions)})};var w=0;i.fromDescriptor=function(p){return typeof p.length=="number"&&(p=o.OneofDescriptorProto.decode(p)),new i(p.name&&p.name.length?p.name:"oneof"+w++)},i.prototype.toDescriptor=function(){return o.OneofDescriptorProto.create({name:this.name})};var g=0;h.fromDescriptor=function(p){typeof p.length=="number"&&(p=o.ServiceDescriptorProto.decode(p));var R=new h(p.name&&p.name.length?p.name:"Service"+g++,F(p.options,o.ServiceOptions));if(p.method)for(var b=0;b<p.method.length;++b)R.add(s.fromDescriptor(p.method[b]));return R},h.prototype.toDescriptor=function(){for(var p=[],R=0;R<this.methodsArray.length;++R)p.push(this._methodsArray[R].toDescriptor());return o.ServiceDescriptorProto.create({name:this.name,method:p,options:j(this.options,o.ServiceOptions)})};var m=0;s.fromDescriptor=function(p){return typeof p.length=="number"&&(p=o.MethodDescriptorProto.decode(p)),new s(p.name&&p.name.length?p.name:"Method"+m++,"rpc",p.inputType,p.outputType,!!p.clientStreaming,!!p.serverStreaming,F(p.options,o.MethodOptions))},s.prototype.toDescriptor=function(){return o.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:j(this.options,o.MethodOptions)})};function _(T){switch(T){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+T)}function I(T){switch(T){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function P(T,p){switch(T){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(p instanceof r)return 14;if(p instanceof e)return p.group?10:11;throw Error("illegal type: "+T)}function F(T,p){if(T){for(var R=[],b=0,O,S,x;b<p.fieldsArray.length;++b)(S=(O=p._fieldsArray[b]).name)!=="uninterpretedOption"&&T.hasOwnProperty(S)&&(x=T[S],O.resolvedType instanceof r&&typeof x=="number"&&O.resolvedType.valuesById[x]!==void 0&&(x=O.resolvedType.valuesById[x]),R.push(M(S),x));return R.length?c.util.toObject(R):void 0}}function j(T,p){if(T){for(var R=[],b=0,O=Object.keys(T),S,x;b<O.length;++b)if(x=T[S=O[b]],S!=="default"){var k=p.fields[S];!k&&!(k=p.fields[S=c.util.camelCase(S)])||R.push(S,x)}return R.length?p.fromObject(c.util.toObject(R)):void 0}}function z(T,p){var R=T.fullName.split("."),b=p.fullName.split("."),O=0,S=0,x=b.length-1;if(!(T instanceof a)&&p instanceof d)for(;O<R.length&&S<x&&R[O]===b[S];){var k=p.lookup(R[O++],!0);if(k!==null&&k!==p)break;++S}else for(;O<R.length&&S<x&&R[O]===b[S];++O,++S);return b.slice(S).join(".")}function M(T){return T.substring(0,1)+T.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(p,R){return"_"+R.toLowerCase()})}}(descriptor$1,descriptor$1.exports)),descriptor$1.exports}var descriptorExports=requireDescriptor();const descriptor=getDefaultExportFromCjs(descriptorExports),CANVAS_DROP_DELTA={x:-32*8,y:-32*2},CANVAS_POSITION={Client:{x:-10*CANVAS_GRID,y:0},Topic:{x:-10*CANVAS_GRID,y:0},Function:{x:-10*CANVAS_GRID,y:CANVAS_GRID*5},Transition:{x:10*CANVAS_GRID,y:4*CANVAS_GRID},PolicySchema:{x:-10*CANVAS_GRID,y:CANVAS_GRID*10},SchemaOperation:{y:CANVAS_GRID*5},Validator:{x:-10*CANVAS_GRID,y:CANVAS_GRID*5},OperationSuccess:{x:10*CANVAS_GRID,y:0},OperationError:{x:10*CANVAS_GRID,y:CANVAS_GRID*4}},getScriptFamilies=f=>f.reduce((o,c)=>(o[c.id]||(o[c.id]={name:c.id,versions:[],type:c.functionType}),c.version&&o[c.id].versions.push(c.version),o),{}),getSchemaFamilies=f=>f.reduce((o,c)=>{if(o[c.id])c.version&&o[c.id].versions.push(c.version);else{let d;try{d=JSON.parse(atob(c.schemaDefinition)).description}catch{}o[c.id]={name:c.id,versions:[],type:c.type,description:d},c.version&&o[c.id].versions.push(c.version)}return o},{});function checkValiditySchema(f){if(!f.data.type||!f.data.version||!f.data.schemaSource)return{node:f,error:PolicyCheckErrors.notConfigured(f,"type, version, schemaSource")};if(f.data.type===SchemaType.JSON)return{data:{id:f.data.name,type:f.data.type,schemaDefinition:btoa(f.data.schemaSource)},node:f};if(f.data.type===SchemaType.PROTOBUF){if(!f.data.messageType)return{node:f,error:PolicyCheckErrors.notConfigured(f,"messageType")};try{const c=protobufjsExports.parse(f.data.schemaSource).root.toDescriptor("proto3"),d=descriptor.FileDescriptorSet.encode(c).finish(),a=protobufjsExports.util.base64.encode(d,0,d.length),r=new Uint8Array(protobufjsExports.util.base64.length(a));protobufjsExports.util.base64.decode(a,r,0);const e=descriptor.FileDescriptorSet.decode(r);return JSON.stringify(c)!==JSON.stringify(e)?{node:f,error:PolicyCheckErrors.internal(f,new Error(instance.t("datahub:error.validation.protobuf.encoding")))}:{data:{id:f.data.name,type:f.data.type,schemaDefinition:a,arguments:{messageType:f.data.messageType}},node:f}}catch(o){return console.log(o),{node:f,error:PolicyCheckErrors.internal(f,o)}}}return{node:f,error:PolicyCheckErrors.notConfigured(f,"schemaSource")}}function loadSchema(f,o,c,d,a){const r=a.find(e=>e.id===d.schemaId);if(!r)throw new Error(instance.t("datahub:error.loading.connection.notFound",{type:DataHubNodeType.SCHEMA}));if(r.type===SchemaType.JSON){const e={id:d.schemaId,type:DataHubNodeType.SCHEMA,position:{x:f.position.x+CANVAS_POSITION.PolicySchema.x,y:f.position.y+c*CANVAS_POSITION.SchemaOperation.y},data:{name:r.id,type:enumFromStringValue(SchemaType,r.type),schemaSource:atob(r.schemaDefinition),version:r.version||ResourceWorkingVersion.DRAFT,internalVersions:r.version?[r.version]:void 0}};return[{item:e,type:"add"},{source:e.id,target:f.id,sourceHandle:null,targetHandle:o}]}if(r.type===SchemaType.PROTOBUF){const e=new Uint8Array(protobufjsExports.util.base64.length(r.schemaDefinition));protobufjsExports.util.base64.decode(r.schemaDefinition,e,0);const n=descriptor.FileDescriptorSet.decode(e).file[0].messageType[0].name,i={id:d.schemaId,type:DataHubNodeType.SCHEMA,position:{x:f.position.x+c,y:f.position.y+CANVAS_POSITION.PolicySchema.y},data:{type:enumFromStringValue(SchemaType,r.type),schemaSource:instance.t("datahub:error.validation.protobuf.template",{source:n}),version:1}};return[{item:i,type:"add"},{source:i.id,target:f.id,sourceHandle:null,targetHandle:o}]}throw new Error(instance.t("datahub:error.loading.schema.unknown",{type:r.type}))}export{CANVAS_POSITION as C,NodeIcon as N,CANVAS_DROP_DELTA as a,CANVAS_GRID as b,checkValiditySchema as c,getSchemaFamilies as d,getScriptFamilies as e,getHandlePosition as g,loadSchema as l,protobufjsExports as p};
//# sourceMappingURL=SchemaNode.utils-CqHD45U7.js.map
