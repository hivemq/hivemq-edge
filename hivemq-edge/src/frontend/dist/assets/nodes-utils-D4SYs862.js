import{z as d}from"./index-cMih3SEP.js";import{N as r,I as E,E as P}from"./types-DcJW2o_l.js";import{c as x,d as w}from"./topics-utils-l3ij3e8P.js";import{i as G}from"./adapter.utils-B-ndd-tn.js";import{M as g,P as h}from"./index-Dis5-5gm.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},o=new t.Error().stack;o&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[o]="af9dbde0-550b-4701-8342-53367b73e796",t._sentryDebugIdIdentifier="sentry-dbid-af9dbde0-550b-4701-8342-53367b73e796")}catch{}})();const D=(t,o)=>(o==null?void 0:o.runtime)===d.runtime.STOPPED?t.colors.status.error[500]:(o==null?void 0:o.connection)===d.connection.CONNECTED?t.colors.status.connected[500]:(o==null?void 0:o.connection)===d.connection.DISCONNECTED?t.colors.status.disconnected[500]:(o==null?void 0:o.connection)===d.connection.STATELESS?t.colors.status.stateless[500]:t.colors.status.error[500],V=(t,o)=>t.map(n=>{var c;if(n.type===r.BRIDGE_NODE){const s={...n.data},i=o.find(e=>e.id===s.id);return!i||i.connection===((c=s.status)==null?void 0:c.connection)||(n.data={...s,status:{connection:i.connection}}),n}if(n.type===r.ADAPTER_NODE){const s={...n.data},i=o.find(e=>e.id===s.id);return i&&(n.data={...s,status:{...i}}),n}return n}),$=(t,o,n,c)=>{const s={};return s.style={strokeWidth:1.5,stroke:c},s.animated=t&&o,s.markerEnd=n?{type:g.ArrowClosed,width:20,height:20,color:c}:void 0,s.data={isConnected:t,hasTopics:o},s},X=(t,o,n,c,s)=>{const i=[];return o.forEach(e=>{if(e.id.startsWith("connect-edge-group")){const u=c(e.source);if(!u||u.type!==r.CLUSTER_NODE)return e;const N=i.filter(y=>u.data.childrenNodeIds.includes(y.source)),T=N.every(y=>y.data.isConnected),A=N.every(y=>y.data.hasTopics),R={runtime:T?d.runtime.STARTED:d.runtime.STOPPED,connection:T?d.connection.CONNECTED:d.connection.DISCONNECTED};i.push({...e,...$(T,A,!0,D(s,R))});return}const[C,S]=e.source.split("@"),a=n.find(u=>u.id===S&&u.type===C);if(!a){i.push(e);return}const f=c(e.source),p=c(e.target),O=((a==null?void 0:a.connection)===d.connection.CONNECTED||(a==null?void 0:a.connection)===d.connection.STATELESS)&&(a==null?void 0:a.runtime)===d.runtime.STARTED;if(f&&f.type===r.ADAPTER_NODE){const u=t==null?void 0:t.find(N=>N.id===f.data.type);(p==null?void 0:p.type)===r.DEVICE_NODE?i.push({...e,...$(O,!1,G(u),D(s,a))}):i.push({...e,...$(O,!1,!0,D(s,a))});return}if(f&&f.type===r.BRIDGE_NODE){const{remote:u}=x(f.data);i.push({...e,...$(O,!!u.length,!0,D(s,a))});return}i.push(e)}),i},k=245,B=80,l={x:300,y:200},_={x:k+B,y:400},m=10,H={[r.BRIDGE_NODE]:[r.HOST_NODE,200,"target"],[r.ADAPTER_NODE]:[r.DEVICE_NODE,-175,"target"],[r.HOST_NODE]:[r.BRIDGE_NODE,-200,"source"],[r.DEVICE_NODE]:[r.ADAPTER_NODE,175,"source"]},q=(t,o)=>({id:E.EDGE_NODE,type:r.EDGE_NODE,data:{label:t},position:l}),F=(t,o,n,c,s)=>{var N,T,A;const i=`${E.BRIDGE_NODE}@${t.id}`,e=((N=t.status)==null?void 0:N.connection)===d.connection.CONNECTED||((T=t.status)==null?void 0:T.runtime)===d.runtime.STARTED&&((A=t.status)==null?void 0:A.connection)===d.connection.STATELESS,{local:C,remote:S}=x(t),a={id:i,type:r.BRIDGE_NODE,sourcePosition:h.Top,data:t,position:{x:l.x+_.x*(o-(n-1)/2),y:l.y+_.y}},f={id:`${E.CONNECTOR}-${E.EDGE_NODE}-${i}`,target:E.EDGE_NODE,targetHandle:"Bottom",focusable:!1,source:i,type:P.REPORT_EDGE,markerEnd:{type:g.ArrowClosed,width:20,height:20,color:D(c,t.status)},animated:e&&!!S.length,style:{strokeWidth:1.5,stroke:D(c,t.status)}},p=`${E.HOST_NODE}@${t.id}`,O={id:p,type:r.HOST_NODE,targetPosition:h.Top,data:{label:t.host},position:{x:l.x+_.x*(o-(n-1)/2),y:l.y+_.y+250}},u={id:`${E.CONNECTOR}-${E.HOST_NODE}@${t.id}`,target:p,sourceHandle:"Bottom",source:i,focusable:!1,markerEnd:{type:g.ArrowClosed,width:20,height:20,color:D(c,t.status)},animated:e&&!!C.length,style:{strokeWidth:1.5,stroke:D(c,t.status)}};return{nodeBridge:a,edgeConnector:f,nodeHost:O,hostConnector:u}},z=(t,o,n)=>{const c=`${E.LISTENER_NODE}@${t.name}`,s={id:c,type:r.LISTENER_NODE,targetPosition:h.Left,data:t,position:{x:l.x-_.x,y:l.y+80*o}},i={id:`${E.CONNECTOR}-${E.EDGE_NODE}-${c}`,source:E.EDGE_NODE,targetHandle:"Listeners",target:c,focusable:!1,markerEnd:{type:g.ArrowClosed,width:20,height:20}};return{nodeListener:s,edgeConnector:i}},U=(t,o,n,c,s,i)=>{var R,y,I;const e=`${E.ADAPTER_NODE}@${o.id}`,C=((R=o.status)==null?void 0:R.connection)===d.connection.CONNECTED||((y=o.status)==null?void 0:y.runtime)===d.runtime.STARTED&&((I=o.status)==null?void 0:I.connection)===d.connection.STATELESS,S=w(t,o.config),a=n%m,f=Math.floor(n/m)+1,p=Math.floor((Math.min(m,c)-1)/2),O={id:e,type:r.ADAPTER_NODE,sourcePosition:h.Bottom,data:o,position:{x:l.x+_.x*(a-p),y:l.y-_.y*f/1.5}},u={id:`${E.CONNECTOR}-${E.EDGE_NODE}-${e}`,target:E.EDGE_NODE,targetHandle:"Top",source:e,focusable:!1,type:P.REPORT_EDGE,markerEnd:{type:g.ArrowClosed,width:20,height:20,color:D(s,o.status)},animated:C&&!!S.length,style:{strokeWidth:1.5,stroke:D(s,o.status)}},N=`${E.DEVICE_NODE}@${e}`,T={id:N,type:r.DEVICE_NODE,targetPosition:h.Top,data:{...t,sourceAdapterId:o.id},position:{x:O.position.x,y:O.position.y+H[r.ADAPTER_NODE][1]}},A={id:`${E.CONNECTOR}-${E.DEVICE_NODE}@${e}`,target:N,sourceHandle:"Top",source:e,focusable:!1,markerEnd:{type:g.ArrowClosed,width:20,height:20,color:D(s,o.status)},animated:C&&!!S.length,style:{strokeWidth:1.5,stroke:D(s,o.status)}};return{nodeAdapter:O,edgeConnector:u,nodeDevice:T,deviceConnector:A}},Y=t=>{if(r.ADAPTER_NODE===t.type){const o=t.data;return[`com.hivemq.edge.protocol-adapters.${o.type}.${o.id}.read.publish.success.count`]}return r.BRIDGE_NODE===t.type?[`com.hivemq.edge.bridge.${t.data.id}.forward.publish.count`]:[]};export{k as C,z as a,F as b,q as c,U as d,X as e,H as f,Y as g,D as h,V as u};
//# sourceMappingURL=nodes-utils-D4SYs862.js.map
