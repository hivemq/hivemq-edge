import{u as f,j as e,m as n,ae as B,n as c,ad as p,r as h,C as I,H as w,aU as v,a2 as D,a0 as E,F as x,T as L,b,au as k,bm as H,S as T,B as W,c as P}from"./index-cMih3SEP.js";import{P as F}from"./PageContainer-BtWKGien.js";import{W as G,B as M}from"./WarningMessage-DBPfR2Kc.js";import{u as y}from"./useListBridges-BwHrTuI4.js";import{E as R}from"./chunk-FOYGMBBW-BIMWTz0V.js";import{u as _}from"./useGetBridgesStatus-BC_E09jB.js";import{C as A,D as $}from"./ConnectionController-DFWh8Ryw.js";import{C as q}from"./ConnectionStatusBadge-BqllVmcz.js";import{V as z}from"./chunk-KO6Q73AP-Bk5HKb-M.js";import{C as O}from"./chunk-BDSTZZXD-Biup13z0.js";import{C as V}from"./chunk-FHHZMTWR-BZ2wKB7t.js";import{C as Q}from"./chunk-2EW3JUUD-iAZ0BXIz.js";import{S as m}from"./chunk-GOJLRND4-gY5DQ7Jj.js";import{S as U}from"./chunk-NEK3OOAM-DIaqeGSv.js";import{b as J,B as K}from"./useBridgeConfig-BEAvVxM7.js";import"./useEdgeToast-ulWoRSS2.js";import"./toast-utils-BddXXXrS.js";import"./chunk-HB6KBUMZ-BnKuEGjs.js";import"./chunk-OCNORRQU-qVjYAyQ7.js";import"./index-DDmdO6wr.js";import"./adapter.utils-B-ndd-tn.js";import"./index-C46KiF-i.js";import"./index-BTlOwmq4.js";import"./chunk-JARCRF6W-CHhnzfpl.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},s=new t.Error().stack;s&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[s]="7c8dda6b-9562-49f9-81db-3efe62bb9f22",t._sentryDebugIdIdentifier="sentry-dbid-7c8dda6b-9562-49f9-81db-3efe62bb9f22")}catch{}})();const X="/app/assets/bridges-B5LLI6gi.svg",Y=(t,s)=>t.slice(0,s),Z=(t,s=7)=>{if(!t)return"";const[d,...r]=t.split("."),i=Y(d,s);return[i===d?i:i+"[...]",...r].join(".")},N=({host:t,port:s,clientId:d,localSubscriptions:r,remoteSubscriptions:i})=>{const{t:a}=f();return e.jsxs(n.dl,{display:"grid",gridTemplateColumns:"repeat(2, minmax(0px, 1fr))",columnGap:4,alignItems:"center",children:[e.jsx(n.dt,{children:e.jsx(z,{children:a("bridge.connection.host")})}),e.jsx(n.dd,{gridColumn:"1/ span 2",children:e.jsx(B,{label:t,hasArrow:!0,placement:"top",children:e.jsx(c,{overflow:"hidden",textOverflow:"ellipsis",fontWeight:"bold",children:Z(t,20)})})}),e.jsx(n.dt,{children:a("bridge.connection.port")}),e.jsx(n.dd,{children:s}),e.jsx(n.dt,{children:a("bridge.connection.clientId")}),e.jsx(n.dd,{children:d}),e.jsx(n.dt,{children:a("bridge.subscription.type",{context:"local",count:(r==null?void 0:r.length)||0})}),e.jsx(n.dd,{children:e.jsx(p,{variant:"subtle",children:(r==null?void 0:r.length)||0})}),e.jsx(n.dt,{children:a("bridge.subscription.type",{context:"remote",count:(i==null?void 0:i.length)||0})}),e.jsx(n.dd,{children:e.jsxs(p,{variant:"subtle",children:[(i==null?void 0:i.length)||0," "]})})]})},u=({isLoading:t,onNavigate:s,role:d,...r})=>{const{t:i}=f(),{isFetching:a,data:l}=_(),j=h.useMemo(()=>{var g;return(g=l==null?void 0:l.items)==null?void 0:g.find(o=>o.id===r.id&&o.type==="bridge")},[l,r.id]);return e.jsxs(I,{overflow:"hidden","aria-labelledby":"bridge-name",role:d,children:[e.jsx(Q,{children:e.jsxs(m,{isLoaded:!t,display:"flex",children:[e.jsx(w,{size:"md",flex:1,m:"auto","data-testid":"bridge-name",id:"bridge-name",children:r.id}),e.jsx(c,{children:e.jsx(v,{"aria-label":i("bridge.action.edit"),icon:e.jsx(R,{}),onClick:()=>s==null?void 0:s(`/mqtt-bridges/${r.id}`)})})]})}),e.jsx(V,{py:0,children:e.jsxs(D,{children:[e.jsx(m,{isLoaded:!t,children:e.jsx(E,{boxSize:"100px",src:X,alt:i("bridge.title")})}),e.jsx(m,{isLoaded:!t,children:e.jsx(N,{...r})})]})}),e.jsx(O,{children:e.jsxs(m,{isLoaded:!t,as:x,w:"100%",children:[e.jsxs(c,{flex:1,children:[e.jsx("span",{style:{display:"inline-block",marginLeft:".2rem",marginRight:".2rem",width:".5rem",height:".5rem",background:a?"lightgrey":"transparent",transition:a?"none":"all .3s ease",borderRadius:"100%"}}),e.jsx(L,{as:"span",mr:2,children:i("bridge.status.label")}),e.jsx(q,{status:j})]}),e.jsx(x,{justifyContent:"flex-end",role:"toolbar",children:e.jsx(A,{type:$.BRIDGE,id:r.id,status:r.status})})]})})]})},S=()=>{var g;const{data:t,isLoading:s,isError:d,error:r}=y(),{t:i}=f(),a=h.useMemo(()=>!t||t.length===0,[t]),l=b(),j=o=>{l(o)};return d?e.jsx(c,{mt:"20%",mx:"20%",alignItems:"center",children:e.jsx(k,{type:r==null?void 0:r.message,message:((g=r==null?void 0:r.body)==null?void 0:g.title)||i("bridge.error.loading")})}):s?e.jsx(x,{mt:8,flexDirection:"row",flexWrap:"wrap",gap:"20px",children:e.jsx(u,{...H,isLoading:!0})}):a?e.jsx(G,{image:M,prompt:i("bridge.noDataWarning.description"),title:i("bridge.noDataWarning.title"),alt:i("bridge.title"),mt:10}):e.jsx(U,{mt:8,spacing:4,templateColumns:{base:"repeat(1, 1fr)",lg:"repeat(2, 1fr)","2xl":"repeat(3, 1fr)"},gap:6,role:"list","aria-label":i("bridge.list"),children:t==null?void 0:t.map((o,C)=>e.jsx(u,{...o,onNavigate:j,role:"listitem"},`${o.id}-${C}`))})},ee=({children:t})=>{const[s,d]=h.useState(J);return e.jsx(K.Provider,{value:{bridge:s,setBridge:d},children:t})},ve=()=>{const{t}=f(),s=b(),{isLoading:d,isError:r}=y();return e.jsx(F,{title:t("bridge.title"),subtitle:t("bridge.description"),cta:e.jsx(x,{height:"100%",justifyContent:"flex-end",alignItems:"flex-end",pb:6,children:e.jsx(W,{leftIcon:e.jsx(P,{}),onClick:()=>s("/mqtt-bridges/new"),isDisabled:d||r,variant:"primary",children:t("bridge.action.add")})}),children:e.jsxs(ee,{children:[e.jsx(S,{}),e.jsx(T,{})]})})};export{ve as default};
//# sourceMappingURL=BridgePage-BgUxXnZu.js.map
