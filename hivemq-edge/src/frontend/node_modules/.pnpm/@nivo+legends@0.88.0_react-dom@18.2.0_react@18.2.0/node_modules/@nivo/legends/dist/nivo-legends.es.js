import{jsx as t,jsxs as e}from"react/jsx-runtime";import{scaleLinear as i}from"d3-scale";import{getValueFormatter as n,useTheme as o,sanitizeSvgTextStyle as r,degreesToRadians as l}from"@nivo/core";import{computeContinuousColorScaleColorStops as a}from"@nivo/colors";import*as c from"react";import{Fragment as d,useState as s,useCallback as h,useMemo as g}from"react";var f=function(e){var i=e.x,n=e.y,o=e.size,r=e.fill,l=e.opacity,a=void 0===l?1:l,c=e.borderWidth,d=void 0===c?0:c,s=e.borderColor;return t("circle",{r:o/2,cx:i+o/2,cy:n+o/2,fill:r,opacity:a,strokeWidth:d,stroke:void 0===s?"transparent":s,style:{pointerEvents:"none"}})},m=function(e){var i=e.x,n=e.y,o=e.size,r=e.fill,l=e.opacity,a=void 0===l?1:l,c=e.borderWidth,d=void 0===c?0:c,s=e.borderColor;return t("g",{transform:"translate("+i+","+n+")",children:t("path",{d:"\n                    M"+o/2+" 0\n                    L"+.8*o+" "+o/2+"\n                    L"+o/2+" "+o+"\n                    L"+.2*o+" "+o/2+"\n                    L"+o/2+" 0\n                ",fill:r,opacity:a,strokeWidth:d,stroke:void 0===s?"transparent":s,style:{pointerEvents:"none"}})})},v=function(e){var i=e.x,n=e.y,o=e.size,r=e.fill,l=e.opacity,a=void 0===l?1:l,c=e.borderWidth,d=void 0===c?0:c,s=e.borderColor;return t("rect",{x:i,y:n,fill:r,opacity:a,strokeWidth:d,stroke:void 0===s?"transparent":s,width:o,height:o,style:{pointerEvents:"none"}})},u=function(e){var i=e.x,n=e.y,o=e.size,r=e.fill,l=e.opacity,a=void 0===l?1:l,c=e.borderWidth,d=void 0===c?0:c,s=e.borderColor;return t("g",{transform:"translate("+i+","+n+")",children:t("path",{d:"\n                M"+o/2+" 0\n                L"+o+" "+o+"\n                L0 "+o+"\n                L"+o/2+" 0\n            ",fill:r,opacity:a,strokeWidth:d,stroke:void 0===s?"transparent":s,style:{pointerEvents:"none"}})})};function p(){return p=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},p.apply(this,arguments)}var y={length:200,thickness:16,direction:"row",tickPosition:"after",tickSize:4,tickSpacing:3,tickOverlap:!1,tickFormat:function(t){return""+t},titleAlign:"start",titleOffset:4},k={top:0,right:0,bottom:0,left:0},x=function(t){var e,i=t.direction,n=t.itemsSpacing,o=t.padding,r=t.itemCount,l=t.itemWidth,a=t.itemHeight;if("number"!=typeof o&&("object"!=typeof(e=o)||Array.isArray(e)||null===e))throw new Error("Invalid property padding, must be one of: number, object");var c="number"==typeof o?{top:o,right:o,bottom:o,left:o}:p({},k,o),d=c.left+c.right,s=c.top+c.bottom,h=l+d,g=a+s,f=(r-1)*n;return"row"===i?h=l*r+f+d:"column"===i&&(g=a*r+f+s),{width:h,height:g,padding:c}},b=function(t){var e=t.anchor,i=t.translateX,n=t.translateY,o=t.containerWidth,r=t.containerHeight,l=t.width,a=t.height,c=i,d=n;switch(e){case"top":c+=(o-l)/2;break;case"top-right":c+=o-l;break;case"right":c+=o-l,d+=(r-a)/2;break;case"bottom-right":c+=o-l,d+=r-a;break;case"bottom":c+=(o-l)/2,d+=r-a;break;case"bottom-left":d+=r-a;break;case"left":d+=(r-a)/2;break;case"center":c+=(o-l)/2,d+=(r-a)/2}return{x:c,y:d}},S=function(t){var e,i,n,o,r,l,a=t.direction,c=t.justify,d=t.symbolSize,s=t.symbolSpacing,h=t.width,g=t.height;switch(a){case"left-to-right":e=0,i=(g-d)/2,o=g/2,l="central",c?(n=h,r="end"):(n=d+s,r="start");break;case"right-to-left":e=h-d,i=(g-d)/2,o=g/2,l="central",c?(n=0,r="start"):(n=h-d-s,r="end");break;case"top-to-bottom":e=(h-d)/2,i=0,n=h/2,r="middle",c?(o=g,l="alphabetic"):(o=d+s,l="text-before-edge");break;case"bottom-to-top":e=(h-d)/2,i=g-d,n=h/2,r="middle",c?(o=0,l="text-before-edge"):(o=g-d-s,l="alphabetic")}return{symbolX:e,symbolY:i,labelX:n,labelY:o,labelAnchor:r,labelAlignment:l}},A=function(t){var e,o=t.scale,r=t.ticks,l=t.length,c=void 0===l?y.length:l,d=t.thickness,s=void 0===d?y.thickness:d,h=t.direction,g=void 0===h?y.direction:h,f=t.tickPosition,m=void 0===f?y.tickPosition:f,v=t.tickSize,u=void 0===v?y.tickSize:v,p=t.tickSpacing,k=void 0===p?y.tickSpacing:p,x=t.tickOverlap,b=void 0===x?y.tickOverlap:x,S=t.tickFormat,A=void 0===S?y.tickFormat:S,W=t.title,z=t.titleAlign,C=void 0===z?y.titleAlign:z,w=t.titleOffset,X=void 0===w?y.titleOffset:w,Y="column"===g?[].concat(o.domain()).reverse():o.domain(),O=i().domain(Y);2===Y.length?O.range([0,c]):3===Y.length&&O.range([0,c/2,c]),e="thresholds"in o?[Y[0]].concat(o.thresholds(),[Y[1]]):Array.isArray(r)?r:o.ticks(r);var B,H,E,j,L,M,F=a(o,32),T=n(A),P=[],V=0,R=0;if("row"===g){var D,q,G;B=c,H=s,R=1;var I;L=0,E="start"===C?0:"middle"===C?c/2:c,"before"===m?(D=-u,q=b?s:0,G=-u-k,I="alphabetic",j=s+X,M="hanging"):(D=b?0:s,G=(q=s+u)+k,I="hanging",j=-X,M="alphabetic"),e.forEach((function(t){var e=O(t);P.push({x1:e,y1:D,x2:e,y2:q,text:T(t),textX:e,textY:G,textHorizontalAlign:"middle",textVerticalAlign:I})}))}else{var N,_,J,K;B=s,H=c,V=1;L=-90,j="start"===C?c:"middle"===C?c/2:0,"before"===m?(_=b?s:0,J=(N=-u)-k,K="end",E=s+X,M="hanging"):(N=b?0:s,J=(_=s+u)+k,K="start",E=-X,M="alphabetic"),e.forEach((function(t){var e=O(t);P.push({x1:N,y1:e,x2:_,y2:e,text:T(t),textX:J,textY:e,textHorizontalAlign:K,textVerticalAlign:"central"})}))}return{width:B,height:H,gradientX1:0,gradientY1:V,gradientX2:R,gradientY2:0,colorStops:F,ticks:P,titleText:W,titleX:E,titleY:j,titleRotation:L,titleHorizontalAlign:C,titleVerticalAlign:M}},W=function(i){var n=i.scale,r=i.ticks,l=i.length,a=void 0===l?y.length:l,c=i.thickness,s=void 0===c?y.thickness:c,h=i.direction,g=void 0===h?y.direction:h,f=i.tickPosition,m=void 0===f?y.tickPosition:f,v=i.tickSize,u=void 0===v?y.tickSize:v,k=i.tickSpacing,x=void 0===k?y.tickSpacing:k,b=i.tickOverlap,S=void 0===b?y.tickOverlap:b,W=i.tickFormat,z=void 0===W?y.tickFormat:W,C=i.title,w=i.titleAlign,X=void 0===w?y.titleAlign:w,Y=i.titleOffset,O=A({scale:n,ticks:r,length:a,thickness:s,direction:g,tickPosition:m,tickSize:u,tickSpacing:x,tickOverlap:S,tickFormat:z,title:C,titleAlign:X,titleOffset:void 0===Y?y.titleOffset:Y}),B=O.width,H=O.height,E=O.gradientX1,j=O.gradientY1,L=O.gradientX2,M=O.gradientY2,F=O.ticks,T=O.colorStops,P=O.titleText,V=O.titleX,R=O.titleY,D=O.titleRotation,q=O.titleVerticalAlign,G=O.titleHorizontalAlign,I=o(),N="ContinuousColorsLegendSvgGradient."+g+"."+T.map((function(t){return t.offset})).join("_");return e("g",{children:[t("defs",{children:t("linearGradient",{id:N,x1:E,y1:j,x2:L,y2:M,children:T.map((function(e){return t("stop",p({},e))}))})}),P&&t("text",{transform:"translate("+V+", "+R+") rotate("+D+")",textAnchor:G,dominantBaseline:q,style:I.legends.title.text,children:P}),t("rect",{width:B,height:H,fill:"url(#"+N}),F.map((function(i,n){return e(d,{children:[t("line",{x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2,style:I.legends.ticks.line}),t("text",{x:i.textX,y:i.textY,textAnchor:i.textHorizontalAlign,dominantBaseline:i.textVerticalAlign,style:I.legends.ticks.text,children:i.text})]},n)}))]})},z=["containerWidth","containerHeight","anchor","translateX","translateY","length","thickness","direction"],C=function(e){var i,n,o=e.containerWidth,r=e.containerHeight,l=e.anchor,a=e.translateX,c=void 0===a?0:a,d=e.translateY,s=void 0===d?0:d,h=e.length,g=void 0===h?y.length:h,f=e.thickness,m=void 0===f?y.thickness:f,v=e.direction,u=void 0===v?y.direction:v,k=function(t,e){if(null==t)return{};var i,n,o={},r=Object.keys(t);for(n=0;n<r.length;n++)i=r[n],e.indexOf(i)>=0||(o[i]=t[i]);return o}(e,z);"row"===u?(i=g,n=m):(i=m,n=g);var x=b({anchor:l,translateX:c,translateY:s,containerWidth:o,containerHeight:r,width:i,height:n}),S=x.x,A=x.y;return t("g",{transform:"translate("+S+", "+A+")",children:t(W,p({length:g,thickness:m,direction:u},k))})},w={circle:f,diamond:m,square:v,triangle:u},X=function(i){var n,l,a,d,g,f,m,v,u,y,k,x=i.x,b=i.y,A=i.width,W=i.height,z=i.data,C=i.direction,X=void 0===C?"left-to-right":C,Y=i.justify,O=void 0!==Y&&Y,B=i.textColor,H=i.background,E=void 0===H?"transparent":H,j=i.opacity,L=void 0===j?1:j,M=i.symbolShape,F=void 0===M?"square":M,T=i.symbolSize,P=void 0===T?16:T,V=i.symbolSpacing,R=void 0===V?8:V,D=i.symbolBorderWidth,q=void 0===D?0:D,G=i.symbolBorderColor,I=void 0===G?"transparent":G,N=i.onClick,_=i.onMouseEnter,J=i.onMouseLeave,K=i.toggleSerie,Q=i.effects,U=s({}),Z=U[0],$=U[1],tt=o(),et=h((function(t){if(Q){var e=Q.filter((function(t){return"hover"===t.on})).reduce((function(t,e){return p({},t,e.style)}),{});$(e)}null==_||_(z,t)}),[_,z,Q]),it=h((function(t){if(Q){var e=Q.filter((function(t){return"hover"!==t.on})).reduce((function(t,e){return p({},t,e.style)}),{});$(e)}null==J||J(z,t)}),[J,z,Q]),nt=S({direction:X,justify:O,symbolSize:null!=(n=Z.symbolSize)?n:P,symbolSpacing:R,width:A,height:W}),ot=nt.symbolX,rt=nt.symbolY,lt=nt.labelX,at=nt.labelY,ct=nt.labelAnchor,dt=nt.labelAlignment,st=[N,_,J,K].some((function(t){return void 0!==t})),ht="function"==typeof F?F:w[F];return e("g",{transform:"translate("+x+","+b+")",style:{opacity:null!=(l=Z.itemOpacity)?l:L},children:[t("rect",{width:A,height:W,fill:null!=(a=Z.itemBackground)?a:E,style:{cursor:st?"pointer":"auto"},onClick:function(t){null==N||N(z,t),null==K||K(z.id)},onMouseEnter:et,onMouseLeave:it}),c.createElement(ht,p({id:z.id,x:ot,y:rt,size:null!=(d=Z.symbolSize)?d:P,fill:null!=(g=null!=(f=z.fill)?f:z.color)?g:"black",borderWidth:null!=(m=Z.symbolBorderWidth)?m:q,borderColor:null!=(v=Z.symbolBorderColor)?v:I},z.hidden?tt.legends.hidden.symbol:void 0)),t("text",{textAnchor:ct,style:p({},r(tt.legends.text),{fill:null!=(u=null!=(y=null!=(k=Z.itemTextColor)?k:B)?y:tt.legends.text.fill)?u:"black",dominantBaseline:dt,pointerEvents:"none",userSelect:"none"},z.hidden?tt.legends.hidden.text:void 0),x:lt,y:at,children:z.label})]})},Y=function(e){var i=e.data,n=e.x,o=e.y,r=e.direction,l=e.padding,a=void 0===l?0:l,c=e.justify,d=e.effects,s=e.itemWidth,h=e.itemHeight,g=e.itemDirection,f=void 0===g?"left-to-right":g,m=e.itemsSpacing,v=void 0===m?0:m,u=e.itemTextColor,p=e.itemBackground,y=void 0===p?"transparent":p,k=e.itemOpacity,b=void 0===k?1:k,S=e.symbolShape,A=e.symbolSize,W=e.symbolSpacing,z=e.symbolBorderWidth,C=e.symbolBorderColor,w=e.onClick,Y=e.onMouseEnter,O=e.onMouseLeave,B=e.toggleSerie,H=x({itemCount:i.length,itemWidth:s,itemHeight:h,itemsSpacing:v,direction:r,padding:a}).padding,E="row"===r?s+v:0,j="column"===r?h+v:0;return t("g",{transform:"translate("+n+","+o+")",children:i.map((function(e,i){return t(X,{data:e,x:i*E+H.left,y:i*j+H.top,width:s,height:h,direction:f,justify:c,effects:d,textColor:u,background:y,opacity:b,symbolShape:S,symbolSize:A,symbolSpacing:W,symbolBorderWidth:z,symbolBorderColor:C,onClick:w,onMouseEnter:Y,onMouseLeave:O,toggleSerie:B},i)}))})},O=function(e){var i=e.data,n=e.containerWidth,o=e.containerHeight,r=e.translateX,l=void 0===r?0:r,a=e.translateY,c=void 0===a?0:a,d=e.anchor,s=e.direction,h=e.padding,g=void 0===h?0:h,f=e.justify,m=e.itemsSpacing,v=void 0===m?0:m,u=e.itemWidth,p=e.itemHeight,y=e.itemDirection,k=e.itemTextColor,S=e.itemBackground,A=e.itemOpacity,W=e.symbolShape,z=e.symbolSize,C=e.symbolSpacing,w=e.symbolBorderWidth,X=e.symbolBorderColor,O=e.onClick,B=e.onMouseEnter,H=e.onMouseLeave,E=e.toggleSerie,j=e.effects,L=x({itemCount:i.length,itemsSpacing:v,itemWidth:u,itemHeight:p,direction:s,padding:g}),M=L.width,F=L.height,T=b({anchor:d,translateX:l,translateY:c,containerWidth:n,containerHeight:o,width:M,height:F}),P=T.x,V=T.y;return t(Y,{data:i,x:P,y:V,direction:s,padding:g,justify:f,effects:j,itemsSpacing:v,itemWidth:u,itemHeight:p,itemDirection:y,itemTextColor:k,itemBackground:S,itemOpacity:A,symbolShape:W,symbolSize:z,symbolSpacing:C,symbolBorderWidth:w,symbolBorderColor:X,onClick:O,onMouseEnter:B,onMouseLeave:H,toggleSerie:"boolean"==typeof E?void 0:E})},B={start:"left",middle:"center",end:"right"},H=function(t,e){var i=e.data,n=e.containerWidth,o=e.containerHeight,r=e.translateX,l=void 0===r?0:r,a=e.translateY,c=void 0===a?0:a,d=e.anchor,s=e.direction,h=e.padding,g=void 0===h?0:h,f=e.justify,m=void 0!==f&&f,v=e.itemsSpacing,u=void 0===v?0:v,p=e.itemWidth,y=e.itemHeight,k=e.itemDirection,A=void 0===k?"left-to-right":k,W=e.itemTextColor,z=e.symbolSize,C=void 0===z?16:z,w=e.symbolSpacing,X=void 0===w?8:w,Y=e.theme,O=x({itemCount:i.length,itemWidth:p,itemHeight:y,itemsSpacing:u,direction:s,padding:g}),H=O.width,E=O.height,j=O.padding,L=b({anchor:d,translateX:l,translateY:c,containerWidth:n,containerHeight:o,width:H,height:E}),M=L.x,F=L.y,T="row"===s?p+u:0,P="column"===s?y+u:0;t.save(),t.translate(M,F),t.font=Y.legends.text.fontSize+"px "+(Y.legends.text.fontFamily||"sans-serif"),i.forEach((function(e,i){var n,o,r=i*T+j.left,l=i*P+j.top,a=S({direction:A,justify:m,symbolSize:C,symbolSpacing:X,width:p,height:y}),c=a.symbolX,d=a.symbolY,s=a.labelX,h=a.labelY,g=a.labelAnchor,f=a.labelAlignment;t.fillStyle=null!=(n=e.color)?n:"black",t.fillRect(r+c,l+d,C,C),t.textAlign=B[g],"central"===f&&(t.textBaseline="middle"),t.fillStyle=null!=(o=null!=W?W:Y.legends.text.fill)?o:"black",t.fillText(String(e.label),r+s,l+h)})),t.restore()},E=function(t,e){var i=e.containerWidth,n=e.containerHeight,o=e.anchor,r=e.translateX,a=void 0===r?0:r,c=e.translateY,d=void 0===c?0:c,s=e.scale,h=e.length,g=void 0===h?y.length:h,f=e.thickness,m=void 0===f?y.thickness:f,v=e.direction,u=void 0===v?y.direction:v,p=e.ticks,k=e.tickPosition,x=void 0===k?y.tickPosition:k,S=e.tickSize,W=void 0===S?y.tickSize:S,z=e.tickSpacing,C=void 0===z?y.tickSpacing:z,w=e.tickOverlap,X=void 0===w?y.tickOverlap:w,Y=e.tickFormat,O=void 0===Y?y.tickFormat:Y,B=e.title,H=e.titleAlign,E=void 0===H?y.titleAlign:H,j=e.titleOffset,L=void 0===j?y.titleOffset:j,M=e.theme,F=A({scale:s,ticks:p,length:g,thickness:m,direction:u,tickPosition:x,tickSize:W,tickSpacing:C,tickOverlap:X,tickFormat:O,title:B,titleAlign:E,titleOffset:L}),T=F.width,P=F.height,V=F.gradientX1,R=F.gradientY1,D=F.gradientX2,q=F.gradientY2,G=F.colorStops,I=F.ticks,N=F.titleText,_=F.titleX,J=F.titleY,K=F.titleRotation,Q=F.titleVerticalAlign,U=F.titleHorizontalAlign,Z=b({anchor:o,translateX:a,translateY:d,containerWidth:i,containerHeight:n,width:T,height:P}),$=Z.x,tt=Z.y,et={font:t.font,textAlign:t.textAlign,textBaseline:t.textBaseline};t.save(),t.translate($,tt);var it=t.createLinearGradient(V*T,R*P,D*T,q*P);G.forEach((function(t){it.addColorStop(t.offset,t.stopColor)})),t.fillStyle=it,t.fillRect(0,0,T,P),t.font=(M.legends.ticks.text.fontWeight?M.legends.ticks.text.fontWeight+" ":"")+M.legends.ticks.text.fontSize+"px "+M.legends.ticks.text.fontFamily,I.forEach((function(e){var i;(null!=(i=M.legends.ticks.line.strokeWidth)?i:0)>0&&(t.lineWidth=Number(M.axis.ticks.line.strokeWidth),M.axis.ticks.line.stroke&&(t.strokeStyle=M.axis.ticks.line.stroke),t.lineCap="square",t.beginPath(),t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.stroke()),M.legends.ticks.text.fill&&(t.fillStyle=M.legends.ticks.text.fill),t.textAlign="middle"===e.textHorizontalAlign?"center":e.textHorizontalAlign,t.textBaseline="central"===e.textVerticalAlign?"middle":e.textVerticalAlign,t.fillText(e.text,e.textX,e.textY)})),N&&(t.save(),t.translate(_,J),t.rotate(l(K)),t.font=(M.legends.title.text.fontWeight?M.legends.title.text.fontWeight+" ":"")+M.legends.title.text.fontSize+"px "+M.legends.title.text.fontFamily,M.legends.title.text.fill&&(t.fillStyle=M.legends.title.text.fill),t.textAlign="middle"===U?"center":U,t.textBaseline=Q,t.fillText(N,0,0),t.restore()),t.restore(),t.font=et.font,t.textAlign=et.textAlign,t.textBaseline=et.textBaseline},j=function(t){var e=t.scale,i=t.domain,n=t.reverse,o=void 0!==n&&n,r=t.valueFormat,l=void 0===r?function(t){return t}:r,a=t.separator,c=void 0===a?" - ":a;return g((function(){var t=(null!=i?i:e.range()).map((function(t,i){var n=e.invertExtent(t),o=n[0],r=n[1];return{id:t,index:i,extent:[o,r],label:""+l(o)+c+l(r),value:e(o),color:t}}));return o&&t.reverse(),t}),[i,e,o,c,l])};export{C as AnchoredContinuousColorsLegendSvg,O as BoxLegendSvg,W as ContinuousColorsLegendSvg,Y as LegendSvg,X as LegendSvgItem,f as SymbolCircle,m as SymbolDiamond,v as SymbolSquare,u as SymbolTriangle,A as computeContinuousColorsLegend,x as computeDimensions,S as computeItemLayout,b as computePositionFromAnchor,y as continuousColorsLegendDefaults,E as renderContinuousColorLegendToCanvas,H as renderLegendToCanvas,j as useQuantizeColorScaleLegendData};
//# sourceMappingURL=nivo-legends.es.js.map
