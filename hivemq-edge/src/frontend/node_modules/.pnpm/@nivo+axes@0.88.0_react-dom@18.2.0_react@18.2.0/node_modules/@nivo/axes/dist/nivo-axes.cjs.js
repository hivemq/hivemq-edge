"use strict";var t=require("react"),e=require("@nivo/core"),i=require("@react-spring/web"),n=require("d3-time-format"),r=require("d3-format"),a=require("@nivo/scales"),o=require("react/jsx-runtime");function s(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(i){if("default"!==i){var n=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,n.get?n:{enumerable:!0,get:function(){return t[i]}})}})),e.default=t,Object.freeze(e)}var l=s(t);function c(){return c=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},c.apply(this,arguments)}var u=function(t){var i,n=t.axis,r=t.scale,o=t.ticksPosition,s=t.tickValues,l=t.tickSize,u=t.tickPadding,x=t.tickRotation,d=t.truncateTickAt,f=t.engine,m=void 0===f?"svg":f,y=a.getScaleTicks(r,s),g=e.textPropsByEngine[m],h="bandwidth"in r?a.centerScale(r):r,k={lineX:0,lineY:0},v={textX:0,textY:0},p="object"==typeof document&&"rtl"===document.dir,b=g.align.center,T=g.baseline.center;"x"===n?(i=function(t){var e;return{x:null!=(e=h(t))?e:0,y:0}},k.lineY=l*("after"===o?1:-1),v.textY=(l+u)*("after"===o?1:-1),T="after"===o?g.baseline.top:g.baseline.bottom,0===x?b=g.align.center:"after"===o&&x<0||"before"===o&&x>0?(b=g.align[p?"left":"right"],T=g.baseline.center):("after"===o&&x>0||"before"===o&&x<0)&&(b=g.align[p?"right":"left"],T=g.baseline.center)):(i=function(t){var e;return{x:0,y:null!=(e=h(t))?e:0}},k.lineX=l*("after"===o?1:-1),v.textX=(l+u)*("after"===o?1:-1),b="after"===o?g.align.left:g.align.right);return{ticks:y.map((function(t){var e="string"==typeof t?function(t){var e=String(t).length;return d&&d>0&&e>d?""+String(t).slice(0,d).concat("..."):""+t}(t):t;return c({key:t instanceof Date?""+t.valueOf():""+t,value:e},i(t),k,v)})),textAlign:b,textBaseline:T}},x=function(t,e){if(void 0===t||"function"==typeof t)return t;if("time"===e.type){var i=n.timeFormat(t);return function(t){return i(t instanceof Date?t:new Date(t))}}return r.format(t)},d=function(t){var e,i=t.width,n=t.height,r=t.scale,o=t.axis,s=t.values,l=(e=s,Array.isArray(e)?s:void 0)||a.getScaleTicks(r,s),c="bandwidth"in r?a.centerScale(r):r,u="x"===o?l.map((function(t){var e,i;return{key:t instanceof Date?""+t.valueOf():""+t,x1:null!=(e=c(t))?e:0,x2:null!=(i=c(t))?i:0,y1:0,y2:n}})):l.map((function(t){var e,n;return{key:t instanceof Date?""+t.valueOf():""+t,x1:0,x2:i,y1:null!=(e=c(t))?e:0,y2:null!=(n=c(t))?n:0}}));return u},f=t.memo((function(n){var r,a=n.value,s=n.format,l=n.lineX,u=n.lineY,x=n.onClick,d=n.textBaseline,f=n.textAnchor,m=n.animatedProps,y=e.useTheme(),g=y.axis.ticks.line,h=y.axis.ticks.text,k=null!=(r=null==s?void 0:s(a))?r:a,v=t.useMemo((function(){var t={opacity:m.opacity};return x?{style:c({},t,{cursor:"pointer"}),onClick:function(t){return x(t,k)}}:{style:t}}),[m.opacity,x,k]);return o.jsxs(i.animated.g,c({transform:m.transform},v,{children:[o.jsx("line",{x1:0,x2:l,y1:0,y2:u,style:g}),h.outlineWidth>0&&o.jsx(i.animated.text,{dominantBaseline:d,textAnchor:f,transform:m.textTransform,style:h,strokeWidth:2*h.outlineWidth,stroke:h.outlineColor,strokeLinejoin:"round",children:""+k}),o.jsx(i.animated.text,{dominantBaseline:d,textAnchor:f,transform:m.textTransform,style:e.sanitizeSvgTextStyle(h),children:""+k})]}))})),m=function(n){var r=n.axis,a=n.scale,s=n.x,d=void 0===s?0:s,m=n.y,y=void 0===m?0:m,g=n.length,h=n.ticksPosition,k=n.tickValues,v=n.tickSize,p=void 0===v?5:v,b=n.tickPadding,T=void 0===b?5:b,j=n.tickRotation,S=void 0===j?0:j,A=n.format,P=n.renderTick,W=void 0===P?f:P,C=n.truncateTickAt,O=n.legend,w=n.legendPosition,B=void 0===w?"end":w,X=n.legendOffset,Y=void 0===X?0:X,z=n.onClick,q=n.ariaHidden,E=e.useTheme(),M=E.axis.legend.text,R=t.useMemo((function(){return x(A,a)}),[A,a]),V=u({axis:r,scale:a,ticksPosition:h,tickValues:k,tickSize:p,tickPadding:T,tickRotation:S,truncateTickAt:C}),D=V.ticks,F=V.textAlign,L=V.textBaseline,G=null;if(void 0!==O){var N,H=0,I=0,J=0;"y"===r?(J=-90,H=Y,"start"===B?(N="start",I=g):"middle"===B?(N="middle",I=g/2):"end"===B&&(N="end")):(I=Y,"start"===B?N="start":"middle"===B?(N="middle",H=g/2):"end"===B&&(N="end",H=g)),G=o.jsxs(o.Fragment,{children:[M.outlineWidth>0&&o.jsx("text",{transform:"translate("+H+", "+I+") rotate("+J+")",textAnchor:N,style:c({dominantBaseline:"central"},M),strokeWidth:2*M.outlineWidth,stroke:M.outlineColor,strokeLinejoin:"round",children:O}),o.jsx("text",{transform:"translate("+H+", "+I+") rotate("+J+")",textAnchor:N,style:c({dominantBaseline:"central"},M),children:O})]})}var K=e.useMotionConfig(),Q=K.animate,U=K.config,Z=i.useSpring({transform:"translate("+d+","+y+")",lineX2:"x"===r?g:0,lineY2:"x"===r?0:g,config:U,immediate:!Q}),$=t.useCallback((function(t){return{opacity:1,transform:"translate("+t.x+","+t.y+")",textTransform:"translate("+t.textX+","+t.textY+") rotate("+S+")"}}),[S]),_=t.useCallback((function(t){return{opacity:0,transform:"translate("+t.x+","+t.y+")",textTransform:"translate("+t.textX+","+t.textY+") rotate("+S+")"}}),[S]),tt=i.useTransition(D,{keys:function(t){return t.key},initial:$,from:_,enter:$,update:$,leave:{opacity:0},config:U,immediate:!Q});return o.jsxs(i.animated.g,{transform:Z.transform,"aria-hidden":q,children:[tt((function(t,e,i,n){return l.createElement(W,c({tickIndex:n,format:R,rotate:S,textBaseline:L,textAnchor:F,truncateTickAt:C,animatedProps:t},e,z?{onClick:z}:{}))})),o.jsx(i.animated.line,{style:E.axis.domain.line,x1:0,x2:Z.lineX2,y1:0,y2:Z.lineY2}),G]})},y=t.memo(m),g=["top","right","bottom","left"],h=t.memo((function(t){var e=t.xScale,i=t.yScale,n=t.width,r=t.height,a={top:t.top,right:t.right,bottom:t.bottom,left:t.left};return o.jsx(o.Fragment,{children:g.map((function(t){var s=a[t];if(!s)return null;var l="top"===t||"bottom"===t,u="top"===t||"left"===t?"before":"after";return o.jsx(y,c({},s,{axis:l?"x":"y",x:"right"===t?n:0,y:"bottom"===t?r:0,scale:l?e:i,length:l?n:r,ticksPosition:u,truncateTickAt:s.truncateTickAt}),t)}))})})),k=t.memo((function(t){var n=t.animatedProps,r=e.useTheme();return o.jsx(i.animated.line,c({},n,r.grid.line))})),v=t.memo((function(n){var r=n.lines,a=e.useMotionConfig(),s=a.animate,l=a.config,u=i.useTransition(r,{keys:function(t){return t.key},initial:function(t){return{opacity:1,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2}},from:function(t){return{opacity:0,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2}},enter:function(t){return{opacity:1,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2}},update:function(t){return{opacity:1,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2}},leave:{opacity:0},config:l,immediate:!s});return o.jsx("g",{children:u((function(e,i){return t.createElement(k,c({},i,{key:i.key,animatedProps:e}))}))})})),p=t.memo((function(e){var i=e.width,n=e.height,r=e.xScale,a=e.yScale,s=e.xValues,l=e.yValues,c=t.useMemo((function(){return!!r&&d({width:i,height:n,scale:r,axis:"x",values:s})}),[r,s,i,n]),u=t.useMemo((function(){return!!a&&d({width:i,height:n,scale:a,axis:"y",values:l})}),[n,i,a,l]);return o.jsxs(o.Fragment,{children:[c&&o.jsx(v,{lines:c}),u&&o.jsx(v,{lines:u})]})})),b=function(t,i){var n,r=i.axis,a=i.scale,o=i.x,s=void 0===o?0:o,l=i.y,c=void 0===l?0:l,x=i.length,d=i.ticksPosition,f=i.tickValues,m=i.tickSize,y=void 0===m?5:m,g=i.tickPadding,h=void 0===g?5:g,k=i.tickRotation,v=void 0===k?0:k,p=i.format,b=i.legend,T=i.legendPosition,j=void 0===T?"end":T,S=i.legendOffset,A=void 0===S?0:S,P=i.theme,W=u({axis:r,scale:a,ticksPosition:d,tickValues:f,tickSize:y,tickPadding:h,tickRotation:v,engine:"canvas"}),C=W.ticks,O=W.textAlign,w=W.textBaseline;t.save(),t.translate(s,c),t.textAlign=O,t.textBaseline=w;var B=P.axis.ticks.text;t.font=(B.fontWeight?B.fontWeight+" ":"")+B.fontSize+"px "+B.fontFamily,(null!=(n=P.axis.domain.line.strokeWidth)?n:0)>0&&(t.lineWidth=Number(P.axis.domain.line.strokeWidth),t.lineCap="square",P.axis.domain.line.stroke&&(t.strokeStyle=P.axis.domain.line.stroke),t.beginPath(),t.moveTo(0,0),t.lineTo("x"===r?x:0,"x"===r?0:x),t.stroke());var X="function"==typeof p?p:function(t){return""+t};if(C.forEach((function(i){var n;(null!=(n=P.axis.ticks.line.strokeWidth)?n:0)>0&&(t.lineWidth=Number(P.axis.ticks.line.strokeWidth),t.lineCap="square",P.axis.ticks.line.stroke&&(t.strokeStyle=P.axis.ticks.line.stroke),t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(i.x+i.lineX,i.y+i.lineY),t.stroke());var r=X(i.value);t.save(),t.translate(i.x+i.textX,i.y+i.textY),t.rotate(e.degreesToRadians(v)),B.outlineWidth>0&&(t.strokeStyle=B.outlineColor,t.lineWidth=2*B.outlineWidth,t.lineJoin="round",t.strokeText(""+r,0,0)),P.axis.ticks.text.fill&&(t.fillStyle=B.fill),t.fillText(""+r,0,0),t.restore()})),void 0!==b){var Y=0,z=0,q=0,E="center";"y"===r?(q=-90,Y=A,"start"===j?(E="start",z=x):"middle"===j?(E="center",z=x/2):"end"===j&&(E="end")):(z=A,"start"===j?E="start":"middle"===j?(E="center",Y=x/2):"end"===j&&(E="end",Y=x)),t.translate(Y,z),t.rotate(e.degreesToRadians(q)),t.font=(P.axis.legend.text.fontWeight?P.axis.legend.text.fontWeight+" ":"")+P.axis.legend.text.fontSize+"px "+P.axis.legend.text.fontFamily,P.axis.legend.text.fill&&(t.fillStyle=P.axis.legend.text.fill),t.textAlign=E,t.textBaseline="middle",t.fillText(b,0,0)}t.restore()};exports.Axes=h,exports.Axis=y,exports.AxisTick=f,exports.Grid=p,exports.GridLine=k,exports.GridLines=v,exports.NonMemoizedAxis=m,exports.positions=g,exports.renderAxesToCanvas=function(t,e){var i=e.xScale,n=e.yScale,r=e.width,a=e.height,o=e.top,s=e.right,l=e.bottom,u=e.left,d=e.theme,f={top:o,right:s,bottom:l,left:u};g.forEach((function(e){var o=f[e];if(!o)return null;var s="top"===e||"bottom"===e,l="top"===e||"left"===e?"before":"after",u=s?i:n,m=x(o.format,u);b(t,c({},o,{axis:s?"x":"y",x:"right"===e?r:0,y:"bottom"===e?a:0,scale:u,format:m,length:s?r:a,ticksPosition:l,theme:d}))}))},exports.renderAxisToCanvas=b,exports.renderGridLinesToCanvas=function(t,e){var i=e.width,n=e.height,r=e.scale,a=e.axis,o=e.values;d({width:i,height:n,scale:r,axis:a,values:o}).forEach((function(e){t.beginPath(),t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.stroke()}))};
//# sourceMappingURL=nivo-axes.cjs.js.map
