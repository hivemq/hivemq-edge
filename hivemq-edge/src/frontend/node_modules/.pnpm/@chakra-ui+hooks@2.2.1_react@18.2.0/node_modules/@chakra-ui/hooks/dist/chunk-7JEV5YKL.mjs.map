{"version":3,"sources":["../src/use-event-listener.ts"],"sourcesContent":["import { runIfFn } from \"@chakra-ui/utils\"\nimport { useEffect } from \"react\"\nimport { useCallbackRef } from \"./use-callback-ref\"\n\ntype DocumentOrElement = Document | HTMLElement | null\n\nexport type EventListenerEnv = (() => DocumentOrElement) | DocumentOrElement\n\n/**\n * React hook to manage browser event listeners\n *\n * @param event the event name\n * @param handler the event handler function to execute\n * @param env the dom environment to execute against (defaults to `document`)\n * @param options the event listener options\n *\n * @internal\n */\nexport function useEventListener<K extends keyof DocumentEventMap>(\n  event: K | (string & {}),\n  handler?: (event: DocumentEventMap[K]) => void,\n  env?: EventListenerEnv,\n  options?: boolean | AddEventListenerOptions,\n) {\n  const listener = useCallbackRef(handler) as EventListener\n\n  useEffect(() => {\n    const node = runIfFn(env) ?? document\n\n    if (!handler) {\n      return\n    }\n\n    node.addEventListener(event, listener, options)\n    return () => {\n      node.removeEventListener(event, listener, options)\n    }\n  }, [event, env, options, listener, handler])\n\n  return () => {\n    const node = runIfFn(env) ?? document\n    node.removeEventListener(event, listener, options)\n  }\n}\n"],"mappings":";;;;;;AAAA,SAAS,eAAe;AACxB,SAAS,iBAAiB;AAiBnB,SAAS,iBACd,OACA,SACA,KACA,SACA;AACA,QAAM,WAAW,eAAe,OAAO;AAEvC,YAAU,MAAM;AA1BlB;AA2BI,UAAM,QAAO,aAAQ,GAAG,MAAX,YAAgB;AAE7B,QAAI,CAAC,SAAS;AACZ;AAAA,IACF;AAEA,SAAK,iBAAiB,OAAO,UAAU,OAAO;AAC9C,WAAO,MAAM;AACX,WAAK,oBAAoB,OAAO,UAAU,OAAO;AAAA,IACnD;AAAA,EACF,GAAG,CAAC,OAAO,KAAK,SAAS,UAAU,OAAO,CAAC;AAE3C,SAAO,MAAM;AAvCf;AAwCI,UAAM,QAAO,aAAQ,GAAG,MAAX,YAAgB;AAC7B,SAAK,oBAAoB,OAAO,UAAU,OAAO;AAAA,EACnD;AACF;","names":[]}