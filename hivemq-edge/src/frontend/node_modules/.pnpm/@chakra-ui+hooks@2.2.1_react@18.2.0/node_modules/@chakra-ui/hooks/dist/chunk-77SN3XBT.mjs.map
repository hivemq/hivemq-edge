{"version":3,"sources":["../src/use-pan-gesture.ts"],"sourcesContent":["import {\n  AnyPointerEvent,\n  noop,\n  PanEventHandler,\n  PanSession,\n  PanSessionHandlers,\n} from \"@chakra-ui/utils\"\nimport { useEffect, useRef } from \"react\"\nimport { usePointerEvent } from \"./use-pointer-event\"\nimport { useUnmountEffect } from \"./use-unmount-effect\"\n\nexport interface UsePanGestureProps {\n  onPan?: PanEventHandler\n  onPanStart?: PanEventHandler\n  onPanEnd?: PanEventHandler\n  onPanSessionStart?: PanEventHandler\n  onPanSessionEnd?: PanEventHandler\n  threshold?: number\n}\n\nexport function usePanGesture(\n  ref: React.RefObject<HTMLElement>,\n  props: UsePanGestureProps,\n) {\n  const {\n    onPan,\n    onPanStart,\n    onPanEnd,\n    onPanSessionStart,\n    onPanSessionEnd,\n    threshold,\n  } = props\n\n  const hasPanEvents = Boolean(\n    onPan || onPanStart || onPanEnd || onPanSessionStart || onPanSessionEnd,\n  )\n\n  const panSession = useRef<PanSession | null>(null)\n\n  const handlers: Partial<PanSessionHandlers> = {\n    onSessionStart: onPanSessionStart,\n    onSessionEnd: onPanSessionEnd,\n    onStart: onPanStart,\n    onMove: onPan,\n    onEnd(event, info) {\n      panSession.current = null\n      onPanEnd?.(event, info)\n    },\n  }\n\n  useEffect(() => {\n    panSession.current?.updateHandlers(handlers)\n  })\n\n  function onPointerDown(event: AnyPointerEvent) {\n    panSession.current = new PanSession(event, handlers, threshold)\n  }\n\n  usePointerEvent(\n    () => ref.current,\n    \"pointerdown\",\n    hasPanEvents ? onPointerDown : noop,\n  )\n\n  useUnmountEffect(() => {\n    panSession.current?.end()\n    panSession.current = null\n  })\n}\n"],"mappings":";;;;;;;;;AAAA;AAAA,EAEE;AAAA,EAEA;AAAA,OAEK;AACP,SAAS,WAAW,cAAc;AAa3B,SAAS,cACd,KACA,OACA;AACA,QAAM;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACF,IAAI;AAEJ,QAAM,eAAe;AAAA,IACnB,SAAS,cAAc,YAAY,qBAAqB;AAAA,EAC1D;AAEA,QAAM,aAAa,OAA0B,IAAI;AAEjD,QAAM,WAAwC;AAAA,IAC5C,gBAAgB;AAAA,IAChB,cAAc;AAAA,IACd,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,MAAM,OAAO,MAAM;AACjB,iBAAW,UAAU;AACrB,2CAAW,OAAO;AAAA,IACpB;AAAA,EACF;AAEA,YAAU,MAAM;AAlDlB;AAmDI,qBAAW,YAAX,mBAAoB,eAAe;AAAA,EACrC,CAAC;AAED,WAAS,cAAc,OAAwB;AAC7C,eAAW,UAAU,IAAI,WAAW,OAAO,UAAU,SAAS;AAAA,EAChE;AAEA;AAAA,IACE,MAAM,IAAI;AAAA,IACV;AAAA,IACA,eAAe,gBAAgB;AAAA,EACjC;AAEA,mBAAiB,MAAM;AAhEzB;AAiEI,qBAAW,YAAX,mBAAoB;AACpB,eAAW,UAAU;AAAA,EACvB,CAAC;AACH;","names":[]}