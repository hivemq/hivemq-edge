{"version":3,"sources":["../src/use-disclosure.ts"],"sourcesContent":["import { callAllHandlers } from \"@chakra-ui/utils\"\nimport { useControllableProp } from \"./use-controllable\"\nimport { useId } from \"./use-id\"\nimport { useCallbackRef } from \"./use-callback-ref\"\nimport { useCallback, useState } from \"react\"\n\nexport interface UseDisclosureProps {\n  isOpen?: boolean\n  defaultIsOpen?: boolean\n  onClose?(): void\n  onOpen?(): void\n  id?: string\n}\n\nexport function useDisclosure(props: UseDisclosureProps = {}) {\n  const {\n    onClose: onCloseProp,\n    onOpen: onOpenProp,\n    isOpen: isOpenProp,\n    id: idProp,\n  } = props\n\n  const onOpenPropCallbackRef = useCallbackRef(onOpenProp)\n  const onClosePropCallbackRef = useCallbackRef(onCloseProp)\n  const [isOpenState, setIsOpen] = useState(props.defaultIsOpen || false)\n  const [isControlled, isOpen] = useControllableProp(isOpenProp, isOpenState)\n\n  const id = useId(idProp, \"disclosure\")\n\n  const onClose = useCallback(() => {\n    if (!isControlled) {\n      setIsOpen(false)\n    }\n    onClosePropCallbackRef?.()\n  }, [isControlled, onClosePropCallbackRef])\n\n  const onOpen = useCallback(() => {\n    if (!isControlled) {\n      setIsOpen(true)\n    }\n    onOpenPropCallbackRef?.()\n  }, [isControlled, onOpenPropCallbackRef])\n\n  const onToggle = useCallback(() => {\n    const action = isOpen ? onClose : onOpen\n    action()\n  }, [isOpen, onOpen, onClose])\n\n  return {\n    isOpen: !!isOpen,\n    onOpen,\n    onClose,\n    onToggle,\n    isControlled,\n    getButtonProps: (props: any = {}) => ({\n      ...props,\n      \"aria-expanded\": isOpen,\n      \"aria-controls\": id,\n      onClick: callAllHandlers(props.onClick, onToggle),\n    }),\n    getDisclosureProps: (props: any = {}) => ({\n      ...props,\n      hidden: !isOpen,\n      id,\n    }),\n  }\n}\n\nexport type UseDisclosureReturn = ReturnType<typeof useDisclosure>\n"],"mappings":";;;;;;;;;;;;AAAA,SAAS,uBAAuB;AAIhC,SAAS,aAAa,gBAAgB;AAU/B,SAAS,cAAc,QAA4B,CAAC,GAAG;AAC5D,QAAM;AAAA,IACJ,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,QAAQ;AAAA,IACR,IAAI;AAAA,EACN,IAAI;AAEJ,QAAM,wBAAwB,eAAe,UAAU;AACvD,QAAM,yBAAyB,eAAe,WAAW;AACzD,QAAM,CAAC,aAAa,SAAS,IAAI,SAAS,MAAM,iBAAiB,KAAK;AACtE,QAAM,CAAC,cAAc,MAAM,IAAI,oBAAoB,YAAY,WAAW;AAE1E,QAAM,KAAK,MAAM,QAAQ,YAAY;AAErC,QAAM,UAAU,YAAY,MAAM;AAChC,QAAI,CAAC,cAAc;AACjB,gBAAU,KAAK;AAAA,IACjB;AACA;AAAA,EACF,GAAG,CAAC,cAAc,sBAAsB,CAAC;AAEzC,QAAM,SAAS,YAAY,MAAM;AAC/B,QAAI,CAAC,cAAc;AACjB,gBAAU,IAAI;AAAA,IAChB;AACA;AAAA,EACF,GAAG,CAAC,cAAc,qBAAqB,CAAC;AAExC,QAAM,WAAW,YAAY,MAAM;AACjC,UAAM,SAAS,SAAS,UAAU;AAClC,WAAO;AAAA,EACT,GAAG,CAAC,QAAQ,QAAQ,OAAO,CAAC;AAE5B,SAAO;AAAA,IACL,QAAQ,CAAC,CAAC;AAAA,IACV;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,gBAAgB,CAACA,SAAa,CAAC,OAAO;AAAA,MACpC,GAAGA;AAAA,MACH,iBAAiB;AAAA,MACjB,iBAAiB;AAAA,MACjB,SAAS,gBAAgBA,OAAM,SAAS,QAAQ;AAAA,IAClD;AAAA,IACA,oBAAoB,CAACA,SAAa,CAAC,OAAO;AAAA,MACxC,GAAGA;AAAA,MACH,QAAQ,CAAC;AAAA,MACT;AAAA,IACF;AAAA,EACF;AACF;","names":["props"]}