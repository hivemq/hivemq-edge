"use strict";var Dt=Object.create;var H=Object.defineProperty;var bt=Object.getOwnPropertyDescriptor;var kt=Object.getOwnPropertyNames;var St=Object.getPrototypeOf,Ot=Object.prototype.hasOwnProperty;var Tt=(t,e)=>{for(var r in e)H(t,r,{get:e[r],enumerable:!0})},rt=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of kt(e))!Ot.call(t,s)&&s!==r&&H(t,s,{get:()=>e[s],enumerable:!(o=bt(e,s))||o.enumerable});return t};var h=(t,e,r)=>(r=t!=null?Dt(St(t)):{},rt(e||!t||!t.__esModule?H(r,"default",{value:t,enumerable:!0}):r,t)),wt=t=>rt(H({},"__esModule",{value:!0}),t);var At={};Tt(At,{DiffEditor:()=>mt,Editor:()=>$,default:()=>jt,loader:()=>Rt.default,useMonaco:()=>Et});module.exports=wt(At);var Rt=h(require("@monaco-editor/loader"));var at=require("react");var f=h(require("react")),pt=h(require("@monaco-editor/loader"));var ut=require("react");var _=h(require("react"));var It={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},W=It;var nt=h(require("react"));var Pt={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},ot=Pt;function Ut({children:t}){return nt.default.createElement("div",{style:ot.container},t)}var it=Ut;var ct=it;function Lt({width:t,height:e,isEditorReady:r,loading:o,_ref:s,className:E,wrapperProps:x}){return _.default.createElement("section",{style:{...W.wrapper,width:t,height:e},...x},!r&&_.default.createElement(ct,null,o),_.default.createElement("div",{ref:s,style:{...W.fullWidth,...!r&&W.hide},className:E}))}var st=Lt;var N=(0,ut.memo)(st);var ft=require("react");function vt(t){(0,ft.useEffect)(t,[])}var S=vt;var V=require("react");function Ht(t,e,r=!0){let o=(0,V.useRef)(!0);(0,V.useEffect)(o.current||!r?()=>{o.current=!1}:t,e)}var M=Ht;function b(){}function D(t,e,r,o){return Wt(t,o)||_t(t,e,r,o)}function Wt(t,e){return t.editor.getModel(dt(t,e))}function _t(t,e,r,o){return t.editor.createModel(e,r,o?dt(t,o):void 0)}function dt(t,e){return t.Uri.parse(e)}function Nt({original:t,modified:e,language:r,originalLanguage:o,modifiedLanguage:s,originalModelPath:E,modifiedModelPath:x,keepCurrentOriginalModel:O=!1,keepCurrentModifiedModel:j=!1,theme:g="light",loading:U="Loading...",options:C={},height:A="100%",width:q="100%",className:B,wrapperProps:G={},beforeMount:J=b,onMount:K=b}){let[y,T]=(0,f.useState)(!1),[w,d]=(0,f.useState)(!0),p=(0,f.useRef)(null),u=(0,f.useRef)(null),I=(0,f.useRef)(null),a=(0,f.useRef)(K),n=(0,f.useRef)(J),k=(0,f.useRef)(!1);S(()=>{let i=pt.default.init();return i.then(l=>(u.current=l)&&d(!1)).catch(l=>l?.type!=="cancelation"&&console.error("Monaco initialization: error:",l)),()=>p.current?P():i.cancel()}),M(()=>{let i=p.current.getModifiedEditor();i.getOption(u.current.editor.EditorOption.readOnly)?i.setValue(e||""):e!==i.getValue()&&(i.executeEdits("",[{range:i.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),i.pushUndoStop())},[e],y),M(()=>{p.current?.getModel()?.original.setValue(t||"")},[t],y),M(()=>{let{original:i,modified:l}=p.current.getModel();u.current.editor.setModelLanguage(i,o||r||"text"),u.current.editor.setModelLanguage(l,s||r||"text")},[r,o,s],y),M(()=>{u.current?.editor.setTheme(g)},[g],y),M(()=>{p.current?.updateOptions(C)},[C],y);let L=(0,f.useCallback)(()=>{if(!u.current)return;n.current(u.current);let i=D(u.current,t||"",o||r||"text",E||""),l=D(u.current,e||"",s||r||"text",x||"");p.current?.setModel({original:i,modified:l})},[r,e,s,t,o,E,x]),v=(0,f.useCallback)(()=>{!k.current&&I.current&&(p.current=u.current.editor.createDiffEditor(I.current,{automaticLayout:!0,...C}),L(),u.current?.editor.setTheme(g),T(!0),k.current=!0)},[C,g,L]);(0,f.useEffect)(()=>{y&&a.current(p.current,u.current)},[y]),(0,f.useEffect)(()=>{!w&&!y&&v()},[w,y,v]),M(()=>{if(p.current&&u.current){let i=p.current.getOriginalEditor(),l=D(u.current,t||"",o||r||"text",E||"");l!==i.getModel()&&i.setModel(l)}},[E],y),M(()=>{if(p.current&&u.current){let i=p.current.getModifiedEditor(),l=D(u.current,e||"",s||r||"text",x||"");l!==i.getModel()&&i.setModel(l)}},[x],y);function P(){let i=p.current?.getModel();O||i?.original?.dispose(),j||i?.modified?.dispose(),p.current?.dispose()}return f.default.createElement(N,{width:q,height:A,isEditorReady:y,loading:U,_ref:I,className:B,wrapperProps:G})}var lt=Nt;var mt=(0,at.memo)(lt);var Mt=require("react"),Z=h(require("@monaco-editor/loader"));function Vt(){let[t,e]=(0,Mt.useState)(Z.default.__getMonacoInstance());return S(()=>{let r;return t||(r=Z.default.init(),r.then(o=>{e(o)})),()=>r?.cancel()}),t}var Et=Vt;var gt=require("react");var c=h(require("react")),xt=h(require("@monaco-editor/loader"));var z=require("react");function zt(t){let e=(0,z.useRef)();return(0,z.useEffect)(()=>{e.current=t},[t]),e.current}var yt=zt;var F=new Map;function Ft({defaultValue:t,defaultLanguage:e,defaultPath:r,value:o,language:s,path:E,theme:x="light",line:O,loading:j="Loading...",options:g={},overrideServices:U={},saveViewState:C=!0,keepCurrentModel:A=!1,width:q="100%",height:B="100%",className:G,wrapperProps:J={},beforeMount:K=b,onMount:y=b,onChange:T,onValidate:w=b}){let[d,p]=(0,c.useState)(!1),[u,I]=(0,c.useState)(!0),a=(0,c.useRef)(null),n=(0,c.useRef)(null),k=(0,c.useRef)(null),L=(0,c.useRef)(y),v=(0,c.useRef)(K),P=(0,c.useRef)(),i=(0,c.useRef)(o),l=yt(E),tt=(0,c.useRef)(!1),Q=(0,c.useRef)(!1);S(()=>{let m=xt.default.init();return m.then(R=>(a.current=R)&&I(!1)).catch(R=>R?.type!=="cancelation"&&console.error("Monaco initialization: error:",R)),()=>n.current?ht():m.cancel()}),M(()=>{let m=D(a.current,t||o||"",e||s||"",E||r||"");m!==n.current?.getModel()&&(C&&F.set(l,n.current?.saveViewState()),n.current?.setModel(m),C&&n.current?.restoreViewState(F.get(E)))},[E],d),M(()=>{n.current?.updateOptions(g)},[g],d),M(()=>{!n.current||o===void 0||(n.current.getOption(a.current.editor.EditorOption.readOnly)?n.current.setValue(o):o!==n.current.getValue()&&(Q.current=!0,n.current.executeEdits("",[{range:n.current.getModel().getFullModelRange(),text:o,forceMoveMarkers:!0}]),n.current.pushUndoStop(),Q.current=!1))},[o],d),M(()=>{let m=n.current?.getModel();m&&s&&a.current?.editor.setModelLanguage(m,s)},[s],d),M(()=>{O!==void 0&&n.current?.revealLine(O)},[O],d),M(()=>{a.current?.editor.setTheme(x)},[x],d);let et=(0,c.useCallback)(()=>{if(!(!k.current||!a.current)&&!tt.current){v.current(a.current);let m=E||r,R=D(a.current,o||t||"",e||s||"",m||"");n.current=a.current?.editor.create(k.current,{model:R,automaticLayout:!0,...g},U),C&&n.current.restoreViewState(F.get(m)),a.current.editor.setTheme(x),p(!0),tt.current=!0}},[t,e,r,o,s,E,g,U,C,x]);(0,c.useEffect)(()=>{d&&L.current(n.current,a.current)},[d]),(0,c.useEffect)(()=>{!u&&!d&&et()},[u,d,et]),i.current=o,(0,c.useEffect)(()=>{d&&T&&(P.current?.dispose(),P.current=n.current?.onDidChangeModelContent(m=>{Q.current||T(n.current.getValue(),m)}))},[d,T]),(0,c.useEffect)(()=>{if(d){let m=a.current.editor.onDidChangeMarkers(R=>{let X=n.current.getModel()?.uri;if(X&&R.find(Y=>Y.path===X.path)){let Y=a.current.editor.getModelMarkers({resource:X});w?.(Y)}});return()=>{m?.dispose()}}return()=>{}},[d,w]);function ht(){P.current?.dispose(),A?C&&F.set(E,n.current.saveViewState()):n.current.getModel()?.dispose(),n.current.dispose()}return c.default.createElement(N,{width:q,height:B,isEditorReady:d,loading:j,_ref:k,className:G,wrapperProps:J})}var Ct=Ft;var $=(0,gt.memo)(Ct);var jt=$;0&&(module.exports={DiffEditor,Editor,loader,useMonaco});
//# sourceMappingURL=index.js.map