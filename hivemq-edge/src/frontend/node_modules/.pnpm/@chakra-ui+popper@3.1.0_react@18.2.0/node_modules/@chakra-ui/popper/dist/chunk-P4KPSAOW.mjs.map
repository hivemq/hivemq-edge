{"version":3,"sources":["../src/modifiers.ts"],"sourcesContent":["import { Placement, Modifier, State } from \"@popperjs/core\"\nimport { getBoxShadow, toTransformOrigin, cssVars } from \"./utils\"\n\n/* -------------------------------------------------------------------------------------------------\n The match width modifier sets the popper width to match the reference.\n It is useful for custom selects, autocomplete, etc.\n* -----------------------------------------------------------------------------------------------*/\n\nexport const matchWidth: Modifier<\"matchWidth\", any> = {\n  name: \"matchWidth\",\n  enabled: true,\n  phase: \"beforeWrite\",\n  requires: [\"computeStyles\"],\n  fn: ({ state }) => {\n    state.styles.popper.width = `${state.rects.reference.width}px`\n  },\n  effect:\n    ({ state }) =>\n    () => {\n      const reference = state.elements.reference as HTMLElement\n      state.elements.popper.style.width = `${reference.offsetWidth}px`\n    },\n}\n\n/* -------------------------------------------------------------------------------------------------\n  The transform origin modifier sets the css `transformOrigin` value of the popper\n  based on the dynamic placement state of the popper.\n  \n  Useful when we need to animate/transition the popper.\n* -----------------------------------------------------------------------------------------------*/\n\nexport const transformOrigin: Modifier<\"transformOrigin\", any> = {\n  name: \"transformOrigin\",\n  enabled: true,\n  phase: \"write\",\n  fn: ({ state }) => {\n    setTransformOrigin(state)\n  },\n  effect:\n    ({ state }) =>\n    () => {\n      setTransformOrigin(state)\n    },\n}\n\nconst setTransformOrigin = (state: State) => {\n  state.elements.popper.style.setProperty(\n    cssVars.transformOrigin.var,\n    toTransformOrigin(state.placement),\n  )\n}\n\n/* -------------------------------------------------------------------------------------------------\n  The position arrow modifier adds width, height and overrides the `top/left/right/bottom`\n  styles generated by popper.js to properly position the arrow\n* -----------------------------------------------------------------------------------------------*/\n\nexport const positionArrow: Modifier<\"positionArrow\", any> = {\n  name: \"positionArrow\",\n  enabled: true,\n  phase: \"afterWrite\",\n  fn: ({ state }) => {\n    setArrowStyles(state)\n  },\n}\n\nconst setArrowStyles = (state: Partial<State>) => {\n  if (!state.placement) return\n  const overrides = getArrowStyle(state.placement)\n\n  if (state.elements?.arrow && overrides) {\n    Object.assign(state.elements.arrow.style, {\n      [overrides.property]: overrides.value,\n      width: cssVars.arrowSize.varRef,\n      height: cssVars.arrowSize.varRef,\n      zIndex: -1,\n    })\n\n    const vars = {\n      [cssVars.arrowSizeHalf\n        .var]: `calc(${cssVars.arrowSize.varRef} / 2 - 1px)`,\n      [cssVars.arrowOffset.var]: `calc(${cssVars.arrowSizeHalf.varRef} * -1)`,\n    }\n\n    for (const property in vars) {\n      state.elements.arrow.style.setProperty(property, vars[property])\n    }\n  }\n}\n\nconst getArrowStyle = (placement: Placement) => {\n  if (placement.startsWith(\"top\")) {\n    return { property: \"bottom\", value: cssVars.arrowOffset.varRef }\n  }\n  if (placement.startsWith(\"bottom\")) {\n    return { property: \"top\", value: cssVars.arrowOffset.varRef }\n  }\n  if (placement.startsWith(\"left\")) {\n    return { property: \"right\", value: cssVars.arrowOffset.varRef }\n  }\n  if (placement.startsWith(\"right\")) {\n    return { property: \"left\", value: cssVars.arrowOffset.varRef }\n  }\n}\n\n/* -------------------------------------------------------------------------------------------------\n  The inner arrow modifier, sets the placement styles for the inner arrow that forms\n  the popper arrow tip.\n* -----------------------------------------------------------------------------------------------*/\n\nexport const innerArrow: Modifier<\"innerArrow\", any> = {\n  name: \"innerArrow\",\n  enabled: true,\n  phase: \"main\",\n  requires: [\"arrow\"],\n  fn: ({ state }) => {\n    setInnerArrowStyles(state)\n  },\n  effect:\n    ({ state }) =>\n    () => {\n      setInnerArrowStyles(state)\n    },\n}\n\nconst setInnerArrowStyles = (state: State) => {\n  if (!state.elements.arrow) return\n\n  const inner = state.elements.arrow.querySelector(\n    \"[data-popper-arrow-inner]\",\n  ) as HTMLElement | null\n\n  if (!inner) return\n  const boxShadow = getBoxShadow(state.placement)\n  if (boxShadow) {\n    inner.style.setProperty(\"--popper-arrow-default-shadow\", boxShadow)\n  }\n\n  Object.assign(inner.style, {\n    transform: \"rotate(45deg)\",\n    background: cssVars.arrowBg.varRef,\n    top: 0,\n    left: 0,\n    width: \"100%\",\n    height: \"100%\",\n    position: \"absolute\",\n    zIndex: \"inherit\",\n    boxShadow: `var(--popper-arrow-shadow, var(--popper-arrow-default-shadow))`,\n  })\n}\n"],"mappings":"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","names":[]}