"use strict";var e=require("react"),r=require("@nivo/core"),o=require("@nivo/legends"),t=require("@nivo/tooltip"),n=require("react/jsx-runtime"),i=require("@nivo/colors"),a=require("@react-spring/web"),l=require("d3-shape"),c=require("d3-chord"),s=require("@nivo/arcs");function u(){return u=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},u.apply(this,arguments)}function d(e,r){if(null==e)return{};var o,t,n={},i=Object.keys(e);for(t=0;t<i.length;t++)o=i[t],r.indexOf(o)>=0||(n[o]=e[o]);return n}var b=e.memo((function(e){var r=e.arc;return n.jsx(t.BasicTooltip,{id:r.label,value:r.formattedValue,color:r.color,enableChip:!0})})),v=e.memo((function(e){var r=e.ribbon;return n.jsx(t.TableTooltip,{rows:[[n.jsx(t.Chip,{color:r.source.color},"chip"),n.jsx("strong",{children:r.source.label},"id"),r.source.formattedValue],[n.jsx(t.Chip,{color:r.target.color},"chip"),n.jsx("strong",{children:r.target.label},"id"),r.target.formattedValue]]})})),f={layers:["ribbons","arcs","labels","legends"],padAngle:0,innerRadiusRatio:.9,innerRadiusOffset:0,colors:{scheme:"nivo"},arcOpacity:1,activeArcOpacity:1,inactiveArcOpacity:.15,arcBorderWidth:1,arcBorderColor:{from:"color",modifiers:[["darker",.4]]},arcTooltip:b,ribbonOpacity:.5,activeRibbonOpacity:.85,inactiveRibbonOpacity:.15,ribbonBorderWidth:1,ribbonBorderColor:{from:"color",modifiers:[["darker",.4]]},ribbonBlendMode:"normal",enableLabel:!0,label:"id",labelOffset:12,labelRotation:0,labelTextColor:{from:"color",modifiers:[["darker",1]]},isInteractive:!0,legends:[],animate:!0,motionConfig:"gentle",role:"img"},p=u({},f,{ribbonBlendMode:"normal",ribbonTooltip:v}),g=u({},f,{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),h=function(e){var r=e.padAngle;return c.chord().padAngle(r)},m=function(e){var r=e.width,o=e.height,t=e.innerRadiusRatio,n=e.innerRadiusOffset,i=[r/2,o/2],a=Math.min(r,o)/2,s=a*t,u=a*(t-n);return{center:i,radius:a,innerRadius:s,arcGenerator:l.arc().outerRadius(a).innerRadius(s),ribbonGenerator:c.ribbon().radius(u)}},y=function(e){var r=e.chord,o=e.data,t=e.keys,n=e.getLabel,i=e.formatValue,a=e.getColor,l=r(o);return{arcs:l.groups.map((function(e){var r=u({},e,{id:t[e.index],formattedValue:i(e.value)});return u({},r,{label:n(r),color:a(r)})})),ribbons:l.map((function(e){var r=u({},e.source,{id:t[e.source.index],formattedValue:i(e.source.value)}),o=u({},e.target,{id:t[e.target.index],formattedValue:i(e.target.value)});return u({},e,{id:[r.id,o.id].sort().join("."),source:u({},r,{label:n(r),color:a(r)}),target:u({},o,{label:n(o),color:a(o)})})}))}},A=function(e){var r=e.startAngle,o=e.endAngle,t=e.arcGenerator;return a.to([r,o],(function(e,r){return t({startAngle:e,endAngle:r})}))},C=function(e){var r=e.sourceStartAngle,o=e.sourceEndAngle,t=e.targetStartAngle,n=e.targetEndAngle,i=e.ribbonGenerator;return a.to([r,o,t,n],(function(e,r,o,t){return i({source:{startAngle:Math.min(e,r),endAngle:Math.max(r,e)},target:{startAngle:Math.min(o,t),endAngle:Math.max(t,o)}})}))},R=function(r){var o=r.padAngle;return e.useMemo((function(){return h({padAngle:o})}),[o])},x=function(r){var o=r.width,t=r.height,n=r.innerRadiusRatio,i=r.innerRadiusOffset;return e.useMemo((function(){return m({width:o,height:t,innerRadiusRatio:n,innerRadiusOffset:i})}),[o,t,n,i])},M=function(r){var o=r.chord,t=r.getColor,n=r.keys,i=r.data,a=r.getLabel,l=r.formatValue;return e.useMemo((function(){return y({chord:o,data:i,keys:n,getLabel:a,formatValue:l,getColor:t})}),[o,t,n,i,a,l])},O=function(o){var t=o.data,n=o.keys,a=o.label,l=void 0===a?f.label:a,c=o.valueFormat,s=o.width,u=o.height,d=o.innerRadiusRatio,b=void 0===d?f.innerRadiusRatio:d,v=o.innerRadiusOffset,p=void 0===v?f.innerRadiusOffset:v,g=o.padAngle,h=void 0===g?f.padAngle:g,m=o.colors,y=void 0===m?f.colors:m,A=R({padAngle:h}),C=x({width:s,height:u,innerRadiusRatio:b,innerRadiusOffset:p}),O=C.center,E=C.radius,k=C.innerRadius,j=C.arcGenerator,I=C.ribbonGenerator,W=e.useMemo((function(){return r.getLabelGenerator(l)}),[l]),B=r.useValueFormatter(c),L=i.useOrdinalColorScale(y,"id"),T=M({chord:A,getColor:L,keys:n,data:t,getLabel:W,formatValue:B});return{center:O,chord:A,radius:E,innerRadius:k,arcGenerator:j,ribbonGenerator:I,getColor:L,arcs:T.arcs,ribbons:T.ribbons}},E=function(r){var o=r.arcOpacity,t=void 0===o?f.arcOpacity:o,n=r.activeArcOpacity,i=void 0===n?f.activeArcOpacity:n,a=r.inactiveArcOpacity,l=void 0===a?f.inactiveArcOpacity:a,c=r.ribbons,s=r.ribbonOpacity,d=void 0===s?f.ribbonOpacity:s,b=r.activeRibbonOpacity,v=void 0===b?f.activeRibbonOpacity:b,p=r.inactiveRibbonOpacity,g=void 0===p?f.inactiveRibbonOpacity:p,h=e.useState(null),m=h[0],y=h[1],A=e.useState(null),C=A[0],R=A[1],x=e.useMemo((function(){var e=[],r=[];return m&&(e.push(m.id),c.filter((function(e){return e.source.id===m.id||e.target.id===m.id})).forEach((function(e){r.push(e.id)}))),C&&(e.push(C.source.id),e.push(C.target.id),r.push(C.id)),{selectedArcIds:e,selectedRibbonIds:r}}),[m,C,c]),M=x.selectedArcIds.length>1||x.selectedRibbonIds.length>0,O=e.useMemo((function(){return function(e){return M?x.selectedArcIds.includes(e.id)?i:l:t}}),[M,x.selectedArcIds,t,i,l]),E=e.useMemo((function(){return function(e){return M?x.selectedRibbonIds.includes(e.id)?v:g:d}}),[M,x.selectedRibbonIds,d,v,g]);return u({currentArc:m,setCurrentArc:y,currentRibbon:C,setCurrentRibbon:R,hasSelection:M},x,{getArcOpacity:O,getRibbonOpacity:E})},k=function(r){var o=r.center,t=r.radius,n=r.arcs,i=r.arcGenerator,a=r.ribbons,l=r.ribbonGenerator;return e.useMemo((function(){return{center:o,radius:t,arcs:n,arcGenerator:i,ribbons:a,ribbonGenerator:l}}),[o,t,n,i,a,l])},j=e.memo((function(r){var o=r.ribbon,i=r.ribbonGenerator,l=r.animatedProps,c=r.borderWidth,s=r.blendMode,u=r.isInteractive,d=r.setCurrent,b=r.onMouseEnter,v=r.onMouseMove,f=r.onMouseLeave,p=r.onClick,g=r.tooltip,h=t.useTooltip(),m=h.showTooltipFromEvent,y=h.hideTooltip,A=e.useMemo((function(){if(u)return function(r){d(o),m(e.createElement(g,{ribbon:o}),r),null==b||b(o,r)}}),[u,m,g,o,b,d]),R=e.useMemo((function(){if(u)return function(r){m(e.createElement(g,{ribbon:o}),r),null==v||v(o,r)}}),[u,m,g,o,v]),x=e.useMemo((function(){if(u)return function(e){d(null),y(),null==f||f(o,e)}}),[u,y,o,f,d]),M=e.useMemo((function(){if(u&&p)return function(e){return null==p?void 0:p(o,e)}}),[u,o,p]);return n.jsx(a.animated.path,{"data-testid":"ribbon."+o.source.id+"."+o.target.id,d:C({sourceStartAngle:l.sourceStartAngle,sourceEndAngle:l.sourceEndAngle,targetStartAngle:l.targetStartAngle,targetEndAngle:l.targetEndAngle,ribbonGenerator:i}),fill:l.color,opacity:l.opacity,strokeWidth:c,stroke:l.borderColor,style:{mixBlendMode:s},onMouseEnter:A,onMouseMove:R,onMouseLeave:x,onClick:M})})),I=function(e,o){var t,n,i=e.source,a=e.target;if(i.startAngle<a.startAngle?(t=i,n=a):(t=a,n=i),o){var l=r.midAngle(t),c=r.midAngle(n);return{sourceStartAngle:l,sourceEndAngle:l,targetStartAngle:c,targetEndAngle:c}}return{sourceStartAngle:t.startAngle,sourceEndAngle:t.endAngle,targetStartAngle:n.startAngle,targetEndAngle:n.endAngle}},W=e.memo((function(e){var o=e.ribbons,t=e.ribbonGenerator,l=e.borderWidth,c=e.borderColor,s=e.getOpacity,d=e.blendMode,b=e.isInteractive,v=e.setCurrent,f=e.onMouseEnter,p=e.onMouseMove,g=e.onMouseLeave,h=e.onClick,m=e.tooltip,y=r.useMotionConfig(),A=y.animate,C=y.config,R=r.useTheme(),x=i.useInheritedColor(c,R),M=a.useTransition(o,{keys:function(e){return e.id},initial:function(e){return u({},I(e,!1),{color:e.source.color,opacity:s(e),borderColor:x(e.source)})},from:function(e){return u({},I(e,!1),{color:e.source.color,opacity:0,borderColor:x(e.source)})},update:function(e){return u({},I(e,!1),{color:e.source.color,opacity:s(e),borderColor:x(e.source)})},leave:function(e){return u({},I(e,!1),{color:e.source.color,opacity:0,borderColor:x(e.source)})},expires:!0,config:C,immediate:!A});return n.jsx(n.Fragment,{children:M((function(e,r){return n.jsx(j,{ribbon:r,ribbonGenerator:t,animatedProps:e,borderWidth:l,blendMode:d,setCurrent:v,isInteractive:b,tooltip:m,onMouseEnter:f,onMouseMove:p,onMouseLeave:g,onClick:h},r.id)}))})})),B=e.memo((function(r){var o=r.arc,i=r.animatedProps,l=r.borderWidth,c=r.arcGenerator,s=r.setCurrent,u=r.isInteractive,d=r.onMouseEnter,b=r.onMouseMove,v=r.onMouseLeave,f=r.onClick,p=r.tooltip,g=t.useTooltip(),h=g.showTooltipFromEvent,m=g.hideTooltip,y=e.useMemo((function(){if(u)return function(r){s(o),h(e.createElement(p,{arc:o}),r),null==d||d(o,r)}}),[u,h,p,o,d,s]),C=e.useMemo((function(){if(u)return function(r){h(e.createElement(p,{arc:o}),r),null==b||b(o,r)}}),[u,h,p,o,b]),R=e.useMemo((function(){if(u)return function(e){s(null),m(),null==v||v(o,e)}}),[u,m,o,v,s]),x=e.useMemo((function(){if(u&&f)return function(e){return null==f?void 0:f(o,e)}}),[u,o,f]);return n.jsx(a.animated.path,{"data-testid":"arc."+o.id,d:A({startAngle:i.startAngle,endAngle:i.endAngle,arcGenerator:c}),fill:i.color,opacity:i.opacity,strokeWidth:l,stroke:i.borderColor,onMouseEnter:y,onMouseMove:C,onMouseLeave:R,onClick:x})})),L=e.memo((function(e){var o=e.arcs,t=e.borderWidth,l=e.borderColor,c=e.getOpacity,s=e.arcGenerator,u=e.setCurrent,d=e.isInteractive,b=e.onMouseEnter,v=e.onMouseMove,f=e.onMouseLeave,p=e.onClick,g=e.tooltip,h=r.useMotionConfig(),m=h.animate,y=h.config,A=r.useTheme(),C=i.useInheritedColor(l,A),R=a.useTransition(o,{keys:function(e){return e.id},initial:function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,color:e.color,opacity:c(e),borderColor:C(e)}},from:function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,color:e.color,opacity:0,borderColor:C(e)}},update:function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,color:e.color,opacity:c(e),borderColor:C(e)}},leave:function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,color:e.color,opacity:0,borderColor:C(e)}},expires:!0,config:y,immediate:!m});return n.jsx(n.Fragment,{children:R((function(e,r){return n.jsx(B,{arc:r,arcGenerator:s,animatedProps:e,borderWidth:t,setCurrent:u,isInteractive:d,tooltip:g,onMouseEnter:b,onMouseMove:v,onMouseLeave:f,onClick:p},r.id)}))})})),T=e.memo((function(o){var t=o.arcs,l=o.radius,c=o.rotation,s=o.color,d=r.useMotionConfig(),b=d.animate,v=d.config,f=r.useTheme(),p=i.useInheritedColor(s,f),g=e.useMemo((function(){return t.map((function(e){var o=r.midAngle(e),t=r.getPolarLabelProps(l,o,c);return{id:e.id,label:e.label,x:t.x,y:t.y,rotation:t.rotate,color:p(e),textAnchor:t.align,dominantBaseline:t.baseline}}))}),[t,l,c,p]),h=a.useTransition(g,{keys:function(e){return e.id},initial:function(e){return{x:e.x,y:e.y,rotation:e.rotation,color:e.color}},from:function(e){return{x:e.x,y:e.y,rotation:e.rotation,color:e.color}},enter:function(e){return{x:e.x,y:e.y,rotation:e.rotation,color:e.color}},update:function(e){return{x:e.x,y:e.y,rotation:e.rotation,color:e.color}},expires:!0,config:v,immediate:!b});return n.jsx(n.Fragment,{children:h((function(e,r){return n.jsx(a.animated.text,{"data-testid":"label."+r.id,style:u({},f.labels.text,{pointerEvents:"none",fill:e.color}),transform:a.to([e.x,e.y,e.rotation],(function(e,r,o){return"translate("+e+", "+r+") rotate("+o+")"})),textAnchor:r.textAnchor,dominantBaseline:r.dominantBaseline,children:r.label},r.id)}))})})),G=["isInteractive","animate","motionConfig","theme","renderWrapper"],w=function(t){var i=t.data,a=t.keys,l=t.label,c=t.valueFormat,s=t.margin,d=t.width,b=t.height,v=t.innerRadiusRatio,f=void 0===v?p.innerRadiusRatio:v,g=t.innerRadiusOffset,h=void 0===g?p.innerRadiusOffset:g,m=t.padAngle,y=void 0===m?p.padAngle:m,A=t.layers,C=void 0===A?p.layers:A,R=t.colors,x=void 0===R?p.colors:R,M=t.arcBorderWidth,j=void 0===M?p.arcBorderWidth:M,I=t.arcBorderColor,B=void 0===I?p.arcBorderColor:I,G=t.arcOpacity,w=void 0===G?p.arcOpacity:G,S=t.activeArcOpacity,P=void 0===S?p.activeArcOpacity:S,F=t.inactiveArcOpacity,V=void 0===F?p.inactiveArcOpacity:F,q=t.arcTooltip,D=void 0===q?p.arcTooltip:q,H=t.ribbonBorderWidth,z=void 0===H?p.ribbonBorderWidth:H,U=t.ribbonBorderColor,J=void 0===U?p.ribbonBorderColor:U,K=t.ribbonBlendMode,N=void 0===K?p.ribbonBlendMode:K,Q=t.ribbonOpacity,X=void 0===Q?p.ribbonOpacity:Q,Y=t.activeRibbonOpacity,Z=void 0===Y?p.activeRibbonOpacity:Y,$=t.inactiveRibbonOpacity,_=void 0===$?p.inactiveRibbonOpacity:$,ee=t.ribbonTooltip,re=void 0===ee?p.ribbonTooltip:ee,oe=t.enableLabel,te=void 0===oe?p.enableLabel:oe,ne=t.labelOffset,ie=void 0===ne?p.labelOffset:ne,ae=t.labelRotation,le=void 0===ae?p.labelRotation:ae,ce=t.labelTextColor,se=void 0===ce?p.labelTextColor:ce,ue=t.isInteractive,de=void 0===ue?p.isInteractive:ue,be=t.onArcMouseEnter,ve=t.onArcMouseMove,fe=t.onArcMouseLeave,pe=t.onArcClick,ge=t.onRibbonMouseEnter,he=t.onRibbonMouseMove,me=t.onRibbonMouseLeave,ye=t.onRibbonClick,Ae=t.legends,Ce=void 0===Ae?p.legends:Ae,Re=t.role,xe=void 0===Re?p.role:Re,Me=t.ariaLabel,Oe=t.ariaLabelledBy,Ee=t.ariaDescribedBy,ke=r.useDimensions(d,b,s),je=ke.margin,Ie=ke.innerWidth,We=ke.innerHeight,Be=ke.outerWidth,Le=ke.outerHeight,Te=O({data:i,keys:a,label:l,valueFormat:c,width:Ie,height:We,innerRadiusRatio:f,innerRadiusOffset:h,padAngle:y,colors:x}),Ge=Te.center,we=Te.radius,Se=Te.arcGenerator,Pe=Te.ribbonGenerator,Fe=Te.arcs,Ve=Te.ribbons,qe=E({arcOpacity:w,activeArcOpacity:P,inactiveArcOpacity:V,ribbons:Ve,ribbonOpacity:X,activeRibbonOpacity:Z,inactiveRibbonOpacity:_}),De=qe.setCurrentArc,He=qe.setCurrentRibbon,ze=qe.getArcOpacity,Ue=qe.getRibbonOpacity,Je=k({center:Ge,radius:we,arcs:Fe,arcGenerator:Se,ribbons:Ve,ribbonGenerator:Pe});if(we<=0)return null;var Ke=Fe.map((function(e){return{id:e.id,label:e.label,color:e.color}})),Ne={ribbons:null,arcs:null,labels:null,legends:null};return C.includes("ribbons")&&(Ne.ribbons=n.jsx("g",{transform:"translate("+Ge[0]+", "+Ge[1]+")",children:n.jsx(W,{ribbons:Ve,ribbonGenerator:Pe,borderWidth:z,borderColor:J,getOpacity:Ue,blendMode:N,setCurrent:He,isInteractive:de,onMouseEnter:ge,onMouseMove:he,onMouseLeave:me,onClick:ye,tooltip:re})},"ribbons")),C.includes("arcs")&&(Ne.arcs=n.jsx("g",{transform:"translate("+Ge[0]+", "+Ge[1]+")",children:n.jsx(L,{arcs:Fe,arcGenerator:Se,borderWidth:j,borderColor:B,getOpacity:ze,setCurrent:De,isInteractive:de,onMouseEnter:be,onMouseMove:ve,onMouseLeave:fe,onClick:pe,tooltip:D})},"arcs")),C.includes("labels")&&te&&(Ne.labels=n.jsx("g",{transform:"translate("+Ge[0]+", "+Ge[1]+")",children:n.jsx(T,{arcs:Fe,radius:we+ie,rotation:le,color:se})},"labels")),C.includes("legends")&&Ce.length>0&&(Ne.legends=n.jsx(e.Fragment,{children:Ce.map((function(e,r){return n.jsx(o.BoxLegendSvg,u({},e,{containerWidth:Ie,containerHeight:We,data:Ke}),r)}))},"legends")),n.jsx(r.SvgWrapper,{width:Be,height:Le,margin:je,role:xe,ariaLabel:Me,ariaLabelledBy:Oe,ariaDescribedBy:Ee,children:C.map((function(r,o){var t;return"function"==typeof r?n.jsx(e.Fragment,{children:e.createElement(r,Je)},o):null!=(t=null==Ne?void 0:Ne[r])?t:null}))})},S=function(e){var o=e.isInteractive,t=void 0===o?p.isInteractive:o,i=e.animate,a=void 0===i?p.animate:i,l=e.motionConfig,c=void 0===l?p.motionConfig:l,s=e.theme,b=e.renderWrapper,v=d(e,G);return n.jsx(r.Container,{animate:a,isInteractive:t,motionConfig:c,renderWrapper:b,theme:s,children:n.jsx(w,u({isInteractive:t},v))})},P=["theme","isInteractive","animate","motionConfig","renderWrapper"],F=function(e){var o=e.event,t=e.canvasEl,n=e.center,i=e.margin,a=e.radius,l=e.innerRadius,c=e.arcs,u=r.getRelativeCursor(t,o),d=u[0],b=u[1],v=i.left+n[0],f=i.top+n[1];return s.findArcUnderCursor(v,f,a,l,c,d,b)},V=function(a){var l=a.pixelRatio,c=void 0===l?g.pixelRatio:l,s=a.margin,d=a.data,b=a.keys,v=a.width,f=a.height,p=a.label,h=void 0===p?g.label:p,m=a.valueFormat,y=a.innerRadiusRatio,A=void 0===y?g.innerRadiusRatio:y,C=a.innerRadiusOffset,R=void 0===C?g.innerRadiusOffset:C,x=a.padAngle,M=void 0===x?g.padAngle:x,j=a.layers,I=void 0===j?g.layers:j,W=a.colors,B=void 0===W?g.colors:W,L=a.arcBorderWidth,T=void 0===L?g.arcBorderWidth:L,G=a.arcBorderColor,w=void 0===G?g.arcBorderColor:G,S=a.arcOpacity,P=void 0===S?g.arcOpacity:S,V=a.activeArcOpacity,q=void 0===V?g.activeArcOpacity:V,D=a.inactiveArcOpacity,H=void 0===D?g.inactiveArcOpacity:D,z=a.arcTooltip,U=void 0===z?g.arcTooltip:z,J=a.ribbonBorderWidth,K=void 0===J?g.ribbonBorderWidth:J,N=a.ribbonBorderColor,Q=void 0===N?g.ribbonBorderColor:N,X=a.ribbonOpacity,Y=void 0===X?g.ribbonOpacity:X,Z=a.activeRibbonOpacity,$=void 0===Z?g.activeRibbonOpacity:Z,_=a.inactiveRibbonOpacity,ee=void 0===_?g.inactiveRibbonOpacity:_,re=a.enableLabel,oe=void 0===re?g.enableLabel:re,te=a.labelOffset,ne=void 0===te?g.labelOffset:te,ie=a.labelRotation,ae=void 0===ie?g.labelRotation:ie,le=a.labelTextColor,ce=void 0===le?g.labelTextColor:le,se=a.isInteractive,ue=void 0===se?g.isInteractive:se,de=a.onArcMouseEnter,be=a.onArcMouseMove,ve=a.onArcMouseLeave,fe=a.onArcClick,pe=a.legends,ge=void 0===pe?g.legends:pe,he=e.useRef(null),me=r.useDimensions(v,f,s),ye=me.innerWidth,Ae=me.innerHeight,Ce=me.outerWidth,Re=me.outerHeight,xe=me.margin,Me=O({data:d,keys:b,label:h,valueFormat:m,width:ye,height:Ae,innerRadiusRatio:A,innerRadiusOffset:R,padAngle:M,colors:B}),Oe=Me.center,Ee=Me.radius,ke=Me.innerRadius,je=Me.arcGenerator,Ie=Me.ribbonGenerator,We=Me.arcs,Be=Me.ribbons,Le=E({arcOpacity:P,activeArcOpacity:q,inactiveArcOpacity:H,ribbons:Be,ribbonOpacity:Y,activeRibbonOpacity:$,inactiveRibbonOpacity:ee}),Te=Le.currentArc,Ge=Le.setCurrentArc,we=Le.getArcOpacity,Se=Le.getRibbonOpacity,Pe=r.useTheme(),Fe=i.useInheritedColor(ce,Pe),Ve=i.useInheritedColor(w,Pe),qe=i.useInheritedColor(Q,Pe),De=k({center:Oe,radius:Ee,arcs:We,arcGenerator:je,ribbons:Be,ribbonGenerator:Ie});e.useEffect((function(){if(null!==he.current){he.current.width=Ce*c,he.current.height=Re*c;var e=he.current.getContext("2d");e.scale(c,c),e.fillStyle=Pe.background,e.fillRect(0,0,Ce,Re),Ee<=0||I.forEach((function(t){if("ribbons"===t&&(e.save(),e.translate(xe.left+Oe[0],xe.top+Oe[1]),Ie.context(e),Be.forEach((function(r){e.save(),e.globalAlpha=Se(r),e.fillStyle=r.source.color,e.beginPath(),Ie(r),e.fill(),K>0&&(e.strokeStyle=qe(r.source),e.lineWidth=K,e.stroke()),e.restore()})),e.restore()),"arcs"===t&&(e.save(),e.translate(xe.left+Oe[0],xe.top+Oe[1]),je.context(e),We.forEach((function(r){e.save(),e.globalAlpha=we(r),e.fillStyle=r.color,e.beginPath(),je(r),e.fill(),T>0&&(e.strokeStyle=Ve(r),e.lineWidth=T,e.stroke()),e.restore()})),e.restore()),"labels"===t&&!0===oe&&(e.save(),e.translate(xe.left+Oe[0],xe.top+Oe[1]),e.font=Pe.labels.text.fontSize+"px "+(Pe.labels.text.fontFamily||"sans-serif"),We.forEach((function(o){var t=r.midAngle(o),n=r.getPolarLabelProps(Ee+ne,t,ae);e.save(),e.translate(n.x,n.y),e.rotate(r.degreesToRadians(n.rotate)),e.textAlign=n.align,e.textBaseline=n.baseline,e.fillStyle=Fe(o),e.fillText(o.label,0,0),e.restore()})),e.restore()),"legends"===t){e.save(),e.translate(xe.left,xe.top);var n=We.map((function(e){return{id:e.id,label:e.label,color:e.color}}));ge.forEach((function(r){o.renderLegendToCanvas(e,u({},r,{data:n,containerWidth:ye,containerHeight:Ae,theme:Pe}))})),e.restore()}"function"==typeof t&&t(e,De)}))}}),[he,ye,Ae,Ce,Re,xe,c,Oe,Ee,Pe,I,We,je,we,T,Ve,Be,Ie,Se,K,qe,oe,ne,ae,Fe,ge,De]);var He=t.useTooltip(),ze=He.showTooltipFromEvent,Ue=He.hideTooltip,Je=e.useCallback((function(r){if(null!==he.current){var o=F({event:r,canvasEl:he.current,center:Oe,margin:xe,radius:Ee,innerRadius:ke,arcs:We});o?(Ge(o),ze(e.createElement(U,{arc:o}),r),!Te&&de&&de(o,r),be&&be(o,r),Te&&Te.id!==o.id&&ve&&ve(o,r)):(Ge(null),Ue(),Te&&ve&&ve(Te,r))}}),[he,Oe,xe,Ee,ke,We,Ge,Te,ze,Ue,U,de,be,ve]),Ke=e.useCallback((function(){Ge(null),Ue()}),[Ge,Ue]),Ne=e.useCallback((function(e){if(null!==he.current&&fe){var r=F({event:e,canvasEl:he.current,center:Oe,margin:xe,radius:Ee,innerRadius:ke,arcs:We});r&&fe(r,e)}}),[he,Oe,xe,Ee,ke,We,fe]);return n.jsx("canvas",{ref:he,width:Ce*c,height:Re*c,style:{width:Ce,height:Re,cursor:ue?"auto":"normal"},onMouseEnter:ue?Je:void 0,onMouseMove:ue?Je:void 0,onMouseLeave:ue?Ke:void 0,onClick:ue?Ne:void 0})},q=function(e){var o=e.theme,t=e.isInteractive,i=void 0===t?g.isInteractive:t,a=e.animate,l=void 0===a?g.animate:a,c=e.motionConfig,s=void 0===c?g.motionConfig:c,b=e.renderWrapper,v=d(e,P);return n.jsx(r.Container,{isInteractive:i,animate:l,motionConfig:s,theme:o,renderWrapper:b,children:n.jsx(V,u({isInteractive:i},v))})};exports.Chord=S,exports.ChordCanvas=q,exports.ResponsiveChord=function(e){return n.jsx(r.ResponsiveWrapper,{children:function(r){var o=r.width,t=r.height;return n.jsx(S,u({},e,{width:o,height:t}))}})},exports.ResponsiveChordCanvas=function(e){return n.jsx(r.ResponsiveWrapper,{children:function(r){var o=r.width,t=r.height;return n.jsx(q,u({},e,{width:o,height:t}))}})},exports.canvasDefaultProps=g,exports.commonDefaultProps=f,exports.computeArcPath=A,exports.computeChordArcsAndRibbons=y,exports.computeChordGenerators=m,exports.computeChordLayout=h,exports.computeRibbonPath=C,exports.svgDefaultProps=p,exports.useChord=O,exports.useChordArcsAndRibbons=M,exports.useChordGenerators=x,exports.useChordLayout=R,exports.useChordSelection=E,exports.useCustomLayerProps=k;
//# sourceMappingURL=nivo-chord.cjs.js.map
