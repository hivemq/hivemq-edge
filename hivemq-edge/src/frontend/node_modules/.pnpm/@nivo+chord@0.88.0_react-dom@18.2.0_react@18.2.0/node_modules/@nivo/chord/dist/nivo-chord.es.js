import{memo as e,useMemo as r,useState as n,createElement as t,Fragment as o,useRef as i,useEffect as a,useCallback as c}from"react";import{getLabelGenerator as l,useValueFormatter as d,useMotionConfig as s,useTheme as u,midAngle as b,getPolarLabelProps as v,Container as f,useDimensions as g,SvgWrapper as p,degreesToRadians as h,getRelativeCursor as y,ResponsiveWrapper as m}from"@nivo/core";import{BoxLegendSvg as A,renderLegendToCanvas as R}from"@nivo/legends";import{BasicTooltip as O,TableTooltip as C,Chip as M,useTooltip as x}from"@nivo/tooltip";import{jsx as k,Fragment as E}from"react/jsx-runtime";import{useOrdinalColorScale as W,useInheritedColor as B}from"@nivo/colors";import{to as I,animated as G,useTransition as w}from"@react-spring/web";import{arc as L}from"d3-shape";import{chord as T,ribbon as S}from"d3-chord";import{findArcUnderCursor as F}from"@nivo/arcs";function V(){return V=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},V.apply(this,arguments)}function P(e,r){if(null==e)return{};var n,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}var j=e((function(e){var r=e.arc;return k(O,{id:r.label,value:r.formattedValue,color:r.color,enableChip:!0})})),H=e((function(e){var r=e.ribbon;return k(C,{rows:[[k(M,{color:r.source.color},"chip"),k("strong",{children:r.source.label},"id"),r.source.formattedValue],[k(M,{color:r.target.color},"chip"),k("strong",{children:r.target.label},"id"),r.target.formattedValue]]})})),D={layers:["ribbons","arcs","labels","legends"],padAngle:0,innerRadiusRatio:.9,innerRadiusOffset:0,colors:{scheme:"nivo"},arcOpacity:1,activeArcOpacity:1,inactiveArcOpacity:.15,arcBorderWidth:1,arcBorderColor:{from:"color",modifiers:[["darker",.4]]},arcTooltip:j,ribbonOpacity:.5,activeRibbonOpacity:.85,inactiveRibbonOpacity:.15,ribbonBorderWidth:1,ribbonBorderColor:{from:"color",modifiers:[["darker",.4]]},ribbonBlendMode:"normal",enableLabel:!0,label:"id",labelOffset:12,labelRotation:0,labelTextColor:{from:"color",modifiers:[["darker",1]]},isInteractive:!0,legends:[],animate:!0,motionConfig:"gentle",role:"img"},z=V({},D,{ribbonBlendMode:"normal",ribbonTooltip:H}),q=V({},D,{pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),J=function(e){var r=e.padAngle;return T().padAngle(r)},K=function(e){var r=e.width,n=e.height,t=e.innerRadiusRatio,o=e.innerRadiusOffset,i=[r/2,n/2],a=Math.min(r,n)/2,c=a*t,l=a*(t-o);return{center:i,radius:a,innerRadius:c,arcGenerator:L().outerRadius(a).innerRadius(c),ribbonGenerator:S().radius(l)}},N=function(e){var r=e.chord,n=e.data,t=e.keys,o=e.getLabel,i=e.formatValue,a=e.getColor,c=r(n),l=c.groups.map((function(e){var r=V({},e,{id:t[e.index],formattedValue:i(e.value)});return V({},r,{label:o(r),color:a(r)})}));return{arcs:l,ribbons:c.map((function(e){var r=V({},e.source,{id:t[e.source.index],formattedValue:i(e.source.value)}),n=V({},e.target,{id:t[e.target.index],formattedValue:i(e.target.value)});return V({},e,{id:[r.id,n.id].sort().join("."),source:V({},r,{label:o(r),color:a(r)}),target:V({},n,{label:o(n),color:a(n)})})}))}},Q=function(e){var r=e.startAngle,n=e.endAngle,t=e.arcGenerator;return I([r,n],(function(e,r){return t({startAngle:e,endAngle:r})}))},U=function(e){var r=e.sourceStartAngle,n=e.sourceEndAngle,t=e.targetStartAngle,o=e.targetEndAngle,i=e.ribbonGenerator;return I([r,n,t,o],(function(e,r,n,t){return i({source:{startAngle:Math.min(e,r),endAngle:Math.max(r,e)},target:{startAngle:Math.min(n,t),endAngle:Math.max(t,n)}})}))},X=function(e){var n=e.padAngle;return r((function(){return J({padAngle:n})}),[n])},Y=function(e){var n=e.width,t=e.height,o=e.innerRadiusRatio,i=e.innerRadiusOffset;return r((function(){return K({width:n,height:t,innerRadiusRatio:o,innerRadiusOffset:i})}),[n,t,o,i])},Z=function(e){var n=e.chord,t=e.getColor,o=e.keys,i=e.data,a=e.getLabel,c=e.formatValue;return r((function(){return N({chord:n,data:i,keys:o,getLabel:a,formatValue:c,getColor:t})}),[n,t,o,i,a,c])},$=function(e){var n=e.data,t=e.keys,o=e.label,i=void 0===o?D.label:o,a=e.valueFormat,c=e.width,s=e.height,u=e.innerRadiusRatio,b=void 0===u?D.innerRadiusRatio:u,v=e.innerRadiusOffset,f=void 0===v?D.innerRadiusOffset:v,g=e.padAngle,p=void 0===g?D.padAngle:g,h=e.colors,y=void 0===h?D.colors:h,m=X({padAngle:p}),A=Y({width:c,height:s,innerRadiusRatio:b,innerRadiusOffset:f}),R=A.center,O=A.radius,C=A.innerRadius,M=A.arcGenerator,x=A.ribbonGenerator,k=r((function(){return l(i)}),[i]),E=d(a),B=W(y,"id"),I=Z({chord:m,getColor:B,keys:t,data:n,getLabel:k,formatValue:E});return{center:R,chord:m,radius:O,innerRadius:C,arcGenerator:M,ribbonGenerator:x,getColor:B,arcs:I.arcs,ribbons:I.ribbons}},_=function(e){var t=e.arcOpacity,o=void 0===t?D.arcOpacity:t,i=e.activeArcOpacity,a=void 0===i?D.activeArcOpacity:i,c=e.inactiveArcOpacity,l=void 0===c?D.inactiveArcOpacity:c,d=e.ribbons,s=e.ribbonOpacity,u=void 0===s?D.ribbonOpacity:s,b=e.activeRibbonOpacity,v=void 0===b?D.activeRibbonOpacity:b,f=e.inactiveRibbonOpacity,g=void 0===f?D.inactiveRibbonOpacity:f,p=n(null),h=p[0],y=p[1],m=n(null),A=m[0],R=m[1],O=r((function(){var e=[],r=[];return h&&(e.push(h.id),d.filter((function(e){return e.source.id===h.id||e.target.id===h.id})).forEach((function(e){r.push(e.id)}))),A&&(e.push(A.source.id),e.push(A.target.id),r.push(A.id)),{selectedArcIds:e,selectedRibbonIds:r}}),[h,A,d]),C=O.selectedArcIds.length>1||O.selectedRibbonIds.length>0,M=r((function(){return function(e){return C?O.selectedArcIds.includes(e.id)?a:l:o}}),[C,O.selectedArcIds,o,a,l]),x=r((function(){return function(e){return C?O.selectedRibbonIds.includes(e.id)?v:g:u}}),[C,O.selectedRibbonIds,u,v,g]);return V({currentArc:h,setCurrentArc:y,currentRibbon:A,setCurrentRibbon:R,hasSelection:C},O,{getArcOpacity:M,getRibbonOpacity:x})},ee=function(e){var n=e.center,t=e.radius,o=e.arcs,i=e.arcGenerator,a=e.ribbons,c=e.ribbonGenerator;return r((function(){return{center:n,radius:t,arcs:o,arcGenerator:i,ribbons:a,ribbonGenerator:c}}),[n,t,o,i,a,c])},re=e((function(e){var n=e.ribbon,o=e.ribbonGenerator,i=e.animatedProps,a=e.borderWidth,c=e.blendMode,l=e.isInteractive,d=e.setCurrent,s=e.onMouseEnter,u=e.onMouseMove,b=e.onMouseLeave,v=e.onClick,f=e.tooltip,g=x(),p=g.showTooltipFromEvent,h=g.hideTooltip,y=r((function(){if(l)return function(e){d(n),p(t(f,{ribbon:n}),e),null==s||s(n,e)}}),[l,p,f,n,s,d]),m=r((function(){if(l)return function(e){p(t(f,{ribbon:n}),e),null==u||u(n,e)}}),[l,p,f,n,u]),A=r((function(){if(l)return function(e){d(null),h(),null==b||b(n,e)}}),[l,h,n,b,d]),R=r((function(){if(l&&v)return function(e){return null==v?void 0:v(n,e)}}),[l,n,v]);return k(G.path,{"data-testid":"ribbon."+n.source.id+"."+n.target.id,d:U({sourceStartAngle:i.sourceStartAngle,sourceEndAngle:i.sourceEndAngle,targetStartAngle:i.targetStartAngle,targetEndAngle:i.targetEndAngle,ribbonGenerator:o}),fill:i.color,opacity:i.opacity,strokeWidth:a,stroke:i.borderColor,style:{mixBlendMode:c},onMouseEnter:y,onMouseMove:m,onMouseLeave:A,onClick:R})})),ne=function(e,r){var n,t,o=e.source,i=e.target;if(o.startAngle<i.startAngle?(n=o,t=i):(n=i,t=o),r){var a=b(n),c=b(t);return{sourceStartAngle:a,sourceEndAngle:a,targetStartAngle:c,targetEndAngle:c}}return{sourceStartAngle:n.startAngle,sourceEndAngle:n.endAngle,targetStartAngle:t.startAngle,targetEndAngle:t.endAngle}},te=e((function(e){var r=e.ribbons,n=e.ribbonGenerator,t=e.borderWidth,o=e.borderColor,i=e.getOpacity,a=e.blendMode,c=e.isInteractive,l=e.setCurrent,d=e.onMouseEnter,b=e.onMouseMove,v=e.onMouseLeave,f=e.onClick,g=e.tooltip,p=s(),h=p.animate,y=p.config,m=u(),A=B(o,m),R=w(r,{keys:function(e){return e.id},initial:function(e){return V({},ne(e,!1),{color:e.source.color,opacity:i(e),borderColor:A(e.source)})},from:function(e){return V({},ne(e,!1),{color:e.source.color,opacity:0,borderColor:A(e.source)})},update:function(e){return V({},ne(e,!1),{color:e.source.color,opacity:i(e),borderColor:A(e.source)})},leave:function(e){return V({},ne(e,!1),{color:e.source.color,opacity:0,borderColor:A(e.source)})},expires:!0,config:y,immediate:!h});return k(E,{children:R((function(e,r){return k(re,{ribbon:r,ribbonGenerator:n,animatedProps:e,borderWidth:t,blendMode:a,setCurrent:l,isInteractive:c,tooltip:g,onMouseEnter:d,onMouseMove:b,onMouseLeave:v,onClick:f},r.id)}))})})),oe=e((function(e){var n=e.arc,o=e.animatedProps,i=e.borderWidth,a=e.arcGenerator,c=e.setCurrent,l=e.isInteractive,d=e.onMouseEnter,s=e.onMouseMove,u=e.onMouseLeave,b=e.onClick,v=e.tooltip,f=x(),g=f.showTooltipFromEvent,p=f.hideTooltip,h=r((function(){if(l)return function(e){c(n),g(t(v,{arc:n}),e),null==d||d(n,e)}}),[l,g,v,n,d,c]),y=r((function(){if(l)return function(e){g(t(v,{arc:n}),e),null==s||s(n,e)}}),[l,g,v,n,s]),m=r((function(){if(l)return function(e){c(null),p(),null==u||u(n,e)}}),[l,p,n,u,c]),A=r((function(){if(l&&b)return function(e){return null==b?void 0:b(n,e)}}),[l,n,b]);return k(G.path,{"data-testid":"arc."+n.id,d:Q({startAngle:o.startAngle,endAngle:o.endAngle,arcGenerator:a}),fill:o.color,opacity:o.opacity,strokeWidth:i,stroke:o.borderColor,onMouseEnter:h,onMouseMove:y,onMouseLeave:m,onClick:A})})),ie=e((function(e){var r=e.arcs,n=e.borderWidth,t=e.borderColor,o=e.getOpacity,i=e.arcGenerator,a=e.setCurrent,c=e.isInteractive,l=e.onMouseEnter,d=e.onMouseMove,b=e.onMouseLeave,v=e.onClick,f=e.tooltip,g=s(),p=g.animate,h=g.config,y=u(),m=B(t,y),A=w(r,{keys:function(e){return e.id},initial:function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,color:e.color,opacity:o(e),borderColor:m(e)}},from:function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,color:e.color,opacity:0,borderColor:m(e)}},update:function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,color:e.color,opacity:o(e),borderColor:m(e)}},leave:function(e){return{startAngle:e.startAngle,endAngle:e.endAngle,color:e.color,opacity:0,borderColor:m(e)}},expires:!0,config:h,immediate:!p});return k(E,{children:A((function(e,r){return k(oe,{arc:r,arcGenerator:i,animatedProps:e,borderWidth:n,setCurrent:a,isInteractive:c,tooltip:f,onMouseEnter:l,onMouseMove:d,onMouseLeave:b,onClick:v},r.id)}))})})),ae=e((function(e){var n=e.arcs,t=e.radius,o=e.rotation,i=e.color,a=s(),c=a.animate,l=a.config,d=u(),f=B(i,d),g=r((function(){return n.map((function(e){var r=b(e),n=v(t,r,o);return{id:e.id,label:e.label,x:n.x,y:n.y,rotation:n.rotate,color:f(e),textAnchor:n.align,dominantBaseline:n.baseline}}))}),[n,t,o,f]),p=w(g,{keys:function(e){return e.id},initial:function(e){return{x:e.x,y:e.y,rotation:e.rotation,color:e.color}},from:function(e){return{x:e.x,y:e.y,rotation:e.rotation,color:e.color}},enter:function(e){return{x:e.x,y:e.y,rotation:e.rotation,color:e.color}},update:function(e){return{x:e.x,y:e.y,rotation:e.rotation,color:e.color}},expires:!0,config:l,immediate:!c});return k(E,{children:p((function(e,r){return k(G.text,{"data-testid":"label."+r.id,style:V({},d.labels.text,{pointerEvents:"none",fill:e.color}),transform:I([e.x,e.y,e.rotation],(function(e,r,n){return"translate("+e+", "+r+") rotate("+n+")"})),textAnchor:r.textAnchor,dominantBaseline:r.dominantBaseline,children:r.label},r.id)}))})})),ce=["isInteractive","animate","motionConfig","theme","renderWrapper"],le=function(e){var r=e.data,n=e.keys,i=e.label,a=e.valueFormat,c=e.margin,l=e.width,d=e.height,s=e.innerRadiusRatio,u=void 0===s?z.innerRadiusRatio:s,b=e.innerRadiusOffset,v=void 0===b?z.innerRadiusOffset:b,f=e.padAngle,h=void 0===f?z.padAngle:f,y=e.layers,m=void 0===y?z.layers:y,R=e.colors,O=void 0===R?z.colors:R,C=e.arcBorderWidth,M=void 0===C?z.arcBorderWidth:C,x=e.arcBorderColor,E=void 0===x?z.arcBorderColor:x,W=e.arcOpacity,B=void 0===W?z.arcOpacity:W,I=e.activeArcOpacity,G=void 0===I?z.activeArcOpacity:I,w=e.inactiveArcOpacity,L=void 0===w?z.inactiveArcOpacity:w,T=e.arcTooltip,S=void 0===T?z.arcTooltip:T,F=e.ribbonBorderWidth,P=void 0===F?z.ribbonBorderWidth:F,j=e.ribbonBorderColor,H=void 0===j?z.ribbonBorderColor:j,D=e.ribbonBlendMode,q=void 0===D?z.ribbonBlendMode:D,J=e.ribbonOpacity,K=void 0===J?z.ribbonOpacity:J,N=e.activeRibbonOpacity,Q=void 0===N?z.activeRibbonOpacity:N,U=e.inactiveRibbonOpacity,X=void 0===U?z.inactiveRibbonOpacity:U,Y=e.ribbonTooltip,Z=void 0===Y?z.ribbonTooltip:Y,re=e.enableLabel,ne=void 0===re?z.enableLabel:re,oe=e.labelOffset,ce=void 0===oe?z.labelOffset:oe,le=e.labelRotation,de=void 0===le?z.labelRotation:le,se=e.labelTextColor,ue=void 0===se?z.labelTextColor:se,be=e.isInteractive,ve=void 0===be?z.isInteractive:be,fe=e.onArcMouseEnter,ge=e.onArcMouseMove,pe=e.onArcMouseLeave,he=e.onArcClick,ye=e.onRibbonMouseEnter,me=e.onRibbonMouseMove,Ae=e.onRibbonMouseLeave,Re=e.onRibbonClick,Oe=e.legends,Ce=void 0===Oe?z.legends:Oe,Me=e.role,xe=void 0===Me?z.role:Me,ke=e.ariaLabel,Ee=e.ariaLabelledBy,We=e.ariaDescribedBy,Be=g(l,d,c),Ie=Be.margin,Ge=Be.innerWidth,we=Be.innerHeight,Le=Be.outerWidth,Te=Be.outerHeight,Se=$({data:r,keys:n,label:i,valueFormat:a,width:Ge,height:we,innerRadiusRatio:u,innerRadiusOffset:v,padAngle:h,colors:O}),Fe=Se.center,Ve=Se.radius,Pe=Se.arcGenerator,je=Se.ribbonGenerator,He=Se.arcs,De=Se.ribbons,ze=_({arcOpacity:B,activeArcOpacity:G,inactiveArcOpacity:L,ribbons:De,ribbonOpacity:K,activeRibbonOpacity:Q,inactiveRibbonOpacity:X}),qe=ze.setCurrentArc,Je=ze.setCurrentRibbon,Ke=ze.getArcOpacity,Ne=ze.getRibbonOpacity,Qe=ee({center:Fe,radius:Ve,arcs:He,arcGenerator:Pe,ribbons:De,ribbonGenerator:je});if(Ve<=0)return null;var Ue=He.map((function(e){return{id:e.id,label:e.label,color:e.color}})),Xe={ribbons:null,arcs:null,labels:null,legends:null};return m.includes("ribbons")&&(Xe.ribbons=k("g",{transform:"translate("+Fe[0]+", "+Fe[1]+")",children:k(te,{ribbons:De,ribbonGenerator:je,borderWidth:P,borderColor:H,getOpacity:Ne,blendMode:q,setCurrent:Je,isInteractive:ve,onMouseEnter:ye,onMouseMove:me,onMouseLeave:Ae,onClick:Re,tooltip:Z})},"ribbons")),m.includes("arcs")&&(Xe.arcs=k("g",{transform:"translate("+Fe[0]+", "+Fe[1]+")",children:k(ie,{arcs:He,arcGenerator:Pe,borderWidth:M,borderColor:E,getOpacity:Ke,setCurrent:qe,isInteractive:ve,onMouseEnter:fe,onMouseMove:ge,onMouseLeave:pe,onClick:he,tooltip:S})},"arcs")),m.includes("labels")&&ne&&(Xe.labels=k("g",{transform:"translate("+Fe[0]+", "+Fe[1]+")",children:k(ae,{arcs:He,radius:Ve+ce,rotation:de,color:ue})},"labels")),m.includes("legends")&&Ce.length>0&&(Xe.legends=k(o,{children:Ce.map((function(e,r){return k(A,V({},e,{containerWidth:Ge,containerHeight:we,data:Ue}),r)}))},"legends")),k(p,{width:Le,height:Te,margin:Ie,role:xe,ariaLabel:ke,ariaLabelledBy:Ee,ariaDescribedBy:We,children:m.map((function(e,r){var n;return"function"==typeof e?k(o,{children:t(e,Qe)},r):null!=(n=null==Xe?void 0:Xe[e])?n:null}))})},de=function(e){var r=e.isInteractive,n=void 0===r?z.isInteractive:r,t=e.animate,o=void 0===t?z.animate:t,i=e.motionConfig,a=void 0===i?z.motionConfig:i,c=e.theme,l=e.renderWrapper,d=P(e,ce);return k(f,{animate:o,isInteractive:n,motionConfig:a,renderWrapper:l,theme:c,children:k(le,V({isInteractive:n},d))})},se=["theme","isInteractive","animate","motionConfig","renderWrapper"],ue=function(e){var r=e.event,n=e.canvasEl,t=e.center,o=e.margin,i=e.radius,a=e.innerRadius,c=e.arcs,l=y(n,r),d=l[0],s=l[1],u=o.left+t[0],b=o.top+t[1];return F(u,b,i,a,c,d,s)},be=function(e){var r=e.pixelRatio,n=void 0===r?q.pixelRatio:r,o=e.margin,l=e.data,d=e.keys,s=e.width,f=e.height,p=e.label,y=void 0===p?q.label:p,m=e.valueFormat,A=e.innerRadiusRatio,O=void 0===A?q.innerRadiusRatio:A,C=e.innerRadiusOffset,M=void 0===C?q.innerRadiusOffset:C,E=e.padAngle,W=void 0===E?q.padAngle:E,I=e.layers,G=void 0===I?q.layers:I,w=e.colors,L=void 0===w?q.colors:w,T=e.arcBorderWidth,S=void 0===T?q.arcBorderWidth:T,F=e.arcBorderColor,P=void 0===F?q.arcBorderColor:F,j=e.arcOpacity,H=void 0===j?q.arcOpacity:j,D=e.activeArcOpacity,z=void 0===D?q.activeArcOpacity:D,J=e.inactiveArcOpacity,K=void 0===J?q.inactiveArcOpacity:J,N=e.arcTooltip,Q=void 0===N?q.arcTooltip:N,U=e.ribbonBorderWidth,X=void 0===U?q.ribbonBorderWidth:U,Y=e.ribbonBorderColor,Z=void 0===Y?q.ribbonBorderColor:Y,re=e.ribbonOpacity,ne=void 0===re?q.ribbonOpacity:re,te=e.activeRibbonOpacity,oe=void 0===te?q.activeRibbonOpacity:te,ie=e.inactiveRibbonOpacity,ae=void 0===ie?q.inactiveRibbonOpacity:ie,ce=e.enableLabel,le=void 0===ce?q.enableLabel:ce,de=e.labelOffset,se=void 0===de?q.labelOffset:de,be=e.labelRotation,ve=void 0===be?q.labelRotation:be,fe=e.labelTextColor,ge=void 0===fe?q.labelTextColor:fe,pe=e.isInteractive,he=void 0===pe?q.isInteractive:pe,ye=e.onArcMouseEnter,me=e.onArcMouseMove,Ae=e.onArcMouseLeave,Re=e.onArcClick,Oe=e.legends,Ce=void 0===Oe?q.legends:Oe,Me=i(null),xe=g(s,f,o),ke=xe.innerWidth,Ee=xe.innerHeight,We=xe.outerWidth,Be=xe.outerHeight,Ie=xe.margin,Ge=$({data:l,keys:d,label:y,valueFormat:m,width:ke,height:Ee,innerRadiusRatio:O,innerRadiusOffset:M,padAngle:W,colors:L}),we=Ge.center,Le=Ge.radius,Te=Ge.innerRadius,Se=Ge.arcGenerator,Fe=Ge.ribbonGenerator,Ve=Ge.arcs,Pe=Ge.ribbons,je=_({arcOpacity:H,activeArcOpacity:z,inactiveArcOpacity:K,ribbons:Pe,ribbonOpacity:ne,activeRibbonOpacity:oe,inactiveRibbonOpacity:ae}),He=je.currentArc,De=je.setCurrentArc,ze=je.getArcOpacity,qe=je.getRibbonOpacity,Je=u(),Ke=B(ge,Je),Ne=B(P,Je),Qe=B(Z,Je),Ue=ee({center:we,radius:Le,arcs:Ve,arcGenerator:Se,ribbons:Pe,ribbonGenerator:Fe});a((function(){if(null!==Me.current){Me.current.width=We*n,Me.current.height=Be*n;var e=Me.current.getContext("2d");e.scale(n,n),e.fillStyle=Je.background,e.fillRect(0,0,We,Be),Le<=0||G.forEach((function(r){if("ribbons"===r&&(e.save(),e.translate(Ie.left+we[0],Ie.top+we[1]),Fe.context(e),Pe.forEach((function(r){e.save(),e.globalAlpha=qe(r),e.fillStyle=r.source.color,e.beginPath(),Fe(r),e.fill(),X>0&&(e.strokeStyle=Qe(r.source),e.lineWidth=X,e.stroke()),e.restore()})),e.restore()),"arcs"===r&&(e.save(),e.translate(Ie.left+we[0],Ie.top+we[1]),Se.context(e),Ve.forEach((function(r){e.save(),e.globalAlpha=ze(r),e.fillStyle=r.color,e.beginPath(),Se(r),e.fill(),S>0&&(e.strokeStyle=Ne(r),e.lineWidth=S,e.stroke()),e.restore()})),e.restore()),"labels"===r&&!0===le&&(e.save(),e.translate(Ie.left+we[0],Ie.top+we[1]),e.font=Je.labels.text.fontSize+"px "+(Je.labels.text.fontFamily||"sans-serif"),Ve.forEach((function(r){var n=b(r),t=v(Le+se,n,ve);e.save(),e.translate(t.x,t.y),e.rotate(h(t.rotate)),e.textAlign=t.align,e.textBaseline=t.baseline,e.fillStyle=Ke(r),e.fillText(r.label,0,0),e.restore()})),e.restore()),"legends"===r){e.save(),e.translate(Ie.left,Ie.top);var n=Ve.map((function(e){return{id:e.id,label:e.label,color:e.color}}));Ce.forEach((function(r){R(e,V({},r,{data:n,containerWidth:ke,containerHeight:Ee,theme:Je}))})),e.restore()}"function"==typeof r&&r(e,Ue)}))}}),[Me,ke,Ee,We,Be,Ie,n,we,Le,Je,G,Ve,Se,ze,S,Ne,Pe,Fe,qe,X,Qe,le,se,ve,Ke,Ce,Ue]);var Xe=x(),Ye=Xe.showTooltipFromEvent,Ze=Xe.hideTooltip,$e=c((function(e){if(null!==Me.current){var r=ue({event:e,canvasEl:Me.current,center:we,margin:Ie,radius:Le,innerRadius:Te,arcs:Ve});r?(De(r),Ye(t(Q,{arc:r}),e),!He&&ye&&ye(r,e),me&&me(r,e),He&&He.id!==r.id&&Ae&&Ae(r,e)):(De(null),Ze(),He&&Ae&&Ae(He,e))}}),[Me,we,Ie,Le,Te,Ve,De,He,Ye,Ze,Q,ye,me,Ae]),_e=c((function(){De(null),Ze()}),[De,Ze]),er=c((function(e){if(null!==Me.current&&Re){var r=ue({event:e,canvasEl:Me.current,center:we,margin:Ie,radius:Le,innerRadius:Te,arcs:Ve});r&&Re(r,e)}}),[Me,we,Ie,Le,Te,Ve,Re]);return k("canvas",{ref:Me,width:We*n,height:Be*n,style:{width:We,height:Be,cursor:he?"auto":"normal"},onMouseEnter:he?$e:void 0,onMouseMove:he?$e:void 0,onMouseLeave:he?_e:void 0,onClick:he?er:void 0})},ve=function(e){var r=e.theme,n=e.isInteractive,t=void 0===n?q.isInteractive:n,o=e.animate,i=void 0===o?q.animate:o,a=e.motionConfig,c=void 0===a?q.motionConfig:a,l=e.renderWrapper,d=P(e,se);return k(f,{isInteractive:t,animate:i,motionConfig:c,theme:r,renderWrapper:l,children:k(be,V({isInteractive:t},d))})},fe=function(e){return k(m,{children:function(r){var n=r.width,t=r.height;return k(de,V({},e,{width:n,height:t}))}})},ge=function(e){return k(m,{children:function(r){var n=r.width,t=r.height;return k(ve,V({},e,{width:n,height:t}))}})};export{de as Chord,ve as ChordCanvas,fe as ResponsiveChord,ge as ResponsiveChordCanvas,q as canvasDefaultProps,D as commonDefaultProps,Q as computeArcPath,N as computeChordArcsAndRibbons,K as computeChordGenerators,J as computeChordLayout,U as computeRibbonPath,z as svgDefaultProps,$ as useChord,Z as useChordArcsAndRibbons,Y as useChordGenerators,X as useChordLayout,_ as useChordSelection,ee as useCustomLayerProps};
//# sourceMappingURL=nivo-chord.es.js.map
