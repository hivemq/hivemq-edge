{"version":3,"sources":["../src/show.tsx","../src/media-query.tsx","../src/use-media-query.ts","../src/visibility.tsx"],"sourcesContent":["import { useQuery } from \"./media-query\"\nimport { Visibility } from \"./visibility\"\n\nexport interface ShowProps {\n  /**\n   * A custom css media query that determines when the `children` are rendered.\n   * Will render `children` if that query resolves to `true`.\n   */\n  breakpoint?: string\n  /**\n   * A value from the `breakpoints` section in the theme. Will render `children`\n   * from that breakpoint and below. Default breakpoint values: `sm`, `md`, `lg`, `xl`, `2xl`.\n   */\n  below?: string\n  /**\n   * A value from the `breakpoints` section in the theme. Will render `children`\n   * from that breakpoint and above. Default breakpoint values: `sm`, `md`, `lg`, `xl`, `2xl`.\n   */\n  above?: string\n  ssr?: boolean\n  children?: React.ReactNode\n}\n\n/**\n * `Show` wraps a component to render if the provided media query matches.\n *\n * @see Docs https://chakra-ui.com/docs/components/show-hide\n */\nexport function Show(props: ShowProps) {\n  const { children, ssr } = props\n  const query = useQuery(props)\n  return (\n    <Visibility breakpoint={query} ssr={ssr}>\n      {children}\n    </Visibility>\n  )\n}\n\nShow.displayName = \"Show\"\n","import { useTheme } from \"@chakra-ui/system\"\n\nconst getBreakpoint = (theme: Record<string, any>, value: any) => {\n  return theme?.breakpoints?.[value] ?? value\n}\n\nexport interface UseQueryProps {\n  breakpoint?: string\n  below?: string\n  above?: string\n}\n\nexport function useQuery(props: UseQueryProps) {\n  const { breakpoint = \"\", below, above } = props\n\n  const theme = useTheme()\n  const bpBelow = getBreakpoint(theme, below)\n  const bpAbove = getBreakpoint(theme, above)\n\n  let query = breakpoint\n\n  if (bpBelow) {\n    query = `(max-width: ${bpBelow})`\n  } else if (bpAbove) {\n    query = `(min-width: ${bpAbove})`\n  }\n\n  return query\n}\n","import { useEnvironment } from \"@chakra-ui/react-env\"\nimport { useEffect, useState } from \"react\"\n\nexport type UseMediaQueryOptions = {\n  fallback?: boolean | boolean[]\n  ssr?: boolean\n}\n\n/**\n * React hook that tracks state of a CSS media query\n *\n * @param query the media query to match\n * @param options the media query options { fallback, ssr }\n *\n * @see Docs https://chakra-ui.com/docs/hooks/use-media-query\n */\nexport function useMediaQuery(\n  query: string | string[],\n  options: UseMediaQueryOptions = {},\n): boolean[] {\n  const { ssr = true, fallback } = options\n\n  const { getWindow } = useEnvironment()\n\n  const queries = Array.isArray(query) ? query : [query]\n\n  let fallbackValues = Array.isArray(fallback) ? fallback : [fallback]\n  fallbackValues = fallbackValues.filter((v) => v != null) as boolean[]\n\n  const [value, setValue] = useState(() => {\n    return queries.map((query, index) => ({\n      media: query,\n      matches: ssr\n        ? !!fallbackValues[index]\n        : getWindow().matchMedia(query).matches,\n    }))\n  })\n\n  useEffect(() => {\n    const win = getWindow()\n    setValue(\n      queries.map((query) => ({\n        media: query,\n        matches: win.matchMedia(query).matches,\n      })),\n    )\n\n    const mql = queries.map((query) => win.matchMedia(query))\n\n    const handler = (evt: MediaQueryListEvent) => {\n      setValue((prev) => {\n        return prev.slice().map((item) => {\n          if (item.media === evt.media) return { ...item, matches: evt.matches }\n          return item\n        })\n      })\n    }\n\n    mql.forEach((mql) => {\n      if (typeof mql.addListener === \"function\") {\n        mql.addListener(handler)\n      } else {\n        mql.addEventListener(\"change\", handler)\n      }\n    })\n\n    return () => {\n      mql.forEach((mql) => {\n        if (typeof mql.removeListener === \"function\") {\n          mql.removeListener(handler)\n        } else {\n          mql.removeEventListener(\"change\", handler)\n        }\n      })\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [getWindow])\n\n  return value.map((item) => item.matches)\n}\n","import { useMediaQuery } from \"./use-media-query\"\n\ninterface VisibilityProps {\n  ssr?: boolean\n  breakpoint: string\n  hide?: boolean\n  children: React.ReactNode\n}\n\n/**\n * Visibility\n *\n * React component to control the visibility of its\n * children based on the current breakpoint\n */\nexport function Visibility(props: VisibilityProps) {\n  const { breakpoint, hide, children, ssr } = props\n  const [show] = useMediaQuery(breakpoint, { ssr })\n  const isVisible = hide ? !show : show\n\n  const rendered = isVisible ? children : null\n  return rendered as React.ReactElement\n}\n"],"mappings":"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","names":["query","mql"]}