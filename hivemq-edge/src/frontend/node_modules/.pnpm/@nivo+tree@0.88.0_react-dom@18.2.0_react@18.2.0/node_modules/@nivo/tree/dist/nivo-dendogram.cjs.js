"use strict";var e=require("react"),n=require("@nivo/core"),o=require("@react-spring/web"),i=require("d3-hierarchy"),t=require("d3-scale"),r=require("d3-shape"),s=require("@nivo/tooltip"),u=require("@nivo/colors"),c=require("react/jsx-runtime"),a=require("@nivo/voronoi");function l(){return l=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},l.apply(this,arguments)}console.log(r.link);var d=function(n){var o=n.data,t=n.getIdentity;return e.useMemo((function(){var e=i.hierarchy(o),n=i.cluster().size([1,1]);return e.eachBefore((function(e){var n=e.ancestors().filter((function(n){return n!==e})).reverse(),o=n.map((function(e){return t(e.data)}));e.ancestorIds=o,e.uid=[].concat(o,[t(e.data)]).join("."),e.ancestorUids=n.map((function(e){return e.uid}))})),e.each((function(e){e.descendantUids=e.descendants().filter((function(n){return n!==e})).map((function(e){return e.uid}))})),n(e),e}),[o,t])},h=function(n){return e.useMemo((function(){return void 0===n?function(e){return e.size}:"function"==typeof n?n:function(){return n}}),[n])},v=function(n){var o,i=n.root,t=n.xScale,r=n.yScale,s=n.layout,c=n.getIdentity,a=n.nodeSize,d=n.activeNodeSize,v=n.inactiveNodeSize,g=n.nodeColor,k=e.useMemo((function(){return i.descendants().map((function(e){var n,o;"top-to-bottom"===s||"bottom-to-top"===s?(n=t(e.x),o=r(e.y)):(n=t(e.y),o=r(e.x));var i=c(e.data);return{path:[].concat(e.ancestorIds,[i]),uid:e.uid,ancestorIds:e.ancestorIds,ancestorUids:e.ancestorUids,descendantUids:e.descendantUids,id:i,data:e.data,depth:e.depth,height:e.height,x:n,y:o}}))}),[i,c,s,t,r]),f=(o=a,e.useMemo((function(){return"function"==typeof o?o:function(){return o}}),[o])),m=h(d),p=h(v),M=u.useOrdinalColorScale(g,"uid"),C=e.useState([]),y=C[0],L=C[1],N=e.useMemo((function(){var e={};return{nodes:k.map((function(n){var o=l({},n,{size:f(n),color:M(n),isActive:null});return y.length>0&&(o.isActive=y.includes(o.uid),o.isActive?o.size=m(o):o.size=p(o)),e[o.uid]=o,o})),nodeByUid:e}}),[k,f,m,p,M,y]);return l({},N,{setActiveNodeUids:L})},g=function(n){return e.useMemo((function(){return void 0===n?function(e){return e.thickness}:"function"==typeof n?n:function(){return n}}),[n])},k=function(o){var i=o.data,r=o.width,s=o.height,c=o.identity,a=void 0===c?M.identity:c,h=o.layout,k=void 0===h?M.layout:h,f=o.nodeSize,m=void 0===f?M.nodeSize:f,p=o.activeNodeSize,C=o.inactiveNodeSize,y=o.nodeColor,L=void 0===y?M.nodeColor:y,N=o.highlightAncestorNodes,x=void 0===N?M.highlightAncestorNodes:N,b=o.highlightDescendantNodes,T=void 0===b?M.highlightDescendantNodes:b,I=o.linkThickness,A=void 0===I?M.linkThickness:I,E=o.linkColor,S=void 0===E?M.linkColor:E,z=o.activeLinkThickness,D=o.inactiveLinkThickness,j=o.highlightAncestorLinks,U=void 0===j?M.highlightAncestorLinks:j,w=o.highlightDescendantLinks,q=void 0===w?M.highlightDescendantLinks:w,B=n.usePropertyAccessor(a),W=d({data:i,getIdentity:B}),P=function(n){var o=n.width,i=n.height,r=n.layout;return e.useMemo((function(){var e=t.scaleLinear().domain([0,1]),n=t.scaleLinear().domain([0,1]);return"top-to-bottom"===r?(e.range([0,o]),n.range([0,i])):"right-to-left"===r?(e.range([o,0]),n.range([0,i])):"bottom-to-top"===r?(e.range([o,0]),n.range([i,0])):"left-to-right"===r&&(e.range([0,o]),n.range([i,0])),{xScale:e,yScale:n}}),[o,i,r])}({width:r,height:s,layout:k}),O=P.xScale,X=P.yScale,Y=v({root:W,xScale:O,yScale:X,layout:k,getIdentity:B,nodeSize:m,activeNodeSize:p,inactiveNodeSize:C,nodeColor:L}),F=Y.nodes,H=Y.nodeByUid,R=Y.setActiveNodeUids,G=function(o){var i=o.root,t=o.nodeByUid,r=o.linkThickness,s=o.activeLinkThickness,c=o.inactiveLinkThickness,a=o.linkColor,d=e.useMemo((function(){return i.links().map((function(e){return{id:e.source.uid+":"+e.target.uid,source:t[e.source.uid],target:t[e.target.uid]}}))}),[i,t]),h=e.useMemo((function(){return"function"==typeof r?r:function(){return r}}),[r]),v=g(s),k=g(c),f=n.useTheme(),m=u.useInheritedColor(a,f),p=e.useState([]),M=p[0],C=p[1];return{links:e.useMemo((function(){return d.map((function(e){var n=l({},e,{thickness:h(e),color:m(e),isActive:null});return M.length>0&&(n.isActive=M.includes(n.id),n.isActive?n.thickness=v(n):n.thickness=k(n)),n}))}),[d,h,v,k,m,M]),setActiveLinkIds:C}}({root:W,nodeByUid:H,linkThickness:A,activeLinkThickness:z,inactiveLinkThickness:D,linkColor:S}),J=G.links,K=function(n){var o=n.setActiveNodeUids,i=n.highlightAncestorNodes,t=n.highlightDescendantNodes,r=n.links,s=n.setActiveLinkIds,u=n.highlightAncestorLinks,c=n.highlightDescendantLinks;return e.useCallback((function(e){if(null===e)o([]),s([]);else{var n=[e.uid];i&&(n=[].concat(n,e.ancestorUids)),t&&(n=[].concat(n,e.descendantUids)),o(n);var a=[];u&&r.filter((function(n){return n.target.uid===e.uid||e.ancestorUids.includes(n.target.uid)})).forEach((function(e){a.push(e.id)})),c&&r.filter((function(n){return n.source.uid===e.uid||e.descendantUids.includes(n.source.uid)})).forEach((function(e){a.push(e.id)})),s(a)}}),[o,i,t,r,s,u,c])}({setActiveNodeUids:R,highlightAncestorNodes:x,highlightDescendantNodes:T,links:J,setActiveLinkIds:G.setActiveLinkIds,highlightAncestorLinks:U,highlightDescendantLinks:q});return{nodes:F,links:J,setCurrentNode:K}},f=function(n,o){var i=o.isInteractive,t=o.onMouseEnter,r=o.onMouseMove,u=o.onMouseLeave,c=o.onClick,a=o.setCurrentNode,l=o.tooltip,d=s.useTooltip(),h=d.showTooltipFromEvent,v=d.hideTooltip,g=e.useCallback((function(o){void 0!==l&&h(e.createElement(l,{node:n}),o)}),[n,l,h]),k=e.useCallback((function(e){a(n),g(e),null==t||t(n,e)}),[n,g,a,t]),f=e.useCallback((function(e){g(e),null==r||r(n,e)}),[n,g,r]),m=e.useCallback((function(e){a(null),v(),null==u||u(n,e)}),[n,v,a,u]),p=e.useCallback((function(e){null==c||c(n,e)}),[n,c]);return{onMouseEnter:i?k:void 0,onMouseMove:i?f:void 0,onMouseLeave:i?m:void 0,onClick:i?p:void 0}},m=function(n,o){var i=o.isInteractive,t=o.onMouseEnter,r=o.onMouseMove,u=o.onMouseLeave,c=o.onClick,a=o.tooltip,l=s.useTooltip(),d=l.showTooltipFromEvent,h=l.hideTooltip,v=e.useCallback((function(o){void 0!==a&&d(e.createElement(a,{link:n}),o)}),[n,a,d]),g=e.useCallback((function(e){v(e),null==t||t(n,e)}),[n,v,t]),k=e.useCallback((function(e){v(e),null==r||r(n,e)}),[n,v,r]),f=e.useCallback((function(e){h(),null==u||u(n,e)}),[n,h,u]),m=e.useCallback((function(e){null==c||c(n,e)}),[n,c]);return{onMouseEnter:i?g:void 0,onMouseMove:i?k:void 0,onMouseLeave:i?f:void 0,onClick:i?m:void 0}},p=r.line(),M={identity:"id",layout:"top-to-bottom",nodeSize:16,nodeColor:{scheme:"nivo"},linkThickness:1,linkColor:{from:"source.color",modifiers:[["opacity",.3]]},isInteractive:!0,useMesh:!0,meshDetectionThreshold:1/0,debugMesh:!1,highlightAncestorNodes:!0,highlightDescendantNodes:!1,highlightAncestorLinks:!0,highlightDescendantLinks:!1,role:"img",animate:!0,motionConfig:"gentle"},C=l({},M,{layers:["links","nodes","mesh"],nodeComponent:function(e){var n=e.node,i=e.isInteractive,t=e.onMouseEnter,r=e.onMouseMove,s=e.onMouseLeave,u=e.onClick,a=e.setCurrentNode,d=e.tooltip,h=e.animatedProps,v=f(n,{isInteractive:i,onMouseEnter:t,onMouseMove:r,onMouseLeave:s,onClick:u,setCurrentNode:a,tooltip:d});return c.jsx(o.animated.circle,l({r:h.size.to((function(e){return e/2})),fill:h.color,cx:h.x,cy:h.y},v))},linkComponent:function(e){var n=e.link,i=e.animatedProps,t=e.isInteractive,r=e.onMouseEnter,s=e.onMouseMove,u=e.onMouseLeave,a=e.onClick,d=e.tooltip,h=m(n,{isInteractive:t,onMouseEnter:r,onMouseMove:s,onMouseLeave:u,onClick:a,tooltip:d});return c.jsx(o.animated.path,l({d:o.to([i.sourceX,i.sourceY,i.targetX,i.targetY],(function(e,n,o,i){return p([[e,n],[o,i]])})),strokeWidth:i.thickness,stroke:i.color},h))}}),y=function(e){return{sourceX:e.source.x,sourceY:e.source.y,targetX:e.target.x,targetY:e.target.y,thickness:e.thickness,color:e.color}},L=function(e){return{sourceX:e.source.x,sourceY:e.source.y,targetX:e.target.x,targetY:e.target.y,thickness:e.thickness,color:e.color}},N=function(i){var t=i.links,r=i.linkComponent,s=i.isInteractive,u=i.onMouseEnter,a=i.onMouseMove,l=i.onMouseLeave,d=i.onClick,h=i.tooltip,v=n.useMotionConfig(),g=v.animate,k=v.config,f=o.useTransition(t,{keys:function(e){return e.id},from:y,enter:y,update:y,leave:L,config:k,immediate:!g});return c.jsx(c.Fragment,{children:f((function(n,o){return e.createElement(r,{link:o,animatedProps:n,isInteractive:s,onMouseEnter:u,onMouseMove:a,onMouseLeave:l,onClick:d,tooltip:h})}))})},x=function(e){return{x:e.x,y:e.y,size:e.size,color:e.color}},b=function(e){return{x:e.x,y:e.y,size:0,color:e.color}},T=function(i){var t=i.nodes,r=i.nodeComponent,s=i.isInteractive,u=i.onMouseEnter,a=i.onMouseMove,l=i.onMouseLeave,d=i.onClick,h=i.setCurrentNode,v=i.tooltip,g=n.useMotionConfig(),k=g.animate,f=g.config,m=o.useTransition(t,{keys:function(e){return e.uid},from:x,enter:x,update:x,leave:b,config:f,immediate:!k});return c.jsx(c.Fragment,{children:m((function(n,o){return e.createElement(r,{node:o,isInteractive:s,onMouseEnter:u,onMouseMove:a,onMouseLeave:l,onClick:d,setCurrentNode:h,tooltip:v,animatedProps:n})}))})},I=e.memo((function(n){var o=n.nodes,i=n.width,t=n.height,r=n.margin,u=n.onMouseEnter,l=n.onMouseMove,d=n.onMouseLeave,h=n.onClick,v=n.setCurrentNode,g=n.tooltip,k=n.detectionThreshold,f=n.debug,m=s.useTooltip(),p=m.showTooltipAt,M=m.hideTooltip,C=e.useCallback((function(n,o){var i;(v(n),void 0!==g)&&p(e.createElement(g,{node:n}),[n.x+r.left,null!=(i=n.y)?i:0+r.top],"top");u&&u(n,o)}),[p,g,r.left,r.top,v,u]),y=e.useCallback((function(n,o){var i;(v(n),void 0!==g)&&p(e.createElement(g,{node:n}),[n.x+r.left,null!=(i=n.y)?i:0+r.top],"top");l&&l(n,o)}),[p,g,r.left,r.top,v,l]),L=e.useCallback((function(e,n){v(null),M(),d&&d(e,n)}),[M,v,d]),N=e.useCallback((function(e,n){h&&h(e,n)}),[h]);return c.jsx(a.Mesh,{nodes:o,width:i,height:t,onMouseEnter:C,onMouseMove:y,onMouseLeave:L,onClick:N,detectionThreshold:k,debug:f})})),A=["isInteractive","animate","motionConfig","theme","renderWrapper"],E=function(o){var i=o.width,t=o.height,r=o.margin,s=o.data,u=o.identity,a=o.nodeSize,l=void 0===a?C.nodeSize:a,d=o.activeNodeSize,h=o.inactiveNodeSize,v=o.nodeColor,g=void 0===v?C.nodeColor:v,f=o.nodeComponent,m=void 0===f?C.nodeComponent:f,p=o.linkThickness,M=void 0===p?C.linkThickness:p,y=o.activeLinkThickness,L=o.inactiveLinkThickness,x=o.linkColor,b=void 0===x?C.linkColor:x,A=o.linkComponent,E=void 0===A?C.linkComponent:A,S=o.layout,z=void 0===S?C.layout:S,D=o.layers,j=void 0===D?C.layers:D,U=o.isInteractive,w=void 0===U?C.isInteractive:U,q=o.useMesh,B=void 0===q?C.useMesh:q,W=o.meshDetectionThreshold,P=void 0===W?C.meshDetectionThreshold:W,O=o.debugMesh,X=void 0===O?C.debugMesh:O,Y=o.highlightAncestorNodes,F=void 0===Y?C.highlightAncestorNodes:Y,H=o.highlightDescendantNodes,R=void 0===H?C.highlightDescendantNodes:H,G=o.highlightAncestorLinks,J=void 0===G?C.highlightAncestorLinks:G,K=o.highlightDescendantLinks,Q=void 0===K?C.highlightDescendantLinks:K,V=o.onNodeMouseEnter,Z=o.onNodeMouseMove,$=o.onNodeMouseLeave,_=o.onNodeClick,ee=o.nodeTooltip,ne=o.onLinkMouseEnter,oe=o.onLinkMouseMove,ie=o.onLinkMouseLeave,te=o.onLinkClick,re=o.linkTooltip,se=o.role,ue=void 0===se?C.role:se,ce=o.ariaLabel,ae=o.ariaLabelledBy,le=o.ariaDescribedBy,de=n.useDimensions(i,t,r),he=de.outerWidth,ve=de.outerHeight,ge=de.margin,ke=de.innerWidth,fe=de.innerHeight,me=k({data:s,identity:u,layout:z,width:ke,height:fe,nodeSize:l,activeNodeSize:d,inactiveNodeSize:h,nodeColor:g,highlightAncestorNodes:F,highlightDescendantNodes:R,linkThickness:M,activeLinkThickness:y,inactiveLinkThickness:L,linkColor:b,highlightAncestorLinks:J,highlightDescendantLinks:Q}),pe=me.nodes,Me=me.links,Ce=me.setCurrentNode,ye={links:null,nodes:null,labels:null,mesh:null};j.includes("links")&&(ye.links=c.jsx(N,{links:Me,linkComponent:E,isInteractive:w,onMouseEnter:ne,onMouseMove:oe,onMouseLeave:ie,onClick:te,tooltip:re},"links")),j.includes("nodes")&&(ye.nodes=c.jsx(T,{nodes:pe,nodeComponent:m,isInteractive:w,onMouseEnter:V,onMouseMove:Z,onMouseLeave:$,onClick:_,setCurrentNode:Ce,tooltip:ee},"nodes")),j.includes("mesh")&&w&&B&&(ye.mesh=c.jsx(I,{nodes:pe,width:ke,height:fe,margin:ge,detectionThreshold:P,debug:X,onMouseEnter:V,onMouseMove:Z,onMouseLeave:$,onClick:_,setCurrentNode:Ce},"mesh"));var Le=e.useMemo((function(){return{nodes:pe,links:Me,innerWidth:ke,innerHeight:fe}}),[pe,Me,ke,fe]);return c.jsx(n.SvgWrapper,{width:he,height:ve,margin:ge,role:ue,ariaLabel:ce,ariaLabelledBy:ae,ariaDescribedBy:le,children:j.map((function(n,o){var i;return"function"==typeof n?c.jsx(e.Fragment,{children:e.createElement(n,Le)},o):null!=(i=null==ye?void 0:ye[n])?i:null}))})},S=function(e){var o=e.isInteractive,i=void 0===o?C.isInteractive:o,t=e.animate,r=void 0===t?C.animate:t,s=e.motionConfig,u=void 0===s?C.motionConfig:s,a=e.theme,d=e.renderWrapper,h=function(e,n){if(null==e)return{};var o,i,t={},r=Object.keys(e);for(i=0;i<r.length;i++)o=r[i],n.indexOf(o)>=0||(t[o]=e[o]);return t}(e,A);return c.jsx(n.Container,{animate:r,isInteractive:i,motionConfig:u,renderWrapper:d,theme:a,children:c.jsx(E,l({isInteractive:i},h))})};exports.Dendogram=S,exports.ResponsiveDendogram=function(e){return c.jsx(n.ResponsiveWrapper,{children:function(n){var o=n.width,i=n.height;return c.jsx(S,l({width:o,height:i},e))}})},exports.commonDefaultProps=M,exports.svgDefaultProps=C,exports.useDendogram=k,exports.useLinkMouseEventHandlers=m,exports.useNodeMouseEventHandlers=f,exports.useRoot=d;
//# sourceMappingURL=nivo-dendogram.cjs.js.map
