import{useMemo as e,createElement as o,useCallback as n,useState as t,memo as i,Fragment as r,useRef as l,useEffect as s}from"react";import{usePropertyAccessor as a,useTheme as d,degreesToRadians as u,useMotionConfig as c,Container as h,useDimensions as f,SvgWrapper as v,ResponsiveWrapper as g}from"@nivo/core";import{animated as k,to as p,useTransition as m}from"@react-spring/web";import{hierarchy as b,tree as y,cluster as C}from"d3-hierarchy";import{scaleLinear as L}from"d3-scale";import{link as M,curveLinear as x,curveBumpY as A,curveBumpX as N,curveStep as T,curveStepBefore as z,curveStepAfter as D}from"d3-shape";import{useTooltip as I}from"@nivo/tooltip";import{useOrdinalColorScale as w,useInheritedColor as P}from"@nivo/colors";import{jsx as S,jsxs as E,Fragment as U}from"react/jsx-runtime";import{drawCanvasText as B,setCanvasFont as O}from"@nivo/text";import{Mesh as R,useMesh as W,renderDebugToCanvas as G}from"@nivo/voronoi";function j(){return j=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},j.apply(this,arguments)}function H(e,o){if(null==e)return{};var n,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],o.indexOf(n)>=0||(i[n]=e[n]);return i}var X=function(o){var n=o.data,t=o.mode,i=o.getIdentity;return e((function(){var e=b(n),o="tree"===t?y():C();return e.eachBefore((function(e){var o=e.ancestors().filter((function(o){return o!==e})).reverse(),n=o.map((function(e){return i(e.data)}));e.ancestorIds=n,e.uid=[].concat(n,[i(e.data)]).join("."),e.ancestorUids=o.map((function(e){return e.uid}))})),e.each((function(e){e.descendantUids=e.descendants().filter((function(o){return o!==e})).map((function(e){return e.uid}))})),o(e),e}),[n,t,i])},Y=function(o){return e((function(){return void 0===o?function(e){return e.size}:"function"==typeof o?o:function(){return o}}),[o])},F=function(o){var n,i=o.root,r=o.xScale,l=o.yScale,s=o.layout,a=o.getIdentity,d=o.nodeSize,u=o.activeNodeSize,c=o.inactiveNodeSize,h=o.nodeColor,f=o.fixNodeColorAtDepth,v=e((function(){return i.descendants().map((function(e){var o,n;"top-to-bottom"===s||"bottom-to-top"===s?(o=r(e.x),n=l(e.y)):(o=r(e.y),n=l(e.x));var t=a(e.data);return{path:[].concat(e.ancestorIds,[t]),uid:e.uid,isRoot:0===e.depth,isLeaf:0===e.height,ancestorIds:e.ancestorIds,ancestorUids:e.ancestorUids,descendantUids:e.descendantUids,id:t,data:e.data,depth:e.depth,height:e.height,x:o,y:n}}))}),[i,a,s,r,l]),g=e((function(){return"function"==typeof n?n:function(){return n}}),[n=d]),k=Y(u),p=Y(c),m=w(h,"uid"),b=e((function(){return f===1/0?m:function(e,o){if(e.depth<=0||e.depth<=f||0===e.ancestorUids.length)return m(e);var n=o[e.ancestorUids[e.ancestorUids.length-1]];return void 0===n?m(e):n.color}}),[m,f]),y=t([]),C=y[0],L=y[1],M=e((function(){var e={};return{nodes:v.map((function(o){var n=j({},o,{size:g(o),color:b(o,e),isActive:null});return C.length>0&&(n.isActive=C.includes(n.uid),n.isActive?n.size=k(n):n.size=p(n)),e[n.uid]=n,n})),nodeByUid:e}}),[v,g,k,p,b,C]);return j({},M,{activeNodeUids:C,setActiveNodeUids:L})},q=function(o){return e((function(){return void 0===o?function(e){return e.thickness}:"function"==typeof o?o:function(){return o}}),[o])},J=function(o){var i=o.data,r=o.width,l=o.height,s=o.identity,u=void 0===s?V.identity:s,c=o.mode,h=void 0===c?V.mode:c,f=o.layout,v=void 0===f?V.layout:f,g=o.nodeSize,k=void 0===g?V.nodeSize:g,p=o.activeNodeSize,m=o.inactiveNodeSize,b=o.nodeColor,y=void 0===b?V.nodeColor:b,C=o.fixNodeColorAtDepth,I=void 0===C?V.fixNodeColorAtDepth:C,w=o.highlightAncestorNodes,S=void 0===w?V.highlightAncestorNodes:w,E=o.highlightDescendantNodes,U=void 0===E?V.highlightDescendantNodes:E,B=o.linkCurve,O=void 0===B?V.linkCurve:B,R=o.linkThickness,W=void 0===R?V.linkThickness:R,G=o.linkColor,H=void 0===G?V.linkColor:G,Y=o.activeLinkThickness,J=o.inactiveLinkThickness,K=o.highlightAncestorLinks,Q=void 0===K?V.highlightAncestorLinks:K,Z=o.highlightDescendantLinks,$=void 0===Z?V.highlightDescendantLinks:Z,_=a(u),ee=X({data:i,mode:h,getIdentity:_}),oe=function(o){var n=o.width,t=o.height,i=o.layout;return e((function(){var e=L().domain([0,1]),o=L().domain([0,1]);return"top-to-bottom"===i?(e.range([0,n]),o.range([0,t])):"right-to-left"===i?(e.range([n,0]),o.range([0,t])):"bottom-to-top"===i?(e.range([n,0]),o.range([t,0])):"left-to-right"===i&&(e.range([0,n]),o.range([t,0])),{xScale:e,yScale:o}}),[n,t,i])}({width:r,height:l,layout:v}),ne=oe.xScale,te=oe.yScale,ie=F({root:ee,xScale:ne,yScale:te,layout:v,getIdentity:_,nodeSize:k,activeNodeSize:p,inactiveNodeSize:m,nodeColor:y,fixNodeColorAtDepth:I}),re=ie.nodes,le=ie.nodeByUid,se=ie.activeNodeUids,ae=ie.setActiveNodeUids,de=function(o){var n=o.layout,t=o.curve;return e((function(){var e=x;return"bump"===t?e="top-to-bottom"===n||"bottom-to-top"===n?A:N:"step"===t?e=T:"step-before"===t?e=z:"step-after"===t&&(e=D),M(e)}),[n,t])}({layout:v,curve:O}),ue=function(o){var n=o.root,i=o.nodeByUid,r=o.activeNodeUids,l=o.linkThickness,s=o.activeLinkThickness,a=o.inactiveLinkThickness,u=o.linkColor,c=e((function(){return n.links().map((function(e){return{id:e.source.uid+":"+e.target.uid,source:i[e.source.uid],target:i[e.target.uid]}}))}),[n,i]),h=e((function(){return"function"==typeof l?l:function(){return l}}),[l]),f=q(s),v=q(a),g=d(),k=P(u,g),p=t([]),m=p[0],b=p[1];return{links:e((function(){return c.map((function(e){var o=j({},e,{thickness:h(e),color:k(e),isActive:null});return r.length>0&&(o.isActive=m.includes(o.id),o.isActive?o.thickness=f(o):o.thickness=v(o)),o}))}),[c,h,f,v,k,r.length,m]),setActiveLinkIds:b}}({root:ee,nodeByUid:le,activeNodeUids:se,linkThickness:W,activeLinkThickness:Y,inactiveLinkThickness:J,linkColor:H}),ce=ue.links,he=function(e){var o=e.setActiveNodeUids,t=e.highlightAncestorNodes,i=e.highlightDescendantNodes,r=e.links,l=e.setActiveLinkIds,s=e.highlightAncestorLinks,a=e.highlightDescendantLinks;return n((function(e){if(null===e)o([]),l([]);else{var n=[e.uid];t&&(n=[].concat(n,e.ancestorUids)),i&&(n=[].concat(n,e.descendantUids)),o(n);var d=[];s&&r.filter((function(o){return o.target.uid===e.uid||e.ancestorUids.includes(o.target.uid)})).forEach((function(e){d.push(e.id)})),a&&r.filter((function(o){return o.source.uid===e.uid||e.descendantUids.includes(o.source.uid)})).forEach((function(e){d.push(e.id)})),l(d)}}),[o,t,i,r,l,s,a])}({setActiveNodeUids:ae,highlightAncestorNodes:S,highlightDescendantNodes:U,links:ce,setActiveLinkIds:ue.setActiveLinkIds,highlightAncestorLinks:Q,highlightDescendantLinks:$});return{nodes:re,nodeByUid:le,links:ce,linkGenerator:de,setCurrentNode:he}},K=function(t,i){var r=i.isInteractive,l=i.onMouseEnter,s=i.onMouseMove,a=i.onMouseLeave,d=i.onClick,u=i.setCurrentNode,c=i.tooltip,h=i.tooltipPosition,f=i.tooltipAnchor,v=i.margin,g=I(),k=g.showTooltipFromEvent,p=g.showTooltipAt,m=g.hideTooltip,b=e((function(){if(c)return"fixed"===h?function(){var e=t.x,n=t.y;p(o(c,{node:t}),[e+v.left,n+v.top],f)}:function(e){k(o(c,{node:t}),e,f)}}),[t,c,k,p,h,f,v]),y=n((function(e){u(t),null==b||b(e),null==l||l(t,e)}),[t,b,u,l]),C=n((function(e){null==b||b(e),null==s||s(t,e)}),[t,b,s]),L=n((function(e){u(null),m(),null==a||a(t,e)}),[t,m,u,a]),M=n((function(e){null==d||d(t,e)}),[t,d]);return{onMouseEnter:r?y:void 0,onMouseMove:r?C:void 0,onMouseLeave:r?L:void 0,onClick:r?M:void 0}},Q=function(t,i){var r=i.isInteractive,l=i.onMouseEnter,s=i.onMouseMove,a=i.onMouseLeave,d=i.onClick,u=i.tooltip,c=i.tooltipAnchor,h=I(),f=h.showTooltipFromEvent,v=h.hideTooltip,g=e((function(){if(u)return function(e){f(o(u,{link:t}),e,c)}}),[t,u,f,c]),k=n((function(e){null==g||g(e),null==l||l(t,e)}),[t,g,l]),p=n((function(e){null==g||g(e),null==s||s(t,e)}),[t,g,s]),m=n((function(e){v(),null==a||a(t,e)}),[t,v,a]),b=n((function(e){null==d||d(t,e)}),[t,d]);return{onMouseEnter:r?k:void 0,onMouseMove:r?p:void 0,onMouseLeave:r?m:void 0,onClick:r?b:void 0}},V={identity:"id",mode:"dendogram",layout:"top-to-bottom",nodeSize:12,nodeColor:{scheme:"nivo"},fixNodeColorAtDepth:1/0,linkCurve:"bump",linkThickness:1,linkColor:{from:"source.color",modifiers:[["opacity",.4]]},enableLabel:!0,label:"id",labelsPosition:"outward",orientLabel:!0,labelOffset:6,isInteractive:!0,useMesh:!0,meshDetectionRadius:1/0,debugMesh:!1,highlightAncestorNodes:!0,highlightDescendantNodes:!1,highlightAncestorLinks:!0,highlightDescendantLinks:!1,nodeTooltipPosition:"fixed",nodeTooltipAnchor:"top",role:"img",animate:!0,motionConfig:"gentle"},Z=j({},V,{layers:["links","nodes","labels","mesh"],nodeComponent:function(e){var o=e.node,n=e.isInteractive,t=e.onMouseEnter,i=e.onMouseMove,r=e.onMouseLeave,l=e.onClick,s=e.setCurrentNode,a=e.tooltip,d=e.tooltipPosition,u=e.tooltipAnchor,c=e.margin,h=e.animatedProps,f=K(o,{isInteractive:n,onMouseEnter:t,onMouseMove:i,onMouseLeave:r,onClick:l,setCurrentNode:s,tooltip:a,tooltipPosition:d,tooltipAnchor:u,margin:c});return S(k.circle,j({"data-testid":"node."+o.uid,r:h.size.to((function(e){return e/2})),fill:h.color,cx:h.x,cy:h.y},f))},linkComponent:function(e){var o=e.link,n=e.linkGenerator,t=e.isInteractive,i=e.onMouseEnter,r=e.onMouseMove,l=e.onMouseLeave,s=e.onClick,a=e.tooltip,d=e.tooltipAnchor,u=e.animatedProps,c=Q(o,{isInteractive:t,onMouseEnter:i,onMouseMove:r,onMouseLeave:l,onClick:s,tooltip:a,tooltipAnchor:d});return S(k.path,j({"data-testid":"link."+o.id,d:p([u.sourceX,u.sourceY,u.targetX,u.targetY],(function(e,o,t,i){return n({source:[e,o],target:[t,i]})})),fill:"none",strokeWidth:u.thickness,stroke:u.color},c))},labelComponent:function(e){var o=e.label,n=e.animatedProps,t=d();return S(k.g,{"data-testid":"label."+o.id,transform:p([n.x,n.y],(function(e,o){return"translate("+e+","+o+")"})),children:E(k.g,{transform:n.rotation.to((function(e){return"rotate("+e+")"})),children:[t.labels.text.outlineWidth>0&&S("text",{style:j({},t.labels.text,{fill:t.labels.text.outlineColor}),stroke:t.labels.text.outlineColor,strokeWidth:2*t.labels.text.outlineWidth,strokeLinejoin:"round",textAnchor:o.textAnchor,dominantBaseline:o.baseline,children:o.label}),S("text",{"data-testid":"label."+o.id+".label",style:t.labels.text,textAnchor:o.textAnchor,dominantBaseline:o.baseline,children:o.label})]})})},linkTooltipAnchor:"top"}),$=j({},V,{layers:["links","nodes","labels","mesh"],renderNode:function(e,o){var n=o.node;e.beginPath(),e.arc(n.x,n.y,n.size/2,0,2*Math.PI),e.fillStyle=n.color,e.fill()},renderLink:function(e,o){var n=o.link,t=o.linkGenerator;e.strokeStyle=n.color,e.lineWidth=n.thickness,e.beginPath(),t({source:[n.source.x,n.source.y],target:[n.target.x,n.target.y]}),e.stroke()},renderLabel:function(e,o){var n=o.label,t=o.theme;e.save(),e.translate(n.x,n.y),e.rotate(u(n.rotation)),e.textBaseline="middle",e.textAlign="middle"===n.textAnchor?"center":n.textAnchor,e.fillStyle="#000",B(e,t.labels.text,n.label),e.restore()},pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),_=function(e){return{sourceX:e.source.x,sourceY:e.source.y,targetX:e.target.x,targetY:e.target.y,thickness:e.thickness,color:e.color}},ee=function(e){return{sourceX:e.source.x,sourceY:e.source.y,targetX:e.target.x,targetY:e.target.y,thickness:e.thickness,color:e.color}},oe=function(e){var n=e.links,t=e.linkComponent,i=e.linkGenerator,r=e.isInteractive,l=e.onMouseEnter,s=e.onMouseMove,a=e.onMouseLeave,d=e.onClick,u=e.tooltip,h=e.tooltipAnchor,f=c(),v=f.animate,g=f.config,k=m(n,{keys:function(e){return e.id},from:_,enter:_,update:_,leave:ee,config:g,immediate:!v});return S(U,{children:k((function(e,n){return o(t,{link:n,linkGenerator:i,animatedProps:e,isInteractive:r,onMouseEnter:l,onMouseMove:s,onMouseLeave:a,onClick:d,tooltip:u,tooltipAnchor:h})}))})},ne=function(e){return{x:e.x,y:e.y,size:e.size,color:e.color}},te=function(e){return{x:e.x,y:e.y,size:0,color:e.color}},ie=function(e){var n=e.nodes,t=e.nodeComponent,i=e.isInteractive,r=e.onMouseEnter,l=e.onMouseMove,s=e.onMouseLeave,a=e.onClick,d=e.setCurrentNode,u=e.tooltip,h=e.tooltipPosition,f=e.tooltipAnchor,v=e.margin,g=c(),k=g.animate,p=g.config,b=m(n,{keys:function(e){return e.uid},from:ne,enter:ne,update:ne,leave:te,config:p,immediate:!k});return S(U,{children:b((function(e,n){return o(t,{node:n,isInteractive:i,onMouseEnter:r,onMouseMove:l,onMouseLeave:s,onClick:a,setCurrentNode:d,tooltip:u,tooltipPosition:h,tooltipAnchor:f,margin:v,animatedProps:e})}))})},re=function(e,o,n){return{x:e-n,y:o,rotation:0,textAnchor:"end",baseline:"middle"}},le=function(e,o,n){return{x:e+n,y:o,rotation:0,textAnchor:"start",baseline:"middle"}},se=function(e,o,n){return{x:e,y:o-n,rotation:0,textAnchor:"middle",baseline:"auto"}},ae=function(e,o,n){return{x:e,y:o-n,rotation:-90,textAnchor:"start",baseline:"middle"}},de=function(e,o,n){return{x:e,y:o+n,rotation:0,textAnchor:"middle",baseline:"hanging"}},ue=function(e,o,n){return{x:e,y:o+n,rotation:-90,textAnchor:"end",baseline:"middle"}},ce=function(e){var o=e.orient,n=e.offset;return function(e){var t=e.size/2+n;return e.isLeaf?o?ae(e.x,e.y,t):se(e.x,e.y,t):o?ue(e.x,e.y,t):de(e.x,e.y,t)}},he=function(e){var o=e.orient,n=e.offset;return function(e){var t=e.size/2+n;return e.isLeaf?o?ue(e.x,e.y,t):de(e.x,e.y,t):o?ae(e.x,e.y,t):se(e.x,e.y,t)}},fe=function(e){var o=e.orient,n=e.offset;return function(e){var t=e.size/2+n;return o?ae(e.x,e.y,t):se(e.x,e.y,t)}},ve=function(e){var o=e.orient,n=e.offset;return function(e){var t=e.size/2+n;return o?ue(e.x,e.y,t):de(e.x,e.y,t)}},ge=function(e){var o=e.offset;return function(e){var n=e.size/2+o;return e.isLeaf?re(e.x,e.y,n):le(e.x,e.y,n)}},ke=function(e){var o=e.offset;return function(e){var n=e.size/2+o;return e.isLeaf?le(e.x,e.y,n):re(e.x,e.y,n)}},pe=function(e){var o=e.offset;return function(e){return re(e.x,e.y,e.size/2+o)}},me=function(e){var o=e.offset;return function(e){return le(e.x,e.y,e.size/2+o)}},be=function(o){var n=o.nodes,t=o.label,i=o.layout,r=o.labelsPosition,l=o.orientLabel,s=o.labelOffset,d=a(t),u=function(o){var n=o.layout,t=o.labelsPosition,i=o.orientLabel,r=o.labelOffset;return e((function(){var e={orient:i,offset:r};if("top-to-bottom"===n){if("outward"===t)return he(e);if("inward"===t)return ce(e);if("layout"===t)return ve(e);if("layout-opposite"===t)return fe(e)}if("bottom-to-top"===n){if("outward"===t)return ce(e);if("inward"===t)return he(e);if("layout"===t)return fe(e);if("layout-opposite"===t)return ve(e)}if("right-to-left"===n){if("outward"===t)return ge(e);if("inward"===t)return ke(e);if("layout"===t)return pe(e);if("layout-opposite"===t)return me(e)}if("left-to-right"===n){if("outward"===t)return ke(e);if("inward"===t)return ge(e);if("layout"===t)return me(e);if("layout-opposite"===t)return pe(e)}}),[n,t,i,r])}({layout:i,labelsPosition:r,orientLabel:l,labelOffset:s});if(void 0===u)throw new Error("Unable to determine the logic to compute labels position");return e((function(){return n.map((function(e){return j({id:e.uid,node:e,label:d(e)},u(e))}))}),[n,d,u])},ye=function(e){return{x:e.x,y:e.y,rotation:e.rotation}},Ce=function(e){return{x:e.x,y:e.y,rotation:e.rotation}},Le=function(e){var n=e.nodes,t=e.label,i=e.layout,r=e.labelsPosition,l=e.orientLabel,s=e.labelOffset,a=e.labelComponent,d=be({nodes:n,label:t,layout:i,labelsPosition:r,orientLabel:l,labelOffset:s}),u=c(),h=u.animate,f=u.config,v=m(d,{keys:function(e){return e.id},from:ye,enter:ye,update:ye,leave:Ce,config:f,immediate:!h});return S("g",{style:{pointerEvents:"none"},children:v((function(e,n){return o(a,{label:n,animatedProps:e})}))})},Me=i((function(n){var t=n.nodes,i=n.width,r=n.height,l=n.margin,s=n.onMouseEnter,a=n.onMouseMove,d=n.onMouseLeave,u=n.onClick,c=n.setCurrentNode,h=n.tooltip,f=n.tooltipPosition,v=n.tooltipAnchor,g=n.detectionRadius,k=n.debug,p=e((function(){if(h)return function(e){return o(h,{node:e})}}),[h]);return S(R,{nodes:t,width:i,height:r,margin:l,detectionRadius:g,setCurrent:c,onMouseEnter:s,onMouseMove:a,onMouseLeave:d,onClick:u,tooltip:p,tooltipPosition:f,tooltipAnchor:v,debug:k})})),xe=["isInteractive","animate","motionConfig","theme","renderWrapper"],Ae=function(n){var t=n.width,i=n.height,l=n.margin,s=n.data,a=n.identity,d=n.mode,u=void 0===d?Z.mode:d,c=n.layout,h=void 0===c?Z.layout:c,g=n.nodeSize,k=void 0===g?Z.nodeSize:g,p=n.activeNodeSize,m=n.inactiveNodeSize,b=n.nodeColor,y=void 0===b?Z.nodeColor:b,C=n.fixNodeColorAtDepth,L=void 0===C?Z.fixNodeColorAtDepth:C,M=n.nodeComponent,x=void 0===M?Z.nodeComponent:M,A=n.linkCurve,N=void 0===A?Z.linkCurve:A,T=n.linkThickness,z=void 0===T?Z.linkThickness:T,D=n.activeLinkThickness,I=n.inactiveLinkThickness,w=n.linkColor,P=void 0===w?Z.linkColor:w,E=n.linkComponent,U=void 0===E?Z.linkComponent:E,B=n.enableLabel,O=void 0===B?Z.enableLabel:B,R=n.label,W=void 0===R?Z.label:R,G=n.labelsPosition,j=void 0===G?Z.labelsPosition:G,H=n.orientLabel,X=void 0===H?Z.orientLabel:H,Y=n.labelOffset,F=void 0===Y?Z.labelOffset:Y,q=n.labelComponent,K=void 0===q?Z.labelComponent:q,Q=n.layers,V=void 0===Q?Z.layers:Q,$=n.isInteractive,_=void 0===$?Z.isInteractive:$,ee=n.useMesh,ne=void 0===ee?Z.useMesh:ee,te=n.meshDetectionRadius,re=void 0===te?Z.meshDetectionRadius:te,le=n.debugMesh,se=void 0===le?Z.debugMesh:le,ae=n.highlightAncestorNodes,de=void 0===ae?Z.highlightAncestorNodes:ae,ue=n.highlightDescendantNodes,ce=void 0===ue?Z.highlightDescendantNodes:ue,he=n.highlightAncestorLinks,fe=void 0===he?Z.highlightAncestorLinks:he,ve=n.highlightDescendantLinks,ge=void 0===ve?Z.highlightDescendantLinks:ve,ke=n.onNodeMouseEnter,pe=n.onNodeMouseMove,me=n.onNodeMouseLeave,be=n.onNodeClick,ye=n.nodeTooltip,Ce=n.nodeTooltipPosition,xe=void 0===Ce?Z.nodeTooltipPosition:Ce,Ae=n.nodeTooltipAnchor,Ne=void 0===Ae?Z.nodeTooltipAnchor:Ae,Te=n.onLinkMouseEnter,ze=n.onLinkMouseMove,De=n.onLinkMouseLeave,Ie=n.onLinkClick,we=n.linkTooltip,Pe=n.linkTooltipAnchor,Se=void 0===Pe?Z.linkTooltipAnchor:Pe,Ee=n.role,Ue=void 0===Ee?Z.role:Ee,Be=n.ariaLabel,Oe=n.ariaLabelledBy,Re=n.ariaDescribedBy,We=f(t,i,l),Ge=We.outerWidth,je=We.outerHeight,He=We.margin,Xe=We.innerWidth,Ye=We.innerHeight,Fe=J({data:s,identity:a,layout:h,mode:u,width:Xe,height:Ye,nodeSize:k,activeNodeSize:p,inactiveNodeSize:m,nodeColor:y,fixNodeColorAtDepth:L,highlightAncestorNodes:de,highlightDescendantNodes:ce,linkCurve:N,linkThickness:z,activeLinkThickness:D,inactiveLinkThickness:I,linkColor:P,highlightAncestorLinks:fe,highlightDescendantLinks:ge}),qe=Fe.nodes,Je=Fe.nodeByUid,Ke=Fe.links,Qe=Fe.linkGenerator,Ve=Fe.setCurrentNode,Ze={links:null,nodes:null,labels:null,mesh:null};V.includes("links")&&(Ze.links=S(oe,{links:Ke,linkComponent:U,linkGenerator:Qe,isInteractive:_,onMouseEnter:Te,onMouseMove:ze,onMouseLeave:De,onClick:Ie,tooltip:we,tooltipAnchor:Se},"links")),V.includes("nodes")&&(Ze.nodes=S(ie,{nodes:qe,nodeComponent:x,isInteractive:_,onMouseEnter:ke,onMouseMove:pe,onMouseLeave:me,onClick:be,setCurrentNode:Ve,tooltip:ye,tooltipPosition:xe,tooltipAnchor:Ne,margin:He},"nodes")),V.includes("labels")&&O&&(Ze.labels=S(Le,{label:W,nodes:qe,layout:h,labelsPosition:j,orientLabel:X,labelOffset:F,labelComponent:K},"labels")),V.includes("mesh")&&_&&ne&&(Ze.mesh=S(Me,{nodes:qe,width:Xe,height:Ye,margin:He,detectionRadius:re,debug:se,onMouseEnter:ke,onMouseMove:pe,onMouseLeave:me,onClick:be,tooltip:ye,tooltipPosition:xe,tooltipAnchor:Ne,setCurrentNode:Ve},"mesh"));var $e=e((function(){return{nodes:qe,nodeByUid:Je,links:Ke,innerWidth:Xe,innerHeight:Ye,linkGenerator:Qe,setCurrentNode:Ve}}),[qe,Je,Ke,Xe,Ye,Qe,Ve]);return S(v,{width:Ge,height:je,margin:He,role:Ue,ariaLabel:Be,ariaLabelledBy:Oe,ariaDescribedBy:Re,children:V.map((function(e,n){var t;return"function"==typeof e?S(r,{children:o(e,$e)},n):null!=(t=null==Ze?void 0:Ze[e])?t:null}))})},Ne=function(e){var o=e.isInteractive,n=void 0===o?Z.isInteractive:o,t=e.animate,i=void 0===t?Z.animate:t,r=e.motionConfig,l=void 0===r?Z.motionConfig:r,s=e.theme,a=e.renderWrapper,d=H(e,xe);return S(h,{animate:i,isInteractive:n,motionConfig:l,renderWrapper:a,theme:s,children:S(Ae,j({isInteractive:n},d))})},Te=function(e){return S(g,{children:function(o){var n=o.width,t=o.height;return S(Ne,j({width:n,height:t},e))}})},ze=["isInteractive","animate","motionConfig","theme","renderWrapper"],De=function(n){var t=n.width,i=n.height,r=n.pixelRatio,a=void 0===r?$.pixelRatio:r,u=n.margin,c=n.data,h=n.identity,v=n.mode,g=void 0===v?$.mode:v,k=n.layout,p=void 0===k?$.layout:k,m=n.nodeSize,b=void 0===m?$.nodeSize:m,y=n.activeNodeSize,C=n.inactiveNodeSize,L=n.nodeColor,M=void 0===L?$.nodeColor:L,x=n.fixNodeColorAtDepth,A=void 0===x?$.fixNodeColorAtDepth:x,N=n.renderNode,T=void 0===N?$.renderNode:N,z=n.linkCurve,D=void 0===z?$.linkCurve:z,I=n.linkThickness,w=void 0===I?$.linkThickness:I,P=n.activeLinkThickness,E=n.inactiveLinkThickness,U=n.linkColor,B=void 0===U?$.linkColor:U,R=n.renderLink,j=void 0===R?$.renderLink:R,H=n.enableLabel,X=void 0===H?$.enableLabel:H,Y=n.label,F=void 0===Y?$.label:Y,q=n.labelsPosition,K=void 0===q?$.labelsPosition:q,Q=n.orientLabel,V=void 0===Q?$.orientLabel:Q,Z=n.labelOffset,_=void 0===Z?$.labelOffset:Z,ee=n.renderLabel,oe=void 0===ee?$.renderLabel:ee,ne=n.layers,te=void 0===ne?$.layers:ne,ie=n.isInteractive,re=void 0===ie?$.isInteractive:ie,le=n.meshDetectionRadius,se=void 0===le?$.meshDetectionRadius:le,ae=n.debugMesh,de=void 0===ae?$.debugMesh:ae,ue=n.highlightAncestorNodes,ce=void 0===ue?$.highlightAncestorNodes:ue,he=n.highlightDescendantNodes,fe=void 0===he?$.highlightDescendantNodes:he,ve=n.highlightAncestorLinks,ge=void 0===ve?$.highlightAncestorLinks:ve,ke=n.highlightDescendantLinks,pe=void 0===ke?$.highlightDescendantLinks:ke,me=n.onNodeMouseEnter,ye=n.onNodeMouseMove,Ce=n.onNodeMouseLeave,Le=n.onNodeClick,Me=n.nodeTooltip,xe=n.nodeTooltipPosition,Ae=void 0===xe?$.nodeTooltipPosition:xe,Ne=n.nodeTooltipAnchor,Te=void 0===Ne?$.nodeTooltipAnchor:Ne,ze=n.role,De=void 0===ze?$.role:ze,Ie=n.ariaLabel,we=n.ariaLabelledBy,Pe=n.ariaDescribedBy,Se=l(null),Ee=f(t,i,u),Ue=Ee.outerWidth,Be=Ee.outerHeight,Oe=Ee.margin,Re=Ee.innerWidth,We=Ee.innerHeight,Ge=d(),je=J({data:c,identity:h,layout:p,mode:g,width:Re,height:We,nodeSize:b,activeNodeSize:y,inactiveNodeSize:C,nodeColor:M,fixNodeColorAtDepth:A,highlightAncestorNodes:ce,highlightDescendantNodes:fe,linkCurve:D,linkThickness:w,activeLinkThickness:P,inactiveLinkThickness:E,linkColor:B,highlightAncestorLinks:ge,highlightDescendantLinks:pe}),He=je.nodes,Xe=je.nodeByUid,Ye=je.links,Fe=je.linkGenerator,qe=je.setCurrentNode,Je=be({nodes:He,label:F,layout:p,labelsPosition:K,orientLabel:V,labelOffset:_}),Ke=e((function(){if(Me)return function(e){return o(Me,{node:e})}}),[Me]),Qe=W({elementRef:Se,nodes:He,width:Re,height:We,margin:Oe,detectionRadius:se,isInteractive:re,setCurrent:qe,onMouseEnter:me,onMouseMove:ye,onMouseLeave:Ce,onClick:Le,tooltip:Ke,tooltipPosition:Ae,tooltipAnchor:Te,debug:de}),Ve=Qe.delaunay,Ze=Qe.voronoi,$e=Qe.handleMouseEnter,_e=Qe.handleMouseMove,eo=Qe.handleMouseLeave,oo=Qe.handleClick,no=Qe.current,to=e((function(){return{nodes:He,nodeByUid:Xe,links:Ye,innerWidth:Re,innerHeight:We,linkGenerator:Fe}}),[He,Xe,Ye,Re,We,Fe]);return s((function(){if(null!==Se.current){Se.current.width=Ue*a,Se.current.height=Be*a;var e=Se.current.getContext("2d");e.scale(a,a),e.fillStyle=Ge.background,e.fillRect(0,0,Ue,Be),e.translate(Oe.left,Oe.top),te.forEach((function(o){"links"===o?(Fe.context(e),Ye.forEach((function(o){j(e,{link:o,linkGenerator:Fe})}))):"nodes"===o?He.forEach((function(o){T(e,{node:o})})):"labels"===o&&X?(O(e,Ge.labels.text),Je.forEach((function(o){oe(e,{label:o,theme:Ge})}))):"mesh"===o&&de&&Ze?(e.save(),e.translate(-Oe.left,-Oe.top),G(e,{delaunay:Ve,voronoi:Ze,detectionRadius:se,index:null!==no?no[0]:null}),e.restore()):"function"==typeof o&&o(e,to)}))}}),[Se,Ue,Be,a,Oe.left,Oe.top,Ge,te,He,Xe,T,Ye,j,Fe,Je,X,oe,Ve,Ze,se,de,no,to]),S("canvas",{ref:Se,width:Ue*a,height:Be*a,style:{width:Ue,height:Be,cursor:re?"auto":"normal"},onMouseEnter:$e,onMouseMove:_e,onMouseLeave:eo,onClick:oo,role:De,"aria-label":Ie,"aria-labelledby":we,"aria-describedby":Pe})},Ie=function(e){var o=e.isInteractive,n=void 0===o?$.isInteractive:o,t=e.animate,i=void 0===t?$.animate:t,r=e.motionConfig,l=void 0===r?$.motionConfig:r,s=e.theme,a=e.renderWrapper,d=H(e,ze);return S(h,{animate:i,isInteractive:n,motionConfig:l,renderWrapper:a,theme:s,children:S(De,j({isInteractive:n},d))})},we=function(e){return S(g,{children:function(o){var n=o.width,t=o.height;return S(Ie,j({width:n,height:t},e))}})};export{Te as ResponsiveTree,we as ResponsiveTreeCanvas,Ne as Tree,Ie as TreeCanvas,$ as canvasDefaultProps,V as commonDefaultProps,Z as svgDefaultProps,be as useLabels,Q as useLinkMouseEventHandlers,K as useNodeMouseEventHandlers,X as useRoot,J as useTree};
//# sourceMappingURL=nivo-tree.es.js.map
