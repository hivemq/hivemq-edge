"use strict";var e=require("react"),o=require("@nivo/core"),n=require("@react-spring/web"),t=require("d3-hierarchy"),i=require("d3-scale"),r=require("d3-shape"),s=require("@nivo/tooltip"),a=require("@nivo/colors"),l=require("react/jsx-runtime"),u=require("@nivo/text"),d=require("@nivo/voronoi");function c(){return c=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},c.apply(this,arguments)}function h(e,o){if(null==e)return{};var n,t,i={},r=Object.keys(e);for(t=0;t<r.length;t++)n=r[t],o.indexOf(n)>=0||(i[n]=e[n]);return i}var v=function(o){var n=o.data,i=o.mode,r=o.getIdentity;return e.useMemo((function(){var e=t.hierarchy(n),o="tree"===i?t.tree():t.cluster();return e.eachBefore((function(e){var o=e.ancestors().filter((function(o){return o!==e})).reverse(),n=o.map((function(e){return r(e.data)}));e.ancestorIds=n,e.uid=[].concat(n,[r(e.data)]).join("."),e.ancestorUids=o.map((function(e){return e.uid}))})),e.each((function(e){e.descendantUids=e.descendants().filter((function(o){return o!==e})).map((function(e){return e.uid}))})),o(e),e}),[n,i,r])},f=function(o){return e.useMemo((function(){return void 0===o?function(e){return e.size}:"function"==typeof o?o:function(){return o}}),[o])},g=function(o){var n,t=o.root,i=o.xScale,r=o.yScale,s=o.layout,l=o.getIdentity,u=o.nodeSize,d=o.activeNodeSize,h=o.inactiveNodeSize,v=o.nodeColor,g=o.fixNodeColorAtDepth,p=e.useMemo((function(){return t.descendants().map((function(e){var o,n;"top-to-bottom"===s||"bottom-to-top"===s?(o=i(e.x),n=r(e.y)):(o=i(e.y),n=r(e.x));var t=l(e.data);return{path:[].concat(e.ancestorIds,[t]),uid:e.uid,isRoot:0===e.depth,isLeaf:0===e.height,ancestorIds:e.ancestorIds,ancestorUids:e.ancestorUids,descendantUids:e.descendantUids,id:t,data:e.data,depth:e.depth,height:e.height,x:o,y:n}}))}),[t,l,s,i,r]),k=(n=u,e.useMemo((function(){return"function"==typeof n?n:function(){return n}}),[n])),m=f(d),b=f(h),y=a.useOrdinalColorScale(v,"uid"),x=e.useMemo((function(){return g===1/0?y:function(e,o){if(e.depth<=0||e.depth<=g||0===e.ancestorUids.length)return y(e);var n=o[e.ancestorUids[e.ancestorUids.length-1]];return void 0===n?y(e):n.color}}),[y,g]),M=e.useState([]),C=M[0],L=M[1],A=e.useMemo((function(){var e={};return{nodes:p.map((function(o){var n=c({},o,{size:k(o),color:x(o,e),isActive:null});return C.length>0&&(n.isActive=C.includes(n.uid),n.isActive?n.size=m(n):n.size=b(n)),e[n.uid]=n,n})),nodeByUid:e}}),[p,k,m,b,x,C]);return c({},A,{activeNodeUids:C,setActiveNodeUids:L})},p=function(o){return e.useMemo((function(){return void 0===o?function(e){return e.thickness}:"function"==typeof o?o:function(){return o}}),[o])},k=function(n){var t=n.data,s=n.width,l=n.height,u=n.identity,d=void 0===u?y.identity:u,h=n.mode,f=void 0===h?y.mode:h,k=n.layout,m=void 0===k?y.layout:k,b=n.nodeSize,x=void 0===b?y.nodeSize:b,M=n.activeNodeSize,C=n.inactiveNodeSize,L=n.nodeColor,A=void 0===L?y.nodeColor:L,N=n.fixNodeColorAtDepth,T=void 0===N?y.fixNodeColorAtDepth:N,D=n.highlightAncestorNodes,E=void 0===D?y.highlightAncestorNodes:D,S=n.highlightDescendantNodes,P=void 0===S?y.highlightDescendantNodes:S,z=n.linkCurve,I=void 0===z?y.linkCurve:z,w=n.linkThickness,j=void 0===w?y.linkThickness:w,U=n.linkColor,R=void 0===U?y.linkColor:U,B=n.activeLinkThickness,W=n.inactiveLinkThickness,O=n.highlightAncestorLinks,q=void 0===O?y.highlightAncestorLinks:O,G=n.highlightDescendantLinks,H=void 0===G?y.highlightDescendantLinks:G,X=o.usePropertyAccessor(d),Y=v({data:t,mode:f,getIdentity:X}),F=function(o){var n=o.width,t=o.height,r=o.layout;return e.useMemo((function(){var e=i.scaleLinear().domain([0,1]),o=i.scaleLinear().domain([0,1]);return"top-to-bottom"===r?(e.range([0,n]),o.range([0,t])):"right-to-left"===r?(e.range([n,0]),o.range([0,t])):"bottom-to-top"===r?(e.range([n,0]),o.range([t,0])):"left-to-right"===r&&(e.range([0,n]),o.range([t,0])),{xScale:e,yScale:o}}),[n,t,r])}({width:s,height:l,layout:m}),J=F.xScale,K=F.yScale,Q=g({root:Y,xScale:J,yScale:K,layout:m,getIdentity:X,nodeSize:x,activeNodeSize:M,inactiveNodeSize:C,nodeColor:A,fixNodeColorAtDepth:T}),V=Q.nodes,Z=Q.nodeByUid,$=Q.activeNodeUids,_=Q.setActiveNodeUids,ee=function(o){var n=o.layout,t=o.curve;return e.useMemo((function(){var e=r.curveLinear;return"bump"===t?e="top-to-bottom"===n||"bottom-to-top"===n?r.curveBumpY:r.curveBumpX:"step"===t?e=r.curveStep:"step-before"===t?e=r.curveStepBefore:"step-after"===t&&(e=r.curveStepAfter),r.link(e)}),[n,t])}({layout:m,curve:I}),oe=function(n){var t=n.root,i=n.nodeByUid,r=n.activeNodeUids,s=n.linkThickness,l=n.activeLinkThickness,u=n.inactiveLinkThickness,d=n.linkColor,h=e.useMemo((function(){return t.links().map((function(e){return{id:e.source.uid+":"+e.target.uid,source:i[e.source.uid],target:i[e.target.uid]}}))}),[t,i]),v=e.useMemo((function(){return"function"==typeof s?s:function(){return s}}),[s]),f=p(l),g=p(u),k=o.useTheme(),m=a.useInheritedColor(d,k),b=e.useState([]),y=b[0],x=b[1];return{links:e.useMemo((function(){return h.map((function(e){var o=c({},e,{thickness:v(e),color:m(e),isActive:null});return r.length>0&&(o.isActive=y.includes(o.id),o.isActive?o.thickness=f(o):o.thickness=g(o)),o}))}),[h,v,f,g,m,r.length,y]),setActiveLinkIds:x}}({root:Y,nodeByUid:Z,activeNodeUids:$,linkThickness:j,activeLinkThickness:B,inactiveLinkThickness:W,linkColor:R}),ne=oe.links,te=function(o){var n=o.setActiveNodeUids,t=o.highlightAncestorNodes,i=o.highlightDescendantNodes,r=o.links,s=o.setActiveLinkIds,a=o.highlightAncestorLinks,l=o.highlightDescendantLinks;return e.useCallback((function(e){if(null===e)n([]),s([]);else{var o=[e.uid];t&&(o=[].concat(o,e.ancestorUids)),i&&(o=[].concat(o,e.descendantUids)),n(o);var u=[];a&&r.filter((function(o){return o.target.uid===e.uid||e.ancestorUids.includes(o.target.uid)})).forEach((function(e){u.push(e.id)})),l&&r.filter((function(o){return o.source.uid===e.uid||e.descendantUids.includes(o.source.uid)})).forEach((function(e){u.push(e.id)})),s(u)}}),[n,t,i,r,s,a,l])}({setActiveNodeUids:_,highlightAncestorNodes:E,highlightDescendantNodes:P,links:ne,setActiveLinkIds:oe.setActiveLinkIds,highlightAncestorLinks:q,highlightDescendantLinks:H});return{nodes:V,nodeByUid:Z,links:ne,linkGenerator:ee,setCurrentNode:te}},m=function(o,n){var t=n.isInteractive,i=n.onMouseEnter,r=n.onMouseMove,a=n.onMouseLeave,l=n.onClick,u=n.setCurrentNode,d=n.tooltip,c=n.tooltipPosition,h=n.tooltipAnchor,v=n.margin,f=s.useTooltip(),g=f.showTooltipFromEvent,p=f.showTooltipAt,k=f.hideTooltip,m=e.useMemo((function(){if(d)return"fixed"===c?function(){var n=o.x,t=o.y;p(e.createElement(d,{node:o}),[n+v.left,t+v.top],h)}:function(n){g(e.createElement(d,{node:o}),n,h)}}),[o,d,g,p,c,h,v]),b=e.useCallback((function(e){u(o),null==m||m(e),null==i||i(o,e)}),[o,m,u,i]),y=e.useCallback((function(e){null==m||m(e),null==r||r(o,e)}),[o,m,r]),x=e.useCallback((function(e){u(null),k(),null==a||a(o,e)}),[o,k,u,a]),M=e.useCallback((function(e){null==l||l(o,e)}),[o,l]);return{onMouseEnter:t?b:void 0,onMouseMove:t?y:void 0,onMouseLeave:t?x:void 0,onClick:t?M:void 0}},b=function(o,n){var t=n.isInteractive,i=n.onMouseEnter,r=n.onMouseMove,a=n.onMouseLeave,l=n.onClick,u=n.tooltip,d=n.tooltipAnchor,c=s.useTooltip(),h=c.showTooltipFromEvent,v=c.hideTooltip,f=e.useMemo((function(){if(u)return function(n){h(e.createElement(u,{link:o}),n,d)}}),[o,u,h,d]),g=e.useCallback((function(e){null==f||f(e),null==i||i(o,e)}),[o,f,i]),p=e.useCallback((function(e){null==f||f(e),null==r||r(o,e)}),[o,f,r]),k=e.useCallback((function(e){v(),null==a||a(o,e)}),[o,v,a]),m=e.useCallback((function(e){null==l||l(o,e)}),[o,l]);return{onMouseEnter:t?g:void 0,onMouseMove:t?p:void 0,onMouseLeave:t?k:void 0,onClick:t?m:void 0}},y={identity:"id",mode:"dendogram",layout:"top-to-bottom",nodeSize:12,nodeColor:{scheme:"nivo"},fixNodeColorAtDepth:1/0,linkCurve:"bump",linkThickness:1,linkColor:{from:"source.color",modifiers:[["opacity",.4]]},enableLabel:!0,label:"id",labelsPosition:"outward",orientLabel:!0,labelOffset:6,isInteractive:!0,useMesh:!0,meshDetectionRadius:1/0,debugMesh:!1,highlightAncestorNodes:!0,highlightDescendantNodes:!1,highlightAncestorLinks:!0,highlightDescendantLinks:!1,nodeTooltipPosition:"fixed",nodeTooltipAnchor:"top",role:"img",animate:!0,motionConfig:"gentle"},x=c({},y,{layers:["links","nodes","labels","mesh"],nodeComponent:function(e){var o=e.node,t=e.isInteractive,i=e.onMouseEnter,r=e.onMouseMove,s=e.onMouseLeave,a=e.onClick,u=e.setCurrentNode,d=e.tooltip,h=e.tooltipPosition,v=e.tooltipAnchor,f=e.margin,g=e.animatedProps,p=m(o,{isInteractive:t,onMouseEnter:i,onMouseMove:r,onMouseLeave:s,onClick:a,setCurrentNode:u,tooltip:d,tooltipPosition:h,tooltipAnchor:v,margin:f});return l.jsx(n.animated.circle,c({"data-testid":"node."+o.uid,r:g.size.to((function(e){return e/2})),fill:g.color,cx:g.x,cy:g.y},p))},linkComponent:function(e){var o=e.link,t=e.linkGenerator,i=e.isInteractive,r=e.onMouseEnter,s=e.onMouseMove,a=e.onMouseLeave,u=e.onClick,d=e.tooltip,h=e.tooltipAnchor,v=e.animatedProps,f=b(o,{isInteractive:i,onMouseEnter:r,onMouseMove:s,onMouseLeave:a,onClick:u,tooltip:d,tooltipAnchor:h});return l.jsx(n.animated.path,c({"data-testid":"link."+o.id,d:n.to([v.sourceX,v.sourceY,v.targetX,v.targetY],(function(e,o,n,i){return t({source:[e,o],target:[n,i]})})),fill:"none",strokeWidth:v.thickness,stroke:v.color},f))},labelComponent:function(e){var t=e.label,i=e.animatedProps,r=o.useTheme();return l.jsx(n.animated.g,{"data-testid":"label."+t.id,transform:n.to([i.x,i.y],(function(e,o){return"translate("+e+","+o+")"})),children:l.jsxs(n.animated.g,{transform:i.rotation.to((function(e){return"rotate("+e+")"})),children:[r.labels.text.outlineWidth>0&&l.jsx("text",{style:c({},r.labels.text,{fill:r.labels.text.outlineColor}),stroke:r.labels.text.outlineColor,strokeWidth:2*r.labels.text.outlineWidth,strokeLinejoin:"round",textAnchor:t.textAnchor,dominantBaseline:t.baseline,children:t.label}),l.jsx("text",{"data-testid":"label."+t.id+".label",style:r.labels.text,textAnchor:t.textAnchor,dominantBaseline:t.baseline,children:t.label})]})})},linkTooltipAnchor:"top"}),M=c({},y,{layers:["links","nodes","labels","mesh"],renderNode:function(e,o){var n=o.node;e.beginPath(),e.arc(n.x,n.y,n.size/2,0,2*Math.PI),e.fillStyle=n.color,e.fill()},renderLink:function(e,o){var n=o.link,t=o.linkGenerator;e.strokeStyle=n.color,e.lineWidth=n.thickness,e.beginPath(),t({source:[n.source.x,n.source.y],target:[n.target.x,n.target.y]}),e.stroke()},renderLabel:function(e,n){var t=n.label,i=n.theme;e.save(),e.translate(t.x,t.y),e.rotate(o.degreesToRadians(t.rotation)),e.textBaseline="middle",e.textAlign="middle"===t.textAnchor?"center":t.textAnchor,e.fillStyle="#000",u.drawCanvasText(e,i.labels.text,t.label),e.restore()},pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1}),C=function(e){return{sourceX:e.source.x,sourceY:e.source.y,targetX:e.target.x,targetY:e.target.y,thickness:e.thickness,color:e.color}},L=function(e){return{sourceX:e.source.x,sourceY:e.source.y,targetX:e.target.x,targetY:e.target.y,thickness:e.thickness,color:e.color}},A=function(t){var i=t.links,r=t.linkComponent,s=t.linkGenerator,a=t.isInteractive,u=t.onMouseEnter,d=t.onMouseMove,c=t.onMouseLeave,h=t.onClick,v=t.tooltip,f=t.tooltipAnchor,g=o.useMotionConfig(),p=g.animate,k=g.config,m=n.useTransition(i,{keys:function(e){return e.id},from:C,enter:C,update:C,leave:L,config:k,immediate:!p});return l.jsx(l.Fragment,{children:m((function(o,n){return e.createElement(r,{link:n,linkGenerator:s,animatedProps:o,isInteractive:a,onMouseEnter:u,onMouseMove:d,onMouseLeave:c,onClick:h,tooltip:v,tooltipAnchor:f})}))})},N=function(e){return{x:e.x,y:e.y,size:e.size,color:e.color}},T=function(e){return{x:e.x,y:e.y,size:0,color:e.color}},D=function(t){var i=t.nodes,r=t.nodeComponent,s=t.isInteractive,a=t.onMouseEnter,u=t.onMouseMove,d=t.onMouseLeave,c=t.onClick,h=t.setCurrentNode,v=t.tooltip,f=t.tooltipPosition,g=t.tooltipAnchor,p=t.margin,k=o.useMotionConfig(),m=k.animate,b=k.config,y=n.useTransition(i,{keys:function(e){return e.uid},from:N,enter:N,update:N,leave:T,config:b,immediate:!m});return l.jsx(l.Fragment,{children:y((function(o,n){return e.createElement(r,{node:n,isInteractive:s,onMouseEnter:a,onMouseMove:u,onMouseLeave:d,onClick:c,setCurrentNode:h,tooltip:v,tooltipPosition:f,tooltipAnchor:g,margin:p,animatedProps:o})}))})},E=function(e,o,n){return{x:e-n,y:o,rotation:0,textAnchor:"end",baseline:"middle"}},S=function(e,o,n){return{x:e+n,y:o,rotation:0,textAnchor:"start",baseline:"middle"}},P=function(e,o,n){return{x:e,y:o-n,rotation:0,textAnchor:"middle",baseline:"auto"}},z=function(e,o,n){return{x:e,y:o-n,rotation:-90,textAnchor:"start",baseline:"middle"}},I=function(e,o,n){return{x:e,y:o+n,rotation:0,textAnchor:"middle",baseline:"hanging"}},w=function(e,o,n){return{x:e,y:o+n,rotation:-90,textAnchor:"end",baseline:"middle"}},j=function(e){var o=e.orient,n=e.offset;return function(e){var t=e.size/2+n;return e.isLeaf?o?z(e.x,e.y,t):P(e.x,e.y,t):o?w(e.x,e.y,t):I(e.x,e.y,t)}},U=function(e){var o=e.orient,n=e.offset;return function(e){var t=e.size/2+n;return e.isLeaf?o?w(e.x,e.y,t):I(e.x,e.y,t):o?z(e.x,e.y,t):P(e.x,e.y,t)}},R=function(e){var o=e.orient,n=e.offset;return function(e){var t=e.size/2+n;return o?z(e.x,e.y,t):P(e.x,e.y,t)}},B=function(e){var o=e.orient,n=e.offset;return function(e){var t=e.size/2+n;return o?w(e.x,e.y,t):I(e.x,e.y,t)}},W=function(e){var o=e.offset;return function(e){var n=e.size/2+o;return e.isLeaf?E(e.x,e.y,n):S(e.x,e.y,n)}},O=function(e){var o=e.offset;return function(e){var n=e.size/2+o;return e.isLeaf?S(e.x,e.y,n):E(e.x,e.y,n)}},q=function(e){var o=e.offset;return function(e){return E(e.x,e.y,e.size/2+o)}},G=function(e){var o=e.offset;return function(e){return S(e.x,e.y,e.size/2+o)}},H=function(n){var t=n.nodes,i=n.label,r=n.layout,s=n.labelsPosition,a=n.orientLabel,l=n.labelOffset,u=o.usePropertyAccessor(i),d=function(o){var n=o.layout,t=o.labelsPosition,i=o.orientLabel,r=o.labelOffset;return e.useMemo((function(){var e={orient:i,offset:r};if("top-to-bottom"===n){if("outward"===t)return U(e);if("inward"===t)return j(e);if("layout"===t)return B(e);if("layout-opposite"===t)return R(e)}if("bottom-to-top"===n){if("outward"===t)return j(e);if("inward"===t)return U(e);if("layout"===t)return R(e);if("layout-opposite"===t)return B(e)}if("right-to-left"===n){if("outward"===t)return W(e);if("inward"===t)return O(e);if("layout"===t)return q(e);if("layout-opposite"===t)return G(e)}if("left-to-right"===n){if("outward"===t)return O(e);if("inward"===t)return W(e);if("layout"===t)return G(e);if("layout-opposite"===t)return q(e)}}),[n,t,i,r])}({layout:r,labelsPosition:s,orientLabel:a,labelOffset:l});if(void 0===d)throw new Error("Unable to determine the logic to compute labels position");return e.useMemo((function(){return t.map((function(e){return c({id:e.uid,node:e,label:u(e)},d(e))}))}),[t,u,d])},X=function(e){return{x:e.x,y:e.y,rotation:e.rotation}},Y=function(e){return{x:e.x,y:e.y,rotation:e.rotation}},F=function(t){var i=t.nodes,r=t.label,s=t.layout,a=t.labelsPosition,u=t.orientLabel,d=t.labelOffset,c=t.labelComponent,h=H({nodes:i,label:r,layout:s,labelsPosition:a,orientLabel:u,labelOffset:d}),v=o.useMotionConfig(),f=v.animate,g=v.config,p=n.useTransition(h,{keys:function(e){return e.id},from:X,enter:X,update:X,leave:Y,config:g,immediate:!f});return l.jsx("g",{style:{pointerEvents:"none"},children:p((function(o,n){return e.createElement(c,{label:n,animatedProps:o})}))})},J=e.memo((function(o){var n=o.nodes,t=o.width,i=o.height,r=o.margin,s=o.onMouseEnter,a=o.onMouseMove,u=o.onMouseLeave,c=o.onClick,h=o.setCurrentNode,v=o.tooltip,f=o.tooltipPosition,g=o.tooltipAnchor,p=o.detectionRadius,k=o.debug,m=e.useMemo((function(){if(v)return function(o){return e.createElement(v,{node:o})}}),[v]);return l.jsx(d.Mesh,{nodes:n,width:t,height:i,margin:r,detectionRadius:p,setCurrent:h,onMouseEnter:s,onMouseMove:a,onMouseLeave:u,onClick:c,tooltip:m,tooltipPosition:f,tooltipAnchor:g,debug:k})})),K=["isInteractive","animate","motionConfig","theme","renderWrapper"],Q=function(n){var t=n.width,i=n.height,r=n.margin,s=n.data,a=n.identity,u=n.mode,d=void 0===u?x.mode:u,c=n.layout,h=void 0===c?x.layout:c,v=n.nodeSize,f=void 0===v?x.nodeSize:v,g=n.activeNodeSize,p=n.inactiveNodeSize,m=n.nodeColor,b=void 0===m?x.nodeColor:m,y=n.fixNodeColorAtDepth,M=void 0===y?x.fixNodeColorAtDepth:y,C=n.nodeComponent,L=void 0===C?x.nodeComponent:C,N=n.linkCurve,T=void 0===N?x.linkCurve:N,E=n.linkThickness,S=void 0===E?x.linkThickness:E,P=n.activeLinkThickness,z=n.inactiveLinkThickness,I=n.linkColor,w=void 0===I?x.linkColor:I,j=n.linkComponent,U=void 0===j?x.linkComponent:j,R=n.enableLabel,B=void 0===R?x.enableLabel:R,W=n.label,O=void 0===W?x.label:W,q=n.labelsPosition,G=void 0===q?x.labelsPosition:q,H=n.orientLabel,X=void 0===H?x.orientLabel:H,Y=n.labelOffset,K=void 0===Y?x.labelOffset:Y,Q=n.labelComponent,V=void 0===Q?x.labelComponent:Q,Z=n.layers,$=void 0===Z?x.layers:Z,_=n.isInteractive,ee=void 0===_?x.isInteractive:_,oe=n.useMesh,ne=void 0===oe?x.useMesh:oe,te=n.meshDetectionRadius,ie=void 0===te?x.meshDetectionRadius:te,re=n.debugMesh,se=void 0===re?x.debugMesh:re,ae=n.highlightAncestorNodes,le=void 0===ae?x.highlightAncestorNodes:ae,ue=n.highlightDescendantNodes,de=void 0===ue?x.highlightDescendantNodes:ue,ce=n.highlightAncestorLinks,he=void 0===ce?x.highlightAncestorLinks:ce,ve=n.highlightDescendantLinks,fe=void 0===ve?x.highlightDescendantLinks:ve,ge=n.onNodeMouseEnter,pe=n.onNodeMouseMove,ke=n.onNodeMouseLeave,me=n.onNodeClick,be=n.nodeTooltip,ye=n.nodeTooltipPosition,xe=void 0===ye?x.nodeTooltipPosition:ye,Me=n.nodeTooltipAnchor,Ce=void 0===Me?x.nodeTooltipAnchor:Me,Le=n.onLinkMouseEnter,Ae=n.onLinkMouseMove,Ne=n.onLinkMouseLeave,Te=n.onLinkClick,De=n.linkTooltip,Ee=n.linkTooltipAnchor,Se=void 0===Ee?x.linkTooltipAnchor:Ee,Pe=n.role,ze=void 0===Pe?x.role:Pe,Ie=n.ariaLabel,we=n.ariaLabelledBy,je=n.ariaDescribedBy,Ue=o.useDimensions(t,i,r),Re=Ue.outerWidth,Be=Ue.outerHeight,We=Ue.margin,Oe=Ue.innerWidth,qe=Ue.innerHeight,Ge=k({data:s,identity:a,layout:h,mode:d,width:Oe,height:qe,nodeSize:f,activeNodeSize:g,inactiveNodeSize:p,nodeColor:b,fixNodeColorAtDepth:M,highlightAncestorNodes:le,highlightDescendantNodes:de,linkCurve:T,linkThickness:S,activeLinkThickness:P,inactiveLinkThickness:z,linkColor:w,highlightAncestorLinks:he,highlightDescendantLinks:fe}),He=Ge.nodes,Xe=Ge.nodeByUid,Ye=Ge.links,Fe=Ge.linkGenerator,Je=Ge.setCurrentNode,Ke={links:null,nodes:null,labels:null,mesh:null};$.includes("links")&&(Ke.links=l.jsx(A,{links:Ye,linkComponent:U,linkGenerator:Fe,isInteractive:ee,onMouseEnter:Le,onMouseMove:Ae,onMouseLeave:Ne,onClick:Te,tooltip:De,tooltipAnchor:Se},"links")),$.includes("nodes")&&(Ke.nodes=l.jsx(D,{nodes:He,nodeComponent:L,isInteractive:ee,onMouseEnter:ge,onMouseMove:pe,onMouseLeave:ke,onClick:me,setCurrentNode:Je,tooltip:be,tooltipPosition:xe,tooltipAnchor:Ce,margin:We},"nodes")),$.includes("labels")&&B&&(Ke.labels=l.jsx(F,{label:O,nodes:He,layout:h,labelsPosition:G,orientLabel:X,labelOffset:K,labelComponent:V},"labels")),$.includes("mesh")&&ee&&ne&&(Ke.mesh=l.jsx(J,{nodes:He,width:Oe,height:qe,margin:We,detectionRadius:ie,debug:se,onMouseEnter:ge,onMouseMove:pe,onMouseLeave:ke,onClick:me,tooltip:be,tooltipPosition:xe,tooltipAnchor:Ce,setCurrentNode:Je},"mesh"));var Qe=e.useMemo((function(){return{nodes:He,nodeByUid:Xe,links:Ye,innerWidth:Oe,innerHeight:qe,linkGenerator:Fe,setCurrentNode:Je}}),[He,Xe,Ye,Oe,qe,Fe,Je]);return l.jsx(o.SvgWrapper,{width:Re,height:Be,margin:We,role:ze,ariaLabel:Ie,ariaLabelledBy:we,ariaDescribedBy:je,children:$.map((function(o,n){var t;return"function"==typeof o?l.jsx(e.Fragment,{children:e.createElement(o,Qe)},n):null!=(t=null==Ke?void 0:Ke[o])?t:null}))})},V=function(e){var n=e.isInteractive,t=void 0===n?x.isInteractive:n,i=e.animate,r=void 0===i?x.animate:i,s=e.motionConfig,a=void 0===s?x.motionConfig:s,u=e.theme,d=e.renderWrapper,v=h(e,K);return l.jsx(o.Container,{animate:r,isInteractive:t,motionConfig:a,renderWrapper:d,theme:u,children:l.jsx(Q,c({isInteractive:t},v))})},Z=["isInteractive","animate","motionConfig","theme","renderWrapper"],$=function(n){var t=n.width,i=n.height,r=n.pixelRatio,s=void 0===r?M.pixelRatio:r,a=n.margin,c=n.data,h=n.identity,v=n.mode,f=void 0===v?M.mode:v,g=n.layout,p=void 0===g?M.layout:g,m=n.nodeSize,b=void 0===m?M.nodeSize:m,y=n.activeNodeSize,x=n.inactiveNodeSize,C=n.nodeColor,L=void 0===C?M.nodeColor:C,A=n.fixNodeColorAtDepth,N=void 0===A?M.fixNodeColorAtDepth:A,T=n.renderNode,D=void 0===T?M.renderNode:T,E=n.linkCurve,S=void 0===E?M.linkCurve:E,P=n.linkThickness,z=void 0===P?M.linkThickness:P,I=n.activeLinkThickness,w=n.inactiveLinkThickness,j=n.linkColor,U=void 0===j?M.linkColor:j,R=n.renderLink,B=void 0===R?M.renderLink:R,W=n.enableLabel,O=void 0===W?M.enableLabel:W,q=n.label,G=void 0===q?M.label:q,X=n.labelsPosition,Y=void 0===X?M.labelsPosition:X,F=n.orientLabel,J=void 0===F?M.orientLabel:F,K=n.labelOffset,Q=void 0===K?M.labelOffset:K,V=n.renderLabel,Z=void 0===V?M.renderLabel:V,$=n.layers,_=void 0===$?M.layers:$,ee=n.isInteractive,oe=void 0===ee?M.isInteractive:ee,ne=n.meshDetectionRadius,te=void 0===ne?M.meshDetectionRadius:ne,ie=n.debugMesh,re=void 0===ie?M.debugMesh:ie,se=n.highlightAncestorNodes,ae=void 0===se?M.highlightAncestorNodes:se,le=n.highlightDescendantNodes,ue=void 0===le?M.highlightDescendantNodes:le,de=n.highlightAncestorLinks,ce=void 0===de?M.highlightAncestorLinks:de,he=n.highlightDescendantLinks,ve=void 0===he?M.highlightDescendantLinks:he,fe=n.onNodeMouseEnter,ge=n.onNodeMouseMove,pe=n.onNodeMouseLeave,ke=n.onNodeClick,me=n.nodeTooltip,be=n.nodeTooltipPosition,ye=void 0===be?M.nodeTooltipPosition:be,xe=n.nodeTooltipAnchor,Me=void 0===xe?M.nodeTooltipAnchor:xe,Ce=n.role,Le=void 0===Ce?M.role:Ce,Ae=n.ariaLabel,Ne=n.ariaLabelledBy,Te=n.ariaDescribedBy,De=e.useRef(null),Ee=o.useDimensions(t,i,a),Se=Ee.outerWidth,Pe=Ee.outerHeight,ze=Ee.margin,Ie=Ee.innerWidth,we=Ee.innerHeight,je=o.useTheme(),Ue=k({data:c,identity:h,layout:p,mode:f,width:Ie,height:we,nodeSize:b,activeNodeSize:y,inactiveNodeSize:x,nodeColor:L,fixNodeColorAtDepth:N,highlightAncestorNodes:ae,highlightDescendantNodes:ue,linkCurve:S,linkThickness:z,activeLinkThickness:I,inactiveLinkThickness:w,linkColor:U,highlightAncestorLinks:ce,highlightDescendantLinks:ve}),Re=Ue.nodes,Be=Ue.nodeByUid,We=Ue.links,Oe=Ue.linkGenerator,qe=Ue.setCurrentNode,Ge=H({nodes:Re,label:G,layout:p,labelsPosition:Y,orientLabel:J,labelOffset:Q}),He=e.useMemo((function(){if(me)return function(o){return e.createElement(me,{node:o})}}),[me]),Xe=d.useMesh({elementRef:De,nodes:Re,width:Ie,height:we,margin:ze,detectionRadius:te,isInteractive:oe,setCurrent:qe,onMouseEnter:fe,onMouseMove:ge,onMouseLeave:pe,onClick:ke,tooltip:He,tooltipPosition:ye,tooltipAnchor:Me,debug:re}),Ye=Xe.delaunay,Fe=Xe.voronoi,Je=Xe.handleMouseEnter,Ke=Xe.handleMouseMove,Qe=Xe.handleMouseLeave,Ve=Xe.handleClick,Ze=Xe.current,$e=e.useMemo((function(){return{nodes:Re,nodeByUid:Be,links:We,innerWidth:Ie,innerHeight:we,linkGenerator:Oe}}),[Re,Be,We,Ie,we,Oe]);return e.useEffect((function(){if(null!==De.current){De.current.width=Se*s,De.current.height=Pe*s;var e=De.current.getContext("2d");e.scale(s,s),e.fillStyle=je.background,e.fillRect(0,0,Se,Pe),e.translate(ze.left,ze.top),_.forEach((function(o){"links"===o?(Oe.context(e),We.forEach((function(o){B(e,{link:o,linkGenerator:Oe})}))):"nodes"===o?Re.forEach((function(o){D(e,{node:o})})):"labels"===o&&O?(u.setCanvasFont(e,je.labels.text),Ge.forEach((function(o){Z(e,{label:o,theme:je})}))):"mesh"===o&&re&&Fe?(e.save(),e.translate(-ze.left,-ze.top),d.renderDebugToCanvas(e,{delaunay:Ye,voronoi:Fe,detectionRadius:te,index:null!==Ze?Ze[0]:null}),e.restore()):"function"==typeof o&&o(e,$e)}))}}),[De,Se,Pe,s,ze.left,ze.top,je,_,Re,Be,D,We,B,Oe,Ge,O,Z,Ye,Fe,te,re,Ze,$e]),l.jsx("canvas",{ref:De,width:Se*s,height:Pe*s,style:{width:Se,height:Pe,cursor:oe?"auto":"normal"},onMouseEnter:Je,onMouseMove:Ke,onMouseLeave:Qe,onClick:Ve,role:Le,"aria-label":Ae,"aria-labelledby":Ne,"aria-describedby":Te})},_=function(e){var n=e.isInteractive,t=void 0===n?M.isInteractive:n,i=e.animate,r=void 0===i?M.animate:i,s=e.motionConfig,a=void 0===s?M.motionConfig:s,u=e.theme,d=e.renderWrapper,v=h(e,Z);return l.jsx(o.Container,{animate:r,isInteractive:t,motionConfig:a,renderWrapper:d,theme:u,children:l.jsx($,c({isInteractive:t},v))})};exports.ResponsiveTree=function(e){return l.jsx(o.ResponsiveWrapper,{children:function(o){var n=o.width,t=o.height;return l.jsx(V,c({width:n,height:t},e))}})},exports.ResponsiveTreeCanvas=function(e){return l.jsx(o.ResponsiveWrapper,{children:function(o){var n=o.width,t=o.height;return l.jsx(_,c({width:n,height:t},e))}})},exports.Tree=V,exports.TreeCanvas=_,exports.canvasDefaultProps=M,exports.commonDefaultProps=y,exports.svgDefaultProps=x,exports.useLabels=H,exports.useLinkMouseEventHandlers=b,exports.useNodeMouseEventHandlers=m,exports.useRoot=v,exports.useTree=k;
//# sourceMappingURL=nivo-tree.cjs.js.map
