import{Axes as e,Grid as t,renderGridLinesToCanvas as a,renderAxesToCanvas as i}from"@nivo/axes";import{useTheme as n,getPropertyAccessor as l,usePropertyAccessor as r,useValueFormatter as o,Container as d,useMotionConfig as u,useDimensions as c,bindDefs as s,CartesianMarkers as h,SvgWrapper as f,getRelativeCursor as b,isCursorInRect as v,ResponsiveWrapper as g}from"@nivo/core";import{animated as m,to as p,useTransition as x}from"@react-spring/web";import{useMemo as y,createElement as S,useCallback as k,useState as w,Fragment as L,forwardRef as C,useRef as V,useEffect as M}from"react";import{useAnnotations as W,Annotation as T,useComputedAnnotations as B,renderAnnotationsToCanvas as O}from"@nivo/annotations";import{jsx as I,Fragment as P,jsxs as E}from"react/jsx-runtime";import{BoxLegendSvg as H,renderLegendToCanvas as R}from"@nivo/legends";import{useOrdinalColorScale as F,useInheritedColor as D}from"@nivo/colors";import{useTooltip as A,BasicTooltip as X}from"@nivo/tooltip";import{computeScale as Y}from"@nivo/scales";import{stack as G,stackOffsetDiverging as z}from"d3-shape";import N from"lodash/uniqBy";function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e},j.apply(this,arguments)}function q(e,t){if(null==e)return{};var a,i,n={},l=Object.keys(e);for(i=0;i<l.length;i++)a=l[i],t.indexOf(a)>=0||(n[a]=e[a]);return n}var K,_=function(e){var t=e.bars,a=e.annotations,i=W({data:t,annotations:a,getPosition:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},getDimensions:function(e){var t=e.height,a=e.width;return{width:a,height:t,size:Math.max(a,t)}}});return I(P,{children:i.map((function(e,t){return I(T,j({},e),t)}))})},J=function(e){var t=e.width,a=e.height,i=e.legends,n=e.toggleSerie;return I(P,{children:i.map((function(e,i){var l,r=e[0],o=e[1];return I(H,j({},r,{containerWidth:t,containerHeight:a,data:null!=(l=r.data)?l:o,toggleSerie:r.toggleSerie&&"keys"===r.dataFrom?n:void 0}),i)}))})},Q=["data"],U=function(e){var t,a=e.bar,i=a.data,l=q(a,Q),r=e.style,o=r.borderColor,d=r.color,u=r.height,c=r.labelColor,s=r.labelOpacity,h=r.labelX,f=r.labelY,b=r.transform,v=r.width,g=r.textAnchor,x=e.borderRadius,w=e.borderWidth,L=e.label,C=e.shouldRenderLabel,V=e.isInteractive,M=e.onClick,W=e.onMouseEnter,T=e.onMouseLeave,B=e.tooltip,O=e.isFocusable,P=e.ariaLabel,H=e.ariaLabelledBy,R=e.ariaDescribedBy,F=e.ariaDisabled,D=e.ariaHidden,X=n(),Y=A(),G=Y.showTooltipFromEvent,z=Y.showTooltipAt,N=Y.hideTooltip,K=y((function(){return function(){return S(B,j({},l,i))}}),[B,l,i]),_=k((function(e){null==M||M(j({color:l.color},i),e)}),[l,i,M]),J=k((function(e){return G(K(),e)}),[G,K]),U=k((function(e){null==W||W(i,e),G(K(),e)}),[i,W,G,K]),Z=k((function(e){null==T||T(i,e),N()}),[i,N,T]),$=k((function(){z(K(),[l.absX+l.width/2,l.absY])}),[z,K,l]),ee=k((function(){N()}),[N]);return E(m.g,{transform:b,children:[I(m.rect,{width:p(v,(function(e){return Math.max(e,0)})),height:p(u,(function(e){return Math.max(e,0)})),rx:x,ry:x,fill:null!=(t=i.fill)?t:d,strokeWidth:w,stroke:o,focusable:O,tabIndex:O?0:void 0,"aria-label":P?P(i):void 0,"aria-labelledby":H?H(i):void 0,"aria-describedby":R?R(i):void 0,"aria-disabled":F?F(i):void 0,"aria-hidden":D?D(i):void 0,onMouseEnter:V?U:void 0,onMouseMove:V?J:void 0,onMouseLeave:V?Z:void 0,onClick:V?_:void 0,onFocus:V&&O?$:void 0,onBlur:V&&O?ee:void 0}),C&&I(m.text,{x:h,y:f,textAnchor:g,dominantBaseline:"central",fillOpacity:s,style:j({},X.labels.text,{pointerEvents:"none",fill:c}),children:L})]})},Z=["color","label"],$=function(e){var t=e.color,a=e.label,i=q(e,Z);return I(X,{id:a,value:i.formattedValue,enableChip:!0,color:t})},ee={indexBy:"id",keys:["value"],groupMode:"stacked",layout:"vertical",reverse:!1,minValue:"auto",maxValue:"auto",valueScale:{type:"linear"},indexScale:{type:"band",round:!0},padding:.1,innerPadding:0,axisBottom:{},axisLeft:{},enableGridX:!1,enableGridY:!0,enableLabel:!0,label:"formattedValue",labelPosition:"middle",labelOffset:0,labelSkipWidth:0,labelSkipHeight:0,labelTextColor:{from:"theme",theme:"labels.text.fill"},colorBy:"id",colors:{scheme:"nivo"},borderRadius:0,borderWidth:0,borderColor:{from:"color"},isInteractive:!0,tooltip:$,tooltipLabel:function(e){return e.id+" - "+e.indexValue},legends:[],initialHiddenIds:[],annotations:[],markers:[],enableTotals:!1,totalsOffset:10},te=j({},ee,{layers:["grid","axes","bars","totals","markers","legends","annotations"],barComponent:U,defs:[],fill:[],animate:!0,motionConfig:"default",role:"img",isFocusable:!1}),ae=j({},ee,{layers:["grid","axes","bars","totals","legends","annotations"],pixelRatio:"undefined"!=typeof window&&null!=(K=window.devicePixelRatio)?K:1}),ie=function(e,t,a,i,n,l){return Y(i,{all:e.map(t),min:0,max:0},n,l).padding(a)},ne=function(e,t){return e.map((function(e){return j({},t.reduce((function(e,t){return e[t]=null,e}),{}),e)}))},le=function(e){return Object.keys(e).reduce((function(t,a){return e[a]&&(t[a]=e[a]),t}),{})},re=function(e){return[e,Number(e)]};function oe(e,t,a,i){return void 0===e&&(e=ee.layout),void 0===t&&(t=ee.reverse),void 0===a&&(a=ee.labelPosition),void 0===i&&(i=ee.labelOffset),function(n,l){var r=i*(t?-1:1);if("horizontal"===e){var o=n/2;return"start"===a?o=t?n:0:"end"===a&&(o=t?0:n),{labelX:o+r,labelY:l/2,textAnchor:"middle"===a?"middle":t?"end":"start"}}var d=l/2;return"start"===a?d=t?0:l:"end"===a&&(d=t?l:0),{labelX:n/2,labelY:d-r,textAnchor:"middle"}}}var de=["layout","minValue","maxValue","reverse","width","height","padding","innerPadding","valueScale","indexScale","hiddenIds"],ue=function(e,t){return e>t},ce=function(e,t){return e<t},se=function(e,t){return Array.from(" ".repeat(t-e),(function(t,a){return e+a}))},he=function(e){return ue(e,0)?0:e},fe=function(e,t,a,i){var n=e.data,l=e.formatValue,r=e.getColor,o=e.getIndex,d=e.getTooltipLabel,u=e.innerPadding,c=void 0===u?0:u,s=e.keys,h=e.xScale,f=e.yScale,b=e.margin,v=a?ce:ue,g=n.map(le),m=[];return s.forEach((function(e,a){return se(0,h.domain().length).forEach((function(u){var s,p,x,y=re(n[u][e]),S=y[0],k=y[1],w=o(n[u]),L=(null!=(s=h(w))?s:0)+t*a+c*a,C=v(p=k,0)?null!=(x=f(p))?x:0:i,V=function(e,t){var a;return v(e,0)?i-t:(null!=(a=f(e))?a:0)-i}(k,C),M={id:e,value:null===S?S:k,formattedValue:l(k),hidden:!1,index:u,indexValue:w,data:g[u]};m.push({key:e+"."+M.indexValue,index:m.length,data:M,x:L,y:C,absX:b.left+L,absY:b.top+C,width:t,height:V,color:r(M),label:d(M)})}))})),m},be=function(e,t,a,i){var n=e.data,l=e.formatValue,r=e.getIndex,o=e.getColor,d=e.getTooltipLabel,u=e.keys,c=e.innerPadding,s=void 0===c?0:c,h=e.xScale,f=e.yScale,b=e.margin,v=a?ce:ue,g=n.map(le),m=[];return u.forEach((function(e,a){return se(0,f.domain().length).forEach((function(u){var c,p,x,y=re(n[u][e]),S=y[0],k=y[1],w=r(n[u]),L=v(p=k,0)?i:null!=(x=h(p))?x:0,C=(null!=(c=f(w))?c:0)+t*a+s*a,V=function(e,t){var a;return v(e,0)?(null!=(a=h(e))?a:0)-i:i-t}(k,L),M={id:e,value:null===S?S:k,formattedValue:l(k),hidden:!1,index:u,indexValue:w,data:g[u]};m.push({key:e+"."+M.indexValue,index:m.length,data:M,x:L,y:C,absX:b.left+L,absY:b.top+C,width:V,height:t,color:o(M),label:d(M)})}))})),m},ve=function(e){var t,a,i=e.layout,n=e.minValue,l=e.maxValue,r=e.reverse,o=e.width,d=e.height,u=e.padding,c=void 0===u?0:u,s=e.innerPadding,h=void 0===s?0:s,f=e.valueScale,b=e.indexScale,v=e.hiddenIds,g=void 0===v?[]:v,m=q(e,de),p=m.keys.filter((function(e){return!g.includes(e)})),x=ne(m.data,p),y="vertical"===i?["y","x",o]:["x","y",d],S=y[0],k=y[1],w=y[2],L=ie(x,m.getIndex,c,b,w,k),C=j({max:l,min:n,reverse:r},f),V="auto"===C.min?he:function(e){return e},M=x.reduce((function(e,t){return[].concat(e,p.map((function(e){return t[e]})))}),[]).filter(Boolean),W=V(Math.min.apply(Math,M)),T=(a=Math.max.apply(Math,M),isFinite(a)?a:0),B=Y(C,{all:M,min:W,max:T},"x"===S?o:d,S),O="vertical"===i?[L,B]:[B,L],I=O[0],P=O[1],E=(L.bandwidth()-h*(p.length-1))/p.length,H=[j({},m,{data:x,keys:p,innerPadding:h,xScale:I,yScale:P}),E,C.reverse,null!=(t=B(0))?t:0];return{xScale:I,yScale:P,bars:E>0?"vertical"===i?fe.apply(void 0,H):be.apply(void 0,H):[]}},ge=["data","layout","minValue","maxValue","reverse","width","height","padding","valueScale","indexScale","hiddenIds"],me=function e(t){var a;return t.some(Array.isArray)?e((a=[]).concat.apply(a,t)):t},pe=function(e,t,a){var i=e.formatValue,n=e.getColor,l=e.getIndex,r=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,c=e.yScale,s=e.margin,h=[];return d.forEach((function(e){return u.domain().forEach((function(d,f){var b,v,g=e[f],m=null!=(b=u(l(g.data)))?b:0,p=(null!=(v=function(e){return c(e[a?0:1])}(g))?v:0)+.5*o,x=function(e,t){var i;return(null!=(i=c(e[a?1:0]))?i:0)-t}(g,p)-o,y=re(g.data[e.key]),S=y[0],k=y[1],w={id:e.key,value:null===S?S:k,formattedValue:i(k),hidden:!1,index:f,indexValue:d,data:le(g.data)};h.push({key:e.key+"."+d,index:h.length,data:w,x:m,y:p,absX:s.left+m,absY:s.top+p,width:t,height:x,color:n(w),label:r(w)})}))})),h},xe=function(e,t,a){var i=e.formatValue,n=e.getColor,l=e.getIndex,r=e.getTooltipLabel,o=e.innerPadding,d=e.stackedData,u=e.xScale,c=e.yScale,s=e.margin,h=[];return d.forEach((function(e){return c.domain().forEach((function(d,f){var b,v,g=e[f],m=null!=(b=c(l(g.data)))?b:0,p=(null!=(v=function(e){return u(e[a?1:0])}(g))?v:0)+.5*o,x=function(e,t){var i;return(null!=(i=u(e[a?0:1]))?i:0)-t}(g,p)-o,y=re(g.data[e.key]),S=y[0],k=y[1],w={id:e.key,value:null===S?S:k,formattedValue:i(k),hidden:!1,index:f,indexValue:d,data:le(g.data)};h.push({key:e.key+"."+d,index:h.length,data:w,x:p,y:m,absX:s.left+p,absY:s.top+m,width:x,height:t,color:n(w),label:r(w)})}))})),h},ye=function(e){var t,a=e.data,i=e.layout,n=e.minValue,l=e.maxValue,r=e.reverse,o=e.width,d=e.height,u=e.padding,c=void 0===u?0:u,s=e.valueScale,h=e.indexScale,f=e.hiddenIds,b=void 0===f?[]:f,v=q(e,ge),g=v.keys.filter((function(e){return!b.includes(e)})),m=G().keys(g).offset(z)(ne(a,g)),p="vertical"===i?["y","x",o]:["x","y",d],x=p[0],y=p[1],S=p[2],k=ie(a,v.getIndex,c,h,S,y),w=j({max:l,min:n,reverse:r},s),L=(t=me(m),"log"===s.type?t.filter((function(e){return 0!==e})):t),C=Math.min.apply(Math,L),V=Math.max.apply(Math,L),M=Y(w,{all:L,min:C,max:V},"x"===x?o:d,x),W="vertical"===i?[k,M]:[M,k],T=W[0],B=W[1],O=v.innerPadding>0?v.innerPadding:0,I=k.bandwidth(),P=[j({},v,{innerPadding:O,stackedData:m,xScale:T,yScale:B}),I,w.reverse];return{xScale:T,yScale:B,bars:I>0?"vertical"===i?pe.apply(void 0,P):xe.apply(void 0,P):[]}},Se=function(e){var t=e.bars,a=e.direction,i=e.from,n=e.groupMode,r=e.layout,o=e.legendLabel,d=e.reverse,u=l(null!=o?o:"indexes"===i?"indexValue":"id");return"indexes"===i?function(e,t,a){var i=N(e.map((function(e){var t,i;return{id:null!=(t=e.data.indexValue)?t:"",label:a(e.data),hidden:e.data.hidden,color:null!=(i=e.color)?i:"#000"}})),(function(e){return e.id}));return"horizontal"===t&&i.reverse(),i}(t,r,u):function(e,t,a,i,n,l){var r=N(e.map((function(e){var t;return{id:e.data.id,label:l(e.data),hidden:e.data.hidden,color:null!=(t=e.color)?t:"#000"}})),(function(e){return e.id}));return("vertical"===t&&"stacked"===i&&"column"===a&&!0!==n||"horizontal"===t&&"stacked"===i&&!0===n)&&r.reverse(),r}(t,r,a,n,d,u)},ke=function(e,t,a){var i=e.get(t)||0;e.set(t,i+a)},we=function(e,t,a){var i=e.get(t)||0;e.set(t,i+(a>0?a:0))},Le=function(e,t,a){var i=e.get(t)||0;e.set(t,Math.max(i,Number(a)))},Ce=function(e,t){var a=e.get(t)||0;e.set(t,a+1)},Ve=function(e){var t=e.indexBy,a=void 0===t?ee.indexBy:t,i=e.keys,l=void 0===i?ee.keys:i,d=e.label,u=void 0===d?ee.label:d,c=e.tooltipLabel,s=void 0===c?ee.tooltipLabel:c,h=e.valueFormat,f=e.colors,b=void 0===f?ee.colors:f,v=e.colorBy,g=void 0===v?ee.colorBy:v,m=e.borderColor,p=void 0===m?ee.borderColor:m,x=e.labelTextColor,S=void 0===x?ee.labelTextColor:x,L=e.groupMode,C=void 0===L?ee.groupMode:L,V=e.layout,M=void 0===V?ee.layout:V,W=e.reverse,T=void 0===W?ee.reverse:W,B=e.data,O=e.minValue,I=void 0===O?ee.minValue:O,P=e.maxValue,E=void 0===P?ee.maxValue:P,H=e.margin,R=e.width,A=e.height,X=e.padding,Y=void 0===X?ee.padding:X,G=e.innerPadding,z=void 0===G?ee.innerPadding:G,N=e.valueScale,q=void 0===N?ee.valueScale:N,K=e.indexScale,_=void 0===K?ee.indexScale:K,J=e.initialHiddenIds,Q=void 0===J?ee.initialHiddenIds:J,U=e.enableLabel,Z=void 0===U?ee.enableLabel:U,$=e.labelSkipWidth,te=void 0===$?ee.labelSkipWidth:$,ae=e.labelSkipHeight,ie=void 0===ae?ee.labelSkipHeight:ae,ne=e.legends,le=void 0===ne?ee.legends:ne,re=e.legendLabel,oe=e.totalsOffset,de=void 0===oe?ee.totalsOffset:oe,ue=w(null!=Q?Q:[]),ce=ue[0],se=ue[1],he=k((function(e){se((function(t){return t.indexOf(e)>-1?t.filter((function(t){return t!==e})):[].concat(t,[e])}))}),[]),fe=r(a),be=r(u),ge=r(s),me=o(h),pe=n(),xe=F(b,g),Ve=D(p,pe),Me=D(S,pe),We=("grouped"===C?ve:ye)({layout:M,reverse:T,data:B,getIndex:fe,keys:l,minValue:I,maxValue:E,width:R,height:A,getColor:xe,padding:Y,innerPadding:z,valueScale:q,indexScale:_,hiddenIds:ce,formatValue:me,getTooltipLabel:ge,margin:H}),Te=We.bars,Be=We.xScale,Oe=We.yScale,Ie=y((function(){return Te.filter((function(e){return null!==e.data.value})).map((function(e,t){return j({},e,{index:t})}))}),[Te]),Pe=k((function(e){var t=e.width,a=e.height;return!!Z&&(!(te>0&&t<te)&&!(ie>0&&a<ie))}),[Z,te,ie]),Ee=y((function(){return l.map((function(e){var t=Te.find((function(t){return t.data.id===e}));return j({},t,{data:j({id:e},null==t?void 0:t.data,{hidden:ce.includes(e)})})}))}),[ce,l,Te]),He=y((function(){return le.map((function(e){return[e,Se({bars:"keys"===e.dataFrom?Ee:Te,direction:e.direction,from:e.dataFrom,groupMode:C,layout:M,legendLabel:re,reverse:T})]}))}),[le,Ee,Te,C,M,re,T]),Re=y((function(){return function(e,t,a,i,n,l,r){void 0===i&&(i=ee.layout),void 0===n&&(n=ee.groupMode);var o=[];if(0===e.length)return o;var d=new Map,u=e[0].width,c=e[0].height;if("stacked"===n){var s=new Map;e.forEach((function(e){var t=e.data,a=t.indexValue,i=t.value;ke(d,a,Number(i)),we(s,a,Number(i))})),s.forEach((function(e,n){var s,h,f,b=d.get(n)||0;"vertical"===i?(s=t(n),h=a(e),f=a(e/2)):(s=t(e),h=a(n),f=t(e/2)),s+="vertical"===i?u/2:l,h+="vertical"===i?-l:c/2,o.push({key:"total_"+n,x:s,y:h,value:b,formattedValue:r(b),animationOffset:f})}))}else if("grouped"===n){var h=new Map,f=new Map;e.forEach((function(e){var t=e.data,a=t.indexValue,i=t.value;ke(d,a,Number(i)),Le(h,a,Number(i)),Ce(f,a)})),h.forEach((function(e,n){var s,h,b,v=d.get(n)||0,g=f.get(n);"vertical"===i?(s=t(n),h=a(e),b=a(e/2)):(s=t(e),h=a(n),b=t(e/2)),s+="vertical"===i?g*u/2:l,h+="vertical"===i?-l:g*c/2,o.push({key:"total_"+n,x:s,y:h,value:v,formattedValue:r(v),animationOffset:b})}))}return o}(Te,Be,Oe,M,C,de,me)}),[Te,Be,Oe,M,C,de,me]);return{bars:Te,barsWithValue:Ie,xScale:Be,yScale:Oe,getIndex:fe,getLabel:be,getTooltipLabel:ge,formatValue:me,getColor:xe,getBorderColor:Ve,getLabelColor:Me,shouldRenderBarLabel:Pe,hiddenIds:ce,toggleSerie:he,legendsWithData:He,barTotals:Re}},Me=function(e){var t=e.data,a=e.springConfig,i=e.animate,l=e.layout,r=void 0===l?te.layout:l,o=n();return x(t,{keys:function(e){return e.key},from:function(e){return{x:"vertical"===r?e.x:e.animationOffset,y:"vertical"===r?e.animationOffset:e.y,labelOpacity:0}},enter:function(e){return{x:e.x,y:e.y,labelOpacity:1}},update:function(e){return{x:e.x,y:e.y,labelOpacity:1}},leave:function(e){return{x:"vertical"===r?e.x:e.animationOffset,y:"vertical"===r?e.animationOffset:e.y,labelOpacity:0}},config:a,immediate:!i,initial:i?void 0:null})((function(e,t){return I(m.text,{x:e.x,y:e.y,fillOpacity:e.labelOpacity,style:j({},o.labels.text,{pointerEvents:"none",fill:o.text.fill}),fontWeight:"bold",fontSize:o.labels.text.fontSize,fontFamily:o.labels.text.fontFamily,textAnchor:"vertical"===r?"middle":"start",alignmentBaseline:"vertical"===r?"alphabetic":"middle",children:t.formattedValue},t.key)}))},We=["isInteractive","animate","motionConfig","theme","renderWrapper"],Te=function(a){var i=a.data,n=a.indexBy,l=a.keys,r=a.margin,o=a.width,d=a.height,b=a.groupMode,v=a.layout,g=a.reverse,m=a.minValue,p=a.maxValue,k=a.valueScale,w=a.indexScale,C=a.padding,V=a.innerPadding,M=a.axisTop,W=a.axisRight,T=a.axisBottom,B=void 0===T?te.axisBottom:T,O=a.axisLeft,P=void 0===O?te.axisLeft:O,E=a.enableGridX,H=void 0===E?te.enableGridX:E,R=a.enableGridY,F=void 0===R?te.enableGridY:R,D=a.gridXValues,A=a.gridYValues,X=a.layers,Y=void 0===X?te.layers:X,G=a.barComponent,z=void 0===G?te.barComponent:G,N=a.enableLabel,q=void 0===N?te.enableLabel:N,K=a.label,Q=a.labelSkipWidth,U=void 0===Q?te.labelSkipWidth:Q,Z=a.labelSkipHeight,$=void 0===Z?te.labelSkipHeight:Z,ee=a.labelTextColor,ae=a.labelPosition,ie=void 0===ae?te.labelPosition:ae,ne=a.labelOffset,le=void 0===ne?te.labelOffset:ne,re=a.markers,de=void 0===re?te.markers:re,ue=a.colorBy,ce=a.colors,se=a.defs,he=void 0===se?te.defs:se,fe=a.fill,be=void 0===fe?te.fill:fe,ve=a.borderRadius,ge=void 0===ve?te.borderRadius:ve,me=a.borderWidth,pe=void 0===me?te.borderWidth:me,xe=a.borderColor,ye=a.annotations,Se=void 0===ye?te.annotations:ye,ke=a.legendLabel,we=a.tooltipLabel,Le=a.valueFormat,Ce=a.isInteractive,We=void 0===Ce?te.isInteractive:Ce,Te=a.tooltip,Be=void 0===Te?te.tooltip:Te,Oe=a.onClick,Ie=a.onMouseEnter,Pe=a.onMouseLeave,Ee=a.legends,He=a.role,Re=void 0===He?te.role:He,Fe=a.ariaLabel,De=a.ariaLabelledBy,Ae=a.ariaDescribedBy,Xe=a.isFocusable,Ye=void 0===Xe?te.isFocusable:Xe,Ge=a.barAriaLabel,ze=a.barAriaLabelledBy,Ne=a.barAriaDescribedBy,je=a.barAriaHidden,qe=a.barAriaDisabled,Ke=a.initialHiddenIds,_e=a.enableTotals,Je=void 0===_e?te.enableTotals:_e,Qe=a.totalsOffset,Ue=void 0===Qe?te.totalsOffset:Qe,Ze=u(),$e=Ze.animate,et=Ze.config,tt=c(o,d,r),at=tt.outerWidth,it=tt.outerHeight,nt=tt.margin,lt=tt.innerWidth,rt=tt.innerHeight,ot=Ve({indexBy:n,label:K,tooltipLabel:we,valueFormat:Le,colors:ce,colorBy:ue,borderColor:xe,labelTextColor:ee,groupMode:b,layout:v,reverse:g,data:i,keys:l,minValue:m,maxValue:p,margin:nt,width:lt,height:rt,padding:C,innerPadding:V,valueScale:k,indexScale:w,enableLabel:q,labelSkipWidth:U,labelSkipHeight:$,legends:Ee,legendLabel:ke,initialHiddenIds:Ke,totalsOffset:Ue}),dt=ot.bars,ut=ot.barsWithValue,ct=ot.xScale,st=ot.yScale,ht=ot.getLabel,ft=ot.getTooltipLabel,bt=ot.getBorderColor,vt=ot.getLabelColor,gt=ot.shouldRenderBarLabel,mt=ot.toggleSerie,pt=ot.legendsWithData,xt=ot.barTotals,yt=ot.getColor,St=oe(v,g,ie,le),kt=x(ut,{keys:function(e){return e.key},from:function(e){return j({borderColor:bt(e),color:e.color,height:0,labelColor:vt(e),labelOpacity:0},St(e.width,e.height),{transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===v?{}:{height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0})},enter:function(e){return j({borderColor:bt(e),color:e.color,height:e.height,labelColor:vt(e),labelOpacity:1},St(e.width,e.height),{transform:"translate("+e.x+", "+e.y+")",width:e.width})},update:function(e){return j({borderColor:bt(e),color:e.color,height:e.height,labelColor:vt(e),labelOpacity:1},St(e.width,e.height),{transform:"translate("+e.x+", "+e.y+")",width:e.width})},leave:function(e){return j({borderColor:bt(e),color:e.color,height:0,labelColor:vt(e),labelOpacity:0},St(e.width,e.height),{labelY:0,transform:"translate("+e.x+", "+(e.y+e.height)+")",width:e.width},"vertical"===v?{}:j({},St(e.width,e.height),{labelX:0,height:e.height,transform:"translate("+e.x+", "+e.y+")",width:0}))},config:et,immediate:!$e,initial:$e?void 0:null}),wt=y((function(){return{borderRadius:ge,borderWidth:pe,enableLabel:q,isInteractive:We,labelSkipWidth:U,labelSkipHeight:$,onClick:Oe,onMouseEnter:Ie,onMouseLeave:Pe,getTooltipLabel:ft,tooltip:Be,isFocusable:Ye,ariaLabel:Ge,ariaLabelledBy:ze,ariaDescribedBy:Ne,ariaHidden:je,ariaDisabled:qe}}),[ge,pe,q,ft,We,$,U,Oe,Ie,Pe,Be,Ye,Ge,ze,Ne,je,qe]),Lt=s(he,dt,be,{dataKey:"data",targetKey:"data.fill"}),Ct={annotations:null,axes:null,bars:null,grid:null,legends:null,markers:null,totals:null};Y.includes("annotations")&&(Ct.annotations=I(_,{bars:dt,annotations:Se},"annotations")),Y.includes("axes")&&(Ct.axes=I(e,{xScale:ct,yScale:st,width:lt,height:rt,top:M,right:W,bottom:B,left:P},"axes")),Y.includes("bars")&&(Ct.bars=I(L,{children:kt((function(e,t){return S(z,j({},wt,{bar:t,style:e,shouldRenderLabel:gt(t),label:ht(t.data)}))}))},"bars")),Y.includes("grid")&&(Ct.grid=I(t,{width:lt,height:rt,xScale:H?ct:null,yScale:F?st:null,xValues:D,yValues:A},"grid")),Y.includes("legends")&&(Ct.legends=I(J,{width:lt,height:rt,legends:pt,toggleSerie:mt},"legends")),Y.includes("markers")&&(Ct.markers=I(h,{markers:de,width:lt,height:rt,xScale:ct,yScale:st},"markers")),Y.includes("totals")&&Je&&(Ct.totals=I(Me,{data:xt,springConfig:et,animate:$e,layout:v},"totals"));var Vt=y((function(){return j({},wt,{margin:nt,width:o,height:d,innerWidth:lt,innerHeight:rt,bars:dt,legendData:pt,enableLabel:q,xScale:ct,yScale:st,tooltip:Be,getTooltipLabel:ft,onClick:Oe,onMouseEnter:Ie,onMouseLeave:Pe,getColor:yt})}),[wt,nt,o,d,lt,rt,dt,pt,q,ct,st,Be,ft,Oe,Ie,Pe,yt]);return I(f,{width:at,height:it,margin:nt,defs:Lt,role:Re,ariaLabel:Fe,ariaLabelledBy:De,ariaDescribedBy:Ae,isFocusable:Ye,children:Y.map((function(e,t){var a;return"function"==typeof e?I(L,{children:S(e,Vt)},t):null!=(a=null==Ct?void 0:Ct[e])?a:null}))})},Be=function(e){var t=e.isInteractive,a=void 0===t?te.isInteractive:t,i=e.animate,n=void 0===i?te.animate:i,l=e.motionConfig,r=void 0===l?te.motionConfig:l,o=e.theme,u=e.renderWrapper,c=q(e,We);return I(d,{animate:n,isInteractive:a,motionConfig:r,renderWrapper:u,theme:o,children:I(Te,j({isInteractive:a},c))})},Oe=["isInteractive","renderWrapper","theme"],Ie=function(e,t,a,i){return e.find((function(e){return v(e.x+t.left,e.y+t.top,e.width,e.height,a,i)}))};var Pe=function(e){var t=e.data,l=e.indexBy,r=e.keys,d=e.margin,u=e.width,s=e.height,h=e.groupMode,f=e.layout,v=e.reverse,g=e.minValue,m=e.maxValue,p=e.valueScale,x=e.indexScale,w=e.padding,L=e.innerPadding,C=e.axisTop,T=e.axisRight,P=e.axisBottom,E=void 0===P?ae.axisBottom:P,H=e.axisLeft,F=void 0===H?ae.axisLeft:H,D=e.enableGridX,X=void 0===D?ae.enableGridX:D,Y=e.enableGridY,G=void 0===Y?ae.enableGridY:Y,z=e.gridXValues,N=e.gridYValues,q=e.labelPosition,K=void 0===q?ae.labelPosition:q,_=e.labelOffset,J=void 0===_?ae.labelOffset:_,Q=e.layers,U=void 0===Q?ae.layers:Q,Z=e.renderBar,$=void 0===Z?function(e,t){var a=t.bar,i=a.color,n=a.height,l=a.width,r=a.x,o=a.y,d=t.borderColor,u=t.borderRadius,c=t.borderWidth,s=t.label,h=t.labelColor,f=t.shouldRenderLabel,b=t.labelX,v=t.labelY,g=t.textAnchor;if(e.fillStyle=i,c>0&&(e.strokeStyle=d,e.lineWidth=c),e.beginPath(),u>0){var m=Math.min(u,n);e.moveTo(r+m,o),e.lineTo(r+l-m,o),e.quadraticCurveTo(r+l,o,r+l,o+m),e.lineTo(r+l,o+n-m),e.quadraticCurveTo(r+l,o+n,r+l-m,o+n),e.lineTo(r+m,o+n),e.quadraticCurveTo(r,o+n,r,o+n-m),e.lineTo(r,o+m),e.quadraticCurveTo(r,o,r+m,o),e.closePath()}else e.rect(r,o,l,n);e.fill(),c>0&&e.stroke(),f&&(e.textBaseline="middle",e.textAlign="middle"===g?"center":g,e.fillStyle=h,e.fillText(s,r+b,o+v))}:Z,ee=e.enableLabel,te=void 0===ee?ae.enableLabel:ee,ie=e.label,ne=e.labelSkipWidth,le=void 0===ne?ae.labelSkipWidth:ne,re=e.labelSkipHeight,de=void 0===re?ae.labelSkipHeight:re,ue=e.labelTextColor,ce=e.colorBy,se=e.colors,he=e.borderRadius,fe=void 0===he?ae.borderRadius:he,be=e.borderWidth,ve=void 0===be?ae.borderWidth:be,ge=e.borderColor,me=e.annotations,pe=void 0===me?ae.annotations:me,xe=e.legendLabel,ye=e.tooltipLabel,Se=e.valueFormat,ke=e.isInteractive,we=void 0===ke?ae.isInteractive:ke,Le=e.tooltip,Ce=void 0===Le?ae.tooltip:Le,Me=e.onClick,We=e.onMouseEnter,Te=e.onMouseLeave,Be=e.legends,Oe=e.pixelRatio,Pe=void 0===Oe?ae.pixelRatio:Oe,Ee=e.canvasRef,He=e.enableTotals,Re=void 0===He?ae.enableTotals:He,Fe=e.totalsOffset,De=void 0===Fe?ae.totalsOffset:Fe,Ae=V(null),Xe=n(),Ye=c(u,s,d),Ge=Ye.margin,ze=Ye.innerWidth,Ne=Ye.innerHeight,je=Ye.outerWidth,qe=Ye.outerHeight,Ke=Ve({indexBy:l,label:ie,tooltipLabel:ye,valueFormat:Se,colors:se,colorBy:ce,borderColor:ge,labelTextColor:ue,groupMode:h,layout:f,reverse:v,data:t,keys:r,minValue:g,maxValue:m,margin:Ge,width:ze,height:Ne,padding:w,innerPadding:L,valueScale:p,indexScale:x,enableLabel:te,labelSkipWidth:le,labelSkipHeight:de,legends:Be,legendLabel:xe,totalsOffset:De}),_e=Ke.bars,Je=Ke.barsWithValue,Qe=Ke.xScale,Ue=Ke.yScale,Ze=Ke.getLabel,$e=Ke.getTooltipLabel,et=Ke.getBorderColor,tt=Ke.getLabelColor,at=Ke.shouldRenderBarLabel,it=Ke.legendsWithData,nt=Ke.barTotals,lt=Ke.getColor,rt=A(),ot=rt.showTooltipFromEvent,dt=rt.hideTooltip,ut=B({annotations:W({data:_e,annotations:pe,getPosition:function(e){return{x:e.x,y:e.y}},getDimensions:function(e){var t=e.width,a=e.height;return{width:t,height:a,size:Math.max(t,a)}}})}),ct=y((function(){return{borderRadius:fe,borderWidth:ve,isInteractive:we,isFocusable:!1,labelSkipWidth:le,labelSkipHeight:de,margin:Ge,width:u,height:s,innerWidth:ze,innerHeight:Ne,bars:_e,legendData:it,enableLabel:te,xScale:Qe,yScale:Ue,tooltip:Ce,getTooltipLabel:$e,onClick:Me,onMouseEnter:We,onMouseLeave:Te,getColor:lt}}),[fe,ve,we,le,de,Ge,u,s,ze,Ne,_e,it,te,Qe,Ue,Ce,$e,Me,We,Te,lt]),st=o(Se),ht=oe(f,v,K,J);M((function(){var e,t=null==(e=Ae.current)?void 0:e.getContext("2d");Ae.current&&t&&(Ae.current.width=je*Pe,Ae.current.height=qe*Pe,t.scale(Pe,Pe),t.fillStyle=Xe.background,t.fillRect(0,0,je,qe),t.translate(Ge.left,Ge.top),U.forEach((function(e){"grid"===e?"number"==typeof Xe.grid.line.strokeWidth&&Xe.grid.line.strokeWidth>0&&(t.lineWidth=Xe.grid.line.strokeWidth,t.strokeStyle=Xe.grid.line.stroke,X&&a(t,{width:ze,height:Ne,scale:Qe,axis:"x",values:z}),G&&a(t,{width:ze,height:Ne,scale:Ue,axis:"y",values:N})):"axes"===e?i(t,{xScale:Qe,yScale:Ue,width:ze,height:Ne,top:C,right:T,bottom:E,left:F,theme:Xe}):"bars"===e?Je.forEach((function(e){$(t,j({bar:e,borderColor:et(e),borderRadius:fe,borderWidth:ve,label:Ze(e.data),labelColor:tt(e),shouldRenderLabel:at(e)},ht(e.width,e.height)))})):"legends"===e?it.forEach((function(e){var a=e[0],i=e[1];R(t,j({},a,{data:i,containerWidth:ze,containerHeight:Ne,theme:Xe}))})):"annotations"===e?O(t,{annotations:ut,theme:Xe}):"totals"===e&&Re?function(e,t,a,i){void 0===i&&(i=ae.layout),e.fillStyle=a.text.fill,e.font="bold "+a.labels.text.fontSize+"px "+a.labels.text.fontFamily,e.textBaseline="vertical"===i?"alphabetic":"middle",e.textAlign="vertical"===i?"center":"start",t.forEach((function(t){e.fillText(t.formattedValue,t.x,t.y)}))}(t,nt,Xe,f):"function"==typeof e&&e(t,ct)})),t.save())}),[E,F,T,C,Je,fe,ve,ut,X,G,et,Ze,tt,z,N,h,s,Ne,ze,ct,U,f,it,Ge.left,Ge.top,qe,je,Pe,$,Qe,Ue,v,at,Xe,u,nt,Re,st,ht]);var ft=k((function(e){if(_e&&Ae.current){var t=b(Ae.current,e),a=t[0],i=t[1],n=Ie(_e,Ge,a,i);void 0!==n?(ot(S(Ce,j({},n.data,{color:n.color,label:n.label,value:Number(n.data.value)})),e),"mouseenter"===e.type&&(null==We||We(n.data,e))):dt()}}),[dt,Ge,We,_e,ot,Ce]),bt=k((function(e){if(_e&&Ae.current){dt();var t=b(Ae.current,e),a=t[0],i=t[1],n=Ie(_e,Ge,a,i);n&&(null==Te||Te(n.data,e))}}),[dt,Ge,Te,_e]),vt=k((function(e){if(_e&&Ae.current){var t=b(Ae.current,e),a=t[0],i=t[1],n=Ie(_e,Ge,a,i);void 0!==n&&(null==Me||Me(j({},n.data,{color:n.color}),e))}}),[Ge,Me,_e]);return I("canvas",{ref:function(e){Ae.current=e,Ee&&"current"in Ee&&(Ee.current=e)},width:je*Pe,height:qe*Pe,style:{width:je,height:qe,cursor:we?"auto":"normal"},onMouseEnter:we?ft:void 0,onMouseMove:we?ft:void 0,onMouseLeave:we?bt:void 0,onClick:we?vt:void 0})},Ee=C((function(e,t){var a=e.isInteractive,i=e.renderWrapper,n=e.theme,l=q(e,Oe);return I(d,{isInteractive:a,renderWrapper:i,theme:n,animate:!1,children:I(Pe,j({},l,{canvasRef:t}))})})),He=function(e){return I(g,{children:function(t){var a=t.width,i=t.height;return I(Be,j({width:a,height:i},e))}})},Re=C((function(e,t){return I(g,{children:function(a){var i=a.width,n=a.height;return I(Ee,j({width:i,height:n},e,{ref:t}))}})}));export{Be as Bar,Ee as BarCanvas,U as BarItem,$ as BarTooltip,Me as BarTotals,He as ResponsiveBar,Re as ResponsiveBarCanvas,ae as canvasDefaultProps,ee as defaultProps,te as svgDefaultProps};
//# sourceMappingURL=nivo-bar.es.js.map
