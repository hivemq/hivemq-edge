# Screenshot Usage Analysis & Implementation Plan

**Task:** EDG-40-technical-documentation
**Date:** 2026-02-13
**Status:** Analysis Complete, Ready for Implementation

---

## Executive Summary

Analyzed current screenshot usage across 9 Cypress test files (42 screenshot occurrences) and existing screenshot files (20 files). Created comprehensive screenshot guidelines and integrated into documentation acceptance criteria.

**Key Findings:**

- Inconsistent naming patterns (spaces, slashes, PR prefixes)
- Mix of intentional documentation screenshots and CI failure artifacts
- No centralized documentation asset storage
- Good foundation with existing tests using screenshots

**Deliverables:**

- ✅ SCREENSHOT_GUIDELINES.md (comprehensive standards)
- ✅ Updated DOCUMENTATION_ACCEPTANCE_CRITERIA.md (added Criterion 6)
- ✅ Implementation plan for operationalizing screenshots

---

## Current Screenshot Inventory

### Test Files Using Screenshots (9 files, 42 occurrences)

**E2E Tests:**

1. `cypress/e2e/workspace/workspace-pr-screenshots.spec.cy.ts` - Dedicated PR screenshots
2. `cypress/e2e/workspace/workspace-status.spec.cy.ts` - 8 occurrences
3. `cypress/e2e/workspace/workspace-layout-accessibility.spec.cy.ts` - 3 occurrences
4. `cypress/e2e/workspace/duplicate-combiner.spec.cy.ts` - 2 occurrences
5. `cypress/e2e/workspace/wizard/wizard-create-*.spec.cy.ts` - Multiple files, 7+ occurrences

**DataHub E2E Tests:** 6. `cypress/e2e/datahub/resource-edit-flow.spec.cy.ts` - 4 occurrences 7. `cypress/e2e/datahub/policy-report.spec.cy.ts` - 2 occurrences

**Component Tests:** 8. `src/extensions/datahub/components/pages/SchemaTable.copilot.spec.cy.tsx` - AI-assisted test 9. Other component tests (100+ files, minimal screenshot usage currently)

### Existing Screenshot Files (20 files)

**Location:** `cypress/screenshots/`

**Categories:**

1. **Intentional Documentation Screenshots (6 files):**

   - `workspace-pr-screenshots.spec.cy.ts/PR-Screenshot-*`
   - `wizard-create-*.spec.cy.ts/Workspace Wizard/*`
   - `duplicate-combiner.spec.cy.ts/after/*`

2. **CI Failure Artifacts (14 files):**
   - Failed test screenshots with "(failed)" suffix
   - Failed accessibility tests "(failed) (attempt 2)"
   - Should be cleaned up/ignored

---

## Naming Pattern Analysis

### Current Patterns (Inconsistent)

**Pattern 1: PR Prefix**

```
PR-Screenshot-1-Healthy-Workspace-All-Systems-Operational
PR-ghost-nodes-multiple
PR-wizard-menu-dropdown
PR-configuration-panel
```

- ✅ Descriptive
- ❌ Unnecessary prefix
- ❌ Mixed case

**Pattern 2: Nested with Slashes**

```
Workspace Wizard/ Bridge wizard progress
Workspace Wizard/ Adapter configuration
Workspace Wizard/ Bridge ghost preview (regression)
```

- ✅ Logical grouping
- ❌ Spaces in names
- ❌ Slash creates subdirectories

**Pattern 3: Subdirectory Pattern**

```
after/after-modal-empty-state
after/after-modal-with-mappings
```

- ✅ Before/after grouping
- ❌ Directory in filename
- ⚠️ Can work but inconsistent

**Pattern 4: Failed Test Artifacts**

```
Modal with Mappings -- should display existing mappings in modal (failed).png
Accessibility -- should be accessible with mappings (failed) (attempt 2).png
```

- ❌ Not intentional documentation
- ❌ Auto-generated by Cypress failures
- ❌ Should be ignored/cleaned

### Recommended Pattern (New Standard)

**Format:** `{feature}-{state}-{description}.png`

**Examples:**

```
workspace-healthy-all-operational.png
workspace-wizard-01-menu.png
workspace-wizard-02-type-selection.png
workspace-wizard-03-configuration.png
duplicate-combiner-modal-empty.png
duplicate-combiner-modal-populated.png
policy-designer-canvas-empty.png
policy-designer-canvas-with-nodes.png
schema-table-empty-state.png
schema-table-with-data.png
```

**Benefits:**

- Consistent, lowercase, hyphen-separated
- Self-documenting
- Works across platforms
- Easy to search and filter

---

## Documentation Enhancement Opportunities

### Priority 1: Architecture Documents

#### DATAHUB_ARCHITECTURE.md

**Current:** 5 Mermaid diagrams, 0 screenshots
**Recommended:** Add 2-3 strategic screenshots

**Screenshot Opportunities:**

1. **Policy Designer Canvas - Empty State**

   - Test: Create dedicated screenshot test
   - Name: `datahub-designer-canvas-empty.png`
   - Shows: Clean React Flow canvas, toolbox, toolbar
   - Value: Visual reference for architecture discussion

2. **Policy Designer - Data Policy Example**

   - Test: Enhance existing test or create new
   - Name: `datahub-designer-data-policy-example.png`
   - Shows: Validator + Schema nodes connected
   - Value: Concrete example of concepts discussed

3. **Policy Validation Report**
   - Test: Possibly from `policy-report.spec.cy.ts`
   - Name: `datahub-validation-report-success.png`
   - Shows: Validation results UI
   - Value: Demonstrates validation workflow outcome

**Implementation:**

```typescript
// New file: cypress/e2e/datahub/datahub-documentation-screenshots.spec.cy.ts
describe('DataHub - Documentation Screenshots', () => {
  it('should capture policy designer states', () => {
    cy.viewport(1280, 720)

    // Empty canvas
    cy.visit('/datahub/data-policies/new')
    cy.wait('@getPolicySchema')
    cy.screenshot('datahub-designer-canvas-empty', {
      overwrite: true,
      capture: 'viewport',
    })

    // With example nodes (TODO: implement node creation)
    // ... drag nodes from toolbox
    cy.screenshot('datahub-designer-data-policy-example', {
      overwrite: true,
      capture: 'viewport',
    })
  })
})
```

### Priority 2: Future Guide Documents

#### ONBOARDING.md (TODO)

**Recommended:** 3-4 screenshots

**Screenshot Opportunities:**

1. **Development Server Running**

   - Test: Could be manual screenshot or E2E test
   - Name: `onboarding-dev-server-running.png`
   - Shows: Terminal with `pnpm dev` output, browser at localhost:3000
   - Value: Confirms successful setup

2. **Workspace Landing Page**
   - Test: E2E test visiting /app/workspace
   - Name: `onboarding-workspace-landing.png`
   - Shows: Initial workspace view
   - Value: First view new developers see

#### TESTING_GUIDE.md (TODO - Migration)

**Recommended:** 2-3 screenshots

**Screenshot Opportunities:**

1. **Component Test Example**

   - Test: Simple component test with assertions
   - Name: `testing-component-test-example.png`
   - Shows: Cypress component test runner with mounted component
   - Value: Visual reference for component testing

2. **Accessibility Test Failure**
   - Test: Intentional a11y violation
   - Name: `testing-accessibility-violation-example.png`
   - Shows: Cypress axe violations panel
   - Value: Shows what a11y failures look like

#### DESIGN_GUIDE.md (TODO - Migration)

**Recommended:** 4-5 screenshots

**Screenshot Opportunities:**

1. **Button Variants**

   - Test: Component test rendering all button variants
   - Name: `design-button-variants.png`
   - Shows: Primary, outline, ghost, danger buttons
   - Value: Visual reference for button usage

2. **Form States**
   - Test: Component test with various form states
   - Name: `design-form-states-example.png`
   - Shows: Empty, filled, error, success states
   - Value: Design pattern examples

### Priority 3: Technical Documents

#### TECHNICAL_STACK.md

**Current:** 1 Mermaid CI/CD diagram, 0 screenshots
**Recommended:** 0-1 screenshots (optional)

**Screenshot Opportunity (Optional):**

1. **GitHub Actions Pipeline Success**
   - Test: Manual screenshot from GitHub
   - Name: `technical-ci-pipeline-success.png`
   - Shows: Green checkmarks on all jobs
   - Value: Shows actual CI/CD in action

---

## Implementation Roadmap

### Phase 1: Foundation (Immediate)

**Goal:** Establish screenshot infrastructure

1. **Create Directory Structure**

   ```bash
   mkdir -p docs/assets/screenshots/{datahub,workspace,adapters,bridges,ui-components,development,common}
   ```

   **Organization Philosophy:**

   - Organized by feature/domain, NOT by document type
   - Enables screenshot reuse across multiple documents
   - Example: `datahub/designer-canvas-empty.png` can be used in:
     - `docs/architecture/DATAHUB_ARCHITECTURE.md`
     - `docs/guides/DATAHUB_GUIDE.md`
     - `docs/guides/ONBOARDING.md`
   - Single source of truth for each visual asset

2. **Clean Up Existing Screenshots**

   - Delete CI failure artifacts
   - Keep intentional documentation screenshots
   - Rename using new convention

3. **Create First Screenshot Test**

   - File: `cypress/e2e/datahub/datahub-documentation-screenshots.spec.cy.ts`
   - Capture 2-3 key DataHub views
   - Copy to docs/assets/screenshots/datahub/

4. **Integrate into DATAHUB_ARCHITECTURE.md**
   - Add 1-2 screenshots with captions
   - Use as proof-of-concept

### Phase 2: Enhancement (Short Term)

**Goal:** Add screenshots to existing documentation

1. **Review DATAHUB_ARCHITECTURE.md**

   - Identify 2-3 sections where screenshots add value
   - Create or enhance tests to capture screenshots
   - Integrate with proper captions and alt text

2. **Prepare for Future Guides**

   - Identify screenshot needs for ONBOARDING.md
   - Create screenshot tests for TESTING_GUIDE.md migration
   - Prepare design pattern screenshots for DESIGN_GUIDE.md

3. **Create Screenshot Copy Script** (Optional)
   - Script to copy from cypress/screenshots/ to docs/assets/
   - Automate naming normalization
   - Add to package.json scripts

### Phase 3: Standardization (Medium Term)

**Goal:** Apply standards across all tests

1. **Update Existing Screenshot Tests**

   - Apply naming convention to all tests
   - Add comments explaining screenshot purpose
   - Remove or fix inconsistent patterns

2. **Component Test Enhancement**

   - Identify 5-10 key components for screenshots
   - Add screenshot commands to component tests
   - Focus on visual states (empty, error, success)

3. **Documentation Integration**
   - Review all documentation for screenshot opportunities
   - Add screenshots where beneficial
   - Maintain 1-2 screenshots per major section limit

---

## Test Implementation Examples

### Example 1: DataHub Designer Canvas

**File:** `cypress/e2e/datahub/datahub-documentation-screenshots.spec.cy.ts`

```typescript
/// <reference types="cypress" />

import { cy_interceptCoreE2E } from 'cypress/utils/intercept.utils.ts'

/**
 * This test suite captures screenshots specifically for documentation.
 * Screenshots are used in docs/architecture/DATAHUB_ARCHITECTURE.md
 *
 * IMPORTANT: All E2E screenshots MUST use HD viewport (1280x720)
 *
 * After running tests:
 * 1. Find screenshots in cypress/screenshots/datahub/datahub-documentation-screenshots.spec.cy.ts/
 * 2. Copy to docs/assets/screenshots/datahub/
 * 3. Update documentation with proper captions
 */
describe('DataHub - Documentation Screenshots', () => {
  beforeEach(() => {
    // REQUIRED: HD viewport (1280x720) for all E2E screenshots
    cy.viewport(1280, 720)
    cy_interceptCoreE2E()

    cy.intercept('/api/v1/data-hub/data-validation/policies/schema', {
      statusCode: 200,
      body: {
        /* schema */
      },
    }).as('getPolicySchema')
  })

  it('should capture policy designer empty canvas', () => {
    cy.visit('/datahub/data-policies/new')
    cy.wait('@getPolicySchema')
    cy.wait(500) // Allow canvas to stabilize

    // Capture clean canvas with toolbox and toolbar
    cy.screenshot('datahub-designer-canvas-empty', {
      overwrite: true,
      capture: 'viewport',
    })
  })

  it('should capture schema table states', () => {
    // Empty state
    cy.intercept('/api/v1/data-hub/schemas', { items: [] })
    cy.visit('/datahub/schemas')
    cy.wait(500)

    cy.screenshot('datahub-schema-table-empty-state', {
      overwrite: true,
      capture: 'viewport',
    })

    // With data (reload with mock data)
    cy.intercept('/api/v1/data-hub/schemas', {
      items: [
        {
          id: 'temperature-schema',
          type: 'JSON',
          schemaDefinition: '{"type":"object"}',
          version: 1,
          createdAt: new Date().toISOString(),
        },
      ],
    })

    cy.reload()
    cy.wait(500)

    cy.screenshot('datahub-schema-table-with-data', {
      overwrite: true,
      capture: 'viewport',
    })
  })
})
```

### Example 2: Button Variants (Component Test)

**File:** `src/components/Chakra/ButtonVariants.doc.spec.cy.tsx`

```typescript
import { Button } from '@chakra-ui/react'
import { VStack } from '@chakra-ui/react'

/**
 * Documentation screenshot test for button variants
 * Used in docs/guides/DESIGN_GUIDE.md
 */
describe('Button Variants - Documentation', () => {
  it('should capture all button variants', () => {
    cy.viewport(800, 600)

    cy.mountWithProviders(
      <VStack spacing={4} align="stretch" p={8}>
        <Button variant="primary">Primary Button</Button>
        <Button variant="outline">Outline Button</Button>
        <Button variant="ghost">Ghost Button</Button>
        <Button variant="danger">Danger Button</Button>
        <Button variant="primary" isDisabled>Disabled Button</Button>
      </VStack>
    )

    cy.wait(300) // Allow render to stabilize

    cy.screenshot('design-button-variants', {
      overwrite: true,
      capture: 'viewport'
    })
  })
})
```

### Example 3: Workspace Wizard Workflow

**File:** `cypress/e2e/workspace/wizard/wizard-documentation-screenshots.spec.cy.ts`

```typescript
/**
 * Documentation screenshots for workspace wizard workflow
 * Used in docs/guides/WORKSPACE_GUIDE.md (future)
 *
 * IMPORTANT: All E2E screenshots MUST use HD viewport (1280x720)
 */
describe('Workspace Wizard - Documentation Screenshots', () => {
  beforeEach(() => {
    // REQUIRED: HD viewport (1280x720) for all E2E screenshots
    cy.viewport(1280, 720)
    cy_interceptCoreE2E()
    cy.visit('/app/workspace')
  })

  it('should capture adapter creation workflow', () => {
    // Step 1: Open wizard menu
    cy.getByTestId('workspace-add-button').click()
    cy.wait(300)
    cy.screenshot('workspace-wizard-01-menu', {
      overwrite: true,
      capture: 'viewport',
    })

    // Step 2: Select adapter type
    cy.getByTestId('wizard-option-adapter').click()
    cy.wait(300)
    cy.screenshot('workspace-wizard-02-adapter-selection', {
      overwrite: true,
      capture: 'viewport',
    })

    // Step 3: Configuration panel
    // ... fill out form
    cy.screenshot('workspace-wizard-03-configuration', {
      overwrite: true,
      capture: 'viewport',
    })

    // Step 4: Success state
    // ... submit form
    cy.screenshot('workspace-wizard-04-success', {
      overwrite: true,
      capture: 'viewport',
    })
  })
})
```

---

## Existing Test Migration Plan

### workspace-pr-screenshots.spec.cy.ts

**Current:**

- File: `cypress/e2e/workspace/workspace-pr-screenshots.spec.cy.ts`
- Screenshots: PR-focused with descriptive names
- Purpose: Document workspace states for PRs

**Action:**

1. Rename screenshots using new convention
2. Copy to docs/assets/screenshots/workspace/
3. Reference in WORKSPACE_ARCHITECTURE.md and other docs as needed

**Renaming:**

```
Before: PR-Screenshot-1-Healthy-Workspace-All-Systems-Operational
After:  workspace-healthy-all-operational.png
```

### duplicate-combiner.spec.cy.ts

**Current:**

- File: `cypress/e2e/workspace/duplicate-combiner.spec.cy.ts`
- Screenshots: `after/after-modal-empty-state`, etc.
- Purpose: Document duplicate detection modal states

**Action:**

1. Keep test as-is (serves functional purpose)
2. Rename screenshots if used in docs
3. Optional: Extract to dedicated documentation test

**Renaming:**

```
Before: after/after-modal-empty-state
After:  duplicate-combiner-modal-empty.png

Before: after/after-modal-with-mappings
After:  duplicate-combiner-modal-populated.png
```

### wizard tests

**Current:**

- Multiple wizard tests with screenshots
- Nested naming: `Workspace Wizard/ Bridge wizard progress`
- Mixed purposes (functional + documentation)

**Action:**

1. Create dedicated `wizard-documentation-screenshots.spec.cy.ts`
2. Consolidate documentation screenshots in one place
3. Keep functional tests focused on assertions

---

## Metrics & Success Criteria

### Initial Metrics (Current State)

- **Test files with screenshots:** 9
- **Total screenshot occurrences:** 42
- **Intentional documentation screenshots:** ~6
- **CI failure artifacts:** ~14
- **Documentation with screenshots:** 0
- **Naming consistency:** Low (4 different patterns)

### Target Metrics (After Implementation)

**Phase 1 Complete:**

- ✅ Screenshot guidelines documented
- ✅ Acceptance criteria updated (Criterion 6)
- ✅ Directory structure created
- ✅ 2-3 screenshots in DATAHUB_ARCHITECTURE.md
- ✅ Naming consistency: 100%

**Phase 2 Complete:**

- ✅ 5+ documentation screenshots in docs/assets/
- ✅ All screenshots follow naming convention
- ✅ CI failure artifacts cleaned up
- ✅ Screenshot copy workflow established

**Phase 3 Complete:**

- ✅ 10+ strategic screenshots across documentation
- ✅ All screenshot tests documented with comments
- ✅ Maximum 1-2 screenshots per major doc section
- ✅ All screenshots have alt text and captions

---

## Maintenance & Review

### Quarterly Review

1. **Check Screenshot Freshness**

   - Do screenshots reflect current UI?
   - Any breaking visual changes?
   - Update screenshots if needed

2. **Review Screenshot Usage**

   - Are screenshots still adding value?
   - Any sections over-using screenshots?
   - Opportunities for new screenshots?

3. **Test Health**
   - Are screenshot tests passing?
   - Any flaky screenshot tests?
   - Performance impact acceptable?

### PR Review Checklist

When PRs add screenshots:

- [ ] Screenshot follows naming convention
- [ ] Stored in correct directory
- [ ] Alt text and caption provided
- [ ] Test exists to regenerate
- [ ] No sensitive data visible
- [ ] Adds value (not redundant)

---

## Commands & Scripts

### Run Screenshot Tests

```bash
# All screenshot tests
pnpm cypress:run:e2e --spec "cypress/e2e/**/*documentation-screenshots.spec.cy.ts"

# Specific screenshot test
pnpm cypress:run:e2e --spec "cypress/e2e/datahub/datahub-documentation-screenshots.spec.cy.ts"

# Component screenshot tests
pnpm cypress:run:component --spec "src/**/*.doc.spec.cy.tsx"
```

### Find Screenshots

```bash
# Find all screenshot commands in tests
grep -r "cy.screenshot" src/ cypress/

# List all screenshot files
find cypress/screenshots -type f -name "*.png"

# List documentation screenshots
find docs/assets/screenshots -type f -name "*.png"
```

### Clean Up

```bash
# Remove CI failure artifacts
find cypress/screenshots -name "*failed*.png" -delete

# Remove old screenshots (optional)
rm -rf cypress/screenshots/*
```

---

## Recommended Next Steps

1. **Create Directory Structure**

   ```bash
   mkdir -p docs/assets/screenshots/{datahub,workspace,adapters,bridges,ui-components,development,common}
   ```

   Note: Organized by feature/domain for maximum reusability across documents

2. **Create First Screenshot Test**

   - Implement `datahub-documentation-screenshots.spec.cy.ts`
   - Run test to generate screenshots
   - Copy to docs/assets/screenshots/datahub/

3. **Update DATAHUB_ARCHITECTURE.md**

   - Add 1-2 screenshots with captions
   - Verify images render correctly
   - Use as template for future docs

4. **Clean Up Existing Screenshots**

   - Review cypress/screenshots/ directory
   - Delete CI failure artifacts
   - Rename intentional screenshots to new convention

5. **Plan Future Screenshots**
   - Review MISSING_DOCS_TRACKER.md
   - Identify screenshot needs for upcoming guides
   - Prepare screenshot tests in advance

---

## Conclusion

Screenshot guidelines are now fully documented and integrated into the documentation acceptance criteria. The foundation is ready for operationalizing screenshots across the documentation.

**Key Success Factors:**

1. **Consistency** - All screenshots follow naming convention
2. **HD Viewport Standard** - 1280x720 REQUIRED for all E2E screenshots
3. **Purpose** - Screenshots only where they add value
4. **Quality** - Clean state, realistic data, stable render
5. **Maintainability** - Tests exist to regenerate screenshots
6. **Balance** - Limit usage like diagrams (1-2 per section)
7. **Reusability** - Feature-based organization enables cross-document use

**Implementation is ready to begin with Phase 1.**

---

**Analysis Complete:** ✅
**Guidelines Created:** ✅
**Ready for Implementation:** ✅

**Last Updated:** 2026-02-13
**Analyst:** AI Documentation Team
**Related:** [SCREENSHOT_GUIDELINES.md](./SCREENSHOT_GUIDELINES.md), [DOCUMENTATION_ACCEPTANCE_CRITERIA.md](./DOCUMENTATION_ACCEPTANCE_CRITERIA.md)
